{"version":3,"file":"laya.device.js","sources":["../../src/layaAir/laya/device/motion/AccelerationInfo.ts","../../src/layaAir/laya/device/motion/RotationInfo.ts","../../src/layaAir/laya/device/motion/Accelerator.ts","../../src/layaAir/laya/device/Shake.ts","../../src/layaAir/laya/device/geolocation/GeolocationInfo.ts","../../src/layaAir/laya/device/geolocation/Geolocation.ts","../../src/layaAir/laya/device/media/Media.ts","../../src/layaAir/laya/device/motion/Gyroscope.ts"],"sourcesContent":["/**\r\n\t * 加速度x/y/z的单位均为m/s²。\r\n\t * 在硬件（陀螺仪）不支持的情况下，alpha、beta和gamma值为null。\r\n\t * \r\n\t * @author Survivor\r\n\t */\r\nexport class AccelerationInfo {\r\n\t/**\r\n\t * x轴上的加速度值。\r\n\t */\r\n\tx: number;\r\n\t/**\r\n\t * y轴上的加速度值。\r\n\t */\r\n\ty: number;\r\n\t/**\r\n\t * z轴上的加速度值。\r\n\t */\r\n\tz: number;\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n}\r\n\r\n","/**\r\n\t * 保存旋转信息的类。请勿修改本类的属性。\r\n\t * @author Survivor\r\n\t */\r\nexport class RotationInfo {\r\n\t/**\r\n\t * <p>\r\n\t * 指示设备是否可以提供绝对方位数据（指向地球坐标系），或者设备决定的任意坐标系。\r\n\t * 关于坐标系参见<i>https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Orientation_and_motion_data_explained</i>。\r\n\t * </p>\r\n\t * 需要注意的是，IOS环境下，该值始终为false。即使如此，你依旧可以从<code>alpha</code>中取得正确的值。\r\n\t */\r\n\tabsolute: boolean;\r\n\r\n\t/**\r\n\t * Z轴旋转角度，其值范围从0至360。\r\n\t * 若<code>absolute</code>为true或者在IOS中，alpha值是从北方到当前设备方向的角度值。\r\n\t */\r\n\talpha: number;\r\n\r\n\t/**\r\n\t * X轴旋转角度, 其值范围从-180至180。代表设备从前至后的运动。\r\n\t */\r\n\tbeta: number;\r\n\r\n\t/**\r\n\t * Y轴旋转角度，其值范围从-90至90。代表设备从左至右的运动。\r\n\t */\r\n\tgamma: number;\r\n\r\n\t/**\r\n\t * 罗盘数据的精确度（角度）。仅IOS可用。\r\n\t */\r\n\tcompassAccuracy: number;\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n}\r\n\r\n","import { AccelerationInfo } from \"./AccelerationInfo\";\r\nimport { RotationInfo } from \"./RotationInfo\";\r\nimport { EventDispatcher } from \"../../events/EventDispatcher\";\r\nimport { ILaya } from \"../../../ILaya\";\r\nimport { Event } from \"../../events/Event\";\r\n\r\n/**\r\n * Accelerator.instance获取唯一的Accelerator引用，请勿调用构造函数。\r\n *\r\n * <p>\r\n * listen()的回调处理器接受四个参数：\r\n * <ol>\r\n * <li><b>acceleration</b>: 表示用户给予设备的加速度。</li>\r\n * <li><b>accelerationIncludingGravity</b>: 设备受到的总加速度（包含重力）。</li>\r\n * <li><b>rotationRate</b>: 设备的自转速率。</li>\r\n * <li><b>interval</b>: 加速度获取的时间间隔（毫秒）。</li>\r\n * </ol>\r\n * </p>\r\n * <p>\r\n * <b>NOTE</b><br/>\r\n * 如，rotationRate的alpha在apple和moz文档中都是z轴旋转角度，但是实测是x轴旋转角度。为了使各属性表示的值与文档所述相同，实际值与其他属性进行了对调。\r\n * 其中：\r\n * <ul>\r\n * <li>alpha使用gamma值。</li>\r\n * <li>beta使用alpha值。</li>\r\n * <li>gamma使用beta。</li>\r\n * </ul>\r\n * 目前孰是孰非尚未可知，以此为注。\r\n * </p>\r\n */\r\nexport class Accelerator extends EventDispatcher {\r\n    /**\r\n     * Accelerator的唯一引用。\r\n     */\r\n    private static _instance: Accelerator;\r\n\r\n    static get instance(): Accelerator {\r\n        Accelerator._instance = Accelerator._instance || new Accelerator()\r\n        return Accelerator._instance;\r\n    }\r\n\r\n    private static acceleration: AccelerationInfo = new AccelerationInfo();\r\n    private static accelerationIncludingGravity: AccelerationInfo = new AccelerationInfo();\r\n    private static rotationRate: RotationInfo = new RotationInfo();\r\n\r\n    constructor() {\r\n        super();\r\n        this.onDeviceOrientationChange = this.onDeviceOrientationChange.bind(this);\r\n    }\r\n    protected onStartListeningToType(type: string) {\r\n        if (type == Event.CHANGE)\r\n            ILaya.Browser.window.addEventListener('devicemotion', this.onDeviceOrientationChange);\r\n        return this;\r\n    }\r\n\r\n    private onDeviceOrientationChange(e: any): void {\r\n        var interval: number = e.interval;\r\n\r\n        Accelerator.acceleration.x = e.acceleration.x;\r\n        Accelerator.acceleration.y = e.acceleration.y;\r\n        Accelerator.acceleration.z = e.acceleration.z;\r\n\r\n        Accelerator.accelerationIncludingGravity.x = e.accelerationIncludingGravity.x;\r\n        Accelerator.accelerationIncludingGravity.y = e.accelerationIncludingGravity.y;\r\n        Accelerator.accelerationIncludingGravity.z = e.accelerationIncludingGravity.z;\r\n\r\n        Accelerator.rotationRate.alpha = e.rotationRate.gamma * -1;\r\n        Accelerator.rotationRate.beta = e.rotationRate.alpha * -1;\r\n        Accelerator.rotationRate.gamma = e.rotationRate.beta;\r\n\r\n        if (ILaya.Browser.onAndroid) {\r\n            if (ILaya.Browser.userAgent.indexOf(\"Chrome\") > -1) {\r\n                Accelerator.rotationRate.alpha *= 180 / Math.PI;\r\n                Accelerator.rotationRate.beta *= 180 / Math.PI;\r\n                Accelerator.rotationRate.gamma *= 180 / Math.PI;\r\n            }\r\n\r\n            Accelerator.acceleration.x *= -1;\r\n            Accelerator.accelerationIncludingGravity.x *= -1;\r\n        }\r\n        else if (ILaya.Browser.onIOS) {\r\n            Accelerator.acceleration.y *= -1;\r\n            Accelerator.acceleration.z *= -1;\r\n\r\n            Accelerator.accelerationIncludingGravity.y *= -1;\r\n            Accelerator.accelerationIncludingGravity.z *= -1;\r\n\r\n            interval *= 1000;\r\n        }\r\n        this.event(Event.CHANGE, [Accelerator.acceleration, Accelerator.accelerationIncludingGravity, Accelerator.rotationRate, interval]);\r\n    }\r\n\r\n    private static transformedAcceleration: AccelerationInfo;\r\n    /**\r\n     * 把加速度值转换为视觉上正确的加速度值。依赖于Browser.window.orientation，可能在部分低端机无效。\r\n     * @param\tacceleration\r\n     * @return\r\n     */\r\n    static getTransformedAcceleration(acceleration: AccelerationInfo): AccelerationInfo {\r\n        Accelerator.transformedAcceleration = Accelerator.transformedAcceleration || new AccelerationInfo();\r\n        Accelerator.transformedAcceleration.z = acceleration.z;\r\n\r\n        if (ILaya.Browser.window.orientation == 90) {\r\n            Accelerator.transformedAcceleration.x = acceleration.y;\r\n            Accelerator.transformedAcceleration.y = -acceleration.x;\r\n        }\r\n        else if (ILaya.Browser.window.orientation == -90) {\r\n            Accelerator.transformedAcceleration.x = -acceleration.y;\r\n            Accelerator.transformedAcceleration.y = acceleration.x;\r\n        }\r\n        else if (!ILaya.Browser.window.orientation) {\r\n            Accelerator.transformedAcceleration.x = acceleration.x;\r\n            Accelerator.transformedAcceleration.y = acceleration.y;\r\n        }\r\n        else if (ILaya.Browser.window.orientation == 180) {\r\n            Accelerator.transformedAcceleration.x = -acceleration.x;\r\n            Accelerator.transformedAcceleration.y = -acceleration.y;\r\n        }\r\n\r\n        var tx: number;\r\n        if (ILaya.stage.canvasDegree == -90) {\r\n            tx = Accelerator.transformedAcceleration.x;\r\n            Accelerator.transformedAcceleration.x = -Accelerator.transformedAcceleration.y;\r\n            Accelerator.transformedAcceleration.y = tx;\r\n        }\r\n        else if (ILaya.stage.canvasDegree == 90) {\r\n            tx = Accelerator.transformedAcceleration.x;\r\n            Accelerator.transformedAcceleration.x = Accelerator.transformedAcceleration.y;\r\n            Accelerator.transformedAcceleration.y = -tx;\r\n        }\r\n\r\n        return Accelerator.transformedAcceleration;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { AccelerationInfo } from \"./motion/AccelerationInfo\"\r\nimport { Accelerator } from \"./motion/Accelerator\"\r\nimport { RotationInfo } from \"./motion/RotationInfo\"\r\nimport { EventDispatcher } from \"../events/EventDispatcher\";\r\nimport { Handler } from \"../utils/Handler\";\r\nimport { Event } from \"../events/Event\";\r\nimport { ILaya } from \"../../ILaya\";\r\n\r\n\r\n/**\r\n * Shake只能在支持此操作的设备上有效。\r\n * \r\n */\r\nexport class Shake extends EventDispatcher {\r\n    private throushold: number;\r\n    private shakeInterval: number;\r\n    private callback: Handler;\r\n\r\n    private lastX: number;\r\n    private lastY: number;\r\n    private lastZ: number;\r\n\r\n    private lastMillSecond: number;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n\r\n    }\r\n\r\n    private static _instance: Shake;\r\n    static get instance(): Shake {\r\n        Shake._instance = Shake._instance || new Shake();\r\n        return Shake._instance;\r\n    }\r\n\r\n    /**\r\n     * 开始响应设备摇晃。\r\n     * @param\tthroushold\t响应的瞬时速度阈值，轻度摇晃的值约在5~10间。\r\n     * @param\ttimeout\t\t设备摇晃的响应间隔时间。\r\n     * @param\tcallback\t在设备摇晃触发时调用的处理器。\r\n     */\r\n    start(throushold: number, interval: number): void {\r\n        this.throushold = throushold;\r\n        this.shakeInterval = interval;\r\n\r\n        this.lastX = this.lastY = this.lastZ = NaN;\r\n\r\n        // 使用加速器监听设备运动。\r\n        Accelerator.instance.on(Event.CHANGE, this, this.onShake);\r\n    }\r\n\r\n    /**\r\n     * 停止响应设备摇晃。\r\n     */\r\n    stop(): void {\r\n        Accelerator.instance.off(Event.CHANGE, this, this.onShake);\r\n    }\r\n\r\n    private onShake(acceleration: AccelerationInfo, accelerationIncludingGravity: AccelerationInfo, rotationRate: RotationInfo, interval: number): void {\r\n        // 设定摇晃的初始状态。\r\n        if (isNaN(this.lastX)) {\r\n            this.lastX = accelerationIncludingGravity.x;\r\n            this.lastY = accelerationIncludingGravity.y;\r\n            this.lastZ = accelerationIncludingGravity.z;\r\n\r\n            this.lastMillSecond = ILaya.Browser.now();\r\n            return;\r\n        }\r\n\r\n        // 速度增量计算。\r\n        var deltaX: number = Math.abs(this.lastX - accelerationIncludingGravity.x);\r\n        var deltaY: number = Math.abs(this.lastY - accelerationIncludingGravity.y);\r\n        var deltaZ: number = Math.abs(this.lastZ - accelerationIncludingGravity.z);\r\n\r\n        // 是否满足摇晃选项。\r\n        if (this.isShaked(deltaX, deltaY, deltaZ)) {\r\n            var deltaMillSecond: number = ILaya.Browser.now() - this.lastMillSecond;\r\n\r\n            // 按照设定间隔触发摇晃。\r\n            if (deltaMillSecond > this.shakeInterval) {\r\n                this.event(Event.CHANGE);\r\n                this.lastMillSecond = ILaya.Browser.now();\r\n            }\r\n        }\r\n\r\n        this.lastX = accelerationIncludingGravity.x;\r\n        this.lastY = accelerationIncludingGravity.y;\r\n        this.lastZ = accelerationIncludingGravity.z;\r\n    }\r\n\r\n    // 通过任意两个分量判断是否满足摇晃设定。\r\n    private isShaked(deltaX: number, deltaY: number, deltaZ: number): boolean {\r\n        return (deltaX > this.throushold && deltaY > this.throushold) ||\r\n            (deltaX > this.throushold && deltaZ > this.throushold) ||\r\n            (deltaY > this.throushold && deltaZ > this.throushold)\r\n    }\r\n}\r\n\r\n","export class GeolocationInfo {\r\n\tprivate pos: any;\r\n\tprivate coords: any;\r\n\r\n\t/**\r\n\t * 设置设备经纬度\r\n\t * @param pos \r\n\t */\r\n\tsetPosition(pos: any): void {\r\n\t\tthis.pos = pos;\r\n\t\tthis.coords = pos.coords;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的纬度\r\n\t */\r\n\tget latitude(): number {\r\n\t\treturn this.coords.latitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的经度\r\n\t */\r\n\tget longitude(): number {\r\n\t\treturn this.coords.longitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的高度\r\n\t */\r\n\tget altitude(): number {\r\n\t\treturn this.coords.altitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的精度\r\n\t */\r\n\tget accuracy(): number {\r\n\t\treturn this.coords.accuracy;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的高度精度\r\n\t */\r\n\tget altitudeAccuracy(): number {\r\n\t\treturn this.coords.altitudeAccuracy;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前行进方向\r\n\t */\r\n\tget heading(): number {\r\n\t\treturn this.coords.heading;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前的速度\r\n\t */\r\n\tget speed(): number {\r\n\t\treturn this.coords.speed;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备得到当前位置的时间\r\n\t */\r\n\tget timestamp(): number {\r\n\t\treturn this.pos.timestamp;\r\n\t}\r\n}\r\n\r\n","import { GeolocationInfo } from \"./GeolocationInfo\";\r\nimport { Handler } from \"../../utils/Handler\";\r\n\r\n\r\n/**\r\n * 使用前可用<code>supported</code>查看浏览器支持。\r\n */\r\nexport class Geolocation {\r\n    private static navigator = navigator;\r\n    private static position: GeolocationInfo = new GeolocationInfo();\r\n\r\n    /**\r\n     * 由于权限被拒绝造成的地理信息获取失败。\r\n     */\r\n    static PERMISSION_DENIED: number = 1;\r\n    /**\r\n     * 由于内部位置源返回了内部错误导致地理信息获取失败。\r\n     */\r\n    static POSITION_UNAVAILABLE: number = 2;\r\n    /**\r\n     * 信息获取所用时长超出<code>timeout</code>所设置时长。\r\n     */\r\n    static TIMEOUT: number = 3;\r\n\r\n    /**\r\n     * 是否支持。\r\n     */\r\n    static supported: boolean = !!Geolocation.navigator.geolocation;\r\n\r\n    /**\r\n     * 如果<code>enableHighAccuracy</code>为true，并且设备能够提供一个更精确的位置，则会获取最佳可能的结果。\r\n     * 请注意,这可能会导致较慢的响应时间或增加电量消耗（如使用GPS）。\r\n     * 另一方面，如果设置为false，将会得到更快速的响应和更少的电量消耗。\r\n     * 默认值为false。\r\n     */\r\n    static enableHighAccuracy: boolean = false;\r\n    /**\r\n     * 表示允许设备获取位置的最长时间。默认为Infinity，意味着getCurentPosition()直到位置可用时才会返回信息。\r\n     */\r\n\r\n    static timeout: number = 1E10;\r\n    /**\r\n     * 表示可被返回的缓存位置信息的最大时限。\r\n     * 如果设置为0，意味着设备不使用缓存位置，并且尝试获取实时位置。\r\n     * 如果设置为Infinity，设备必须返回缓存位置而无论其时限。\r\n     */\r\n    static maximumAge: number = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * 获取设备当前位置。\r\n     * @param\tonSuccess\t带有唯一<code>Position</code>参数的回调处理器。\r\n     * @param\tonError\t\t可选的。带有错误信息的回调处理器。错误代码为Geolocation.PERMISSION_DENIED、Geolocation.POSITION_UNAVAILABLE和Geolocation.TIMEOUT之一。\r\n     */\r\n    static getCurrentPosition(onSuccess: Handler, onError: Handler = null): void {\r\n        Geolocation.navigator.geolocation.getCurrentPosition(function (pos: any): void {\r\n            Geolocation.position.setPosition(pos);\r\n            onSuccess.runWith(Geolocation.position);\r\n        },\r\n            function (error: any): void {\r\n                onError.runWith(error);\r\n            },\r\n            {\r\n                enableHighAccuracy: Geolocation.enableHighAccuracy,\r\n                timeout: Geolocation.timeout,\r\n                maximumAge: Geolocation.maximumAge\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 监视设备当前位置。回调处理器在设备位置改变时被执行。\r\n     * @param\tonSuccess\t带有唯一<code>Position</code>参数的回调处理器。\r\n     * @param\tonError\t\t可选的。带有错误信息的回调处理器。错误代码为Geolocation.PERMISSION_DENIED、Geolocation.POSITION_UNAVAILABLE和Geolocation.TIMEOUT之一。\r\n     */\r\n    static watchPosition(onSuccess: Handler, onError: Handler): number {\r\n        return Geolocation.navigator.geolocation.watchPosition(function (pos: any): void {\r\n            Geolocation.position.setPosition(pos);\r\n            onSuccess.runWith(Geolocation.position);\r\n        },\r\n            function (error: any): void {\r\n                onError.runWith(error);\r\n            },\r\n            {\r\n                enableHighAccuracy: Geolocation.enableHighAccuracy,\r\n                timeout: Geolocation.timeout,\r\n                maximumAge: Geolocation.maximumAge\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 移除<code>watchPosition</code>安装的指定处理器。\r\n     * @param\tid\r\n     */\r\n    static clearWatch(id: number): void {\r\n        Geolocation.navigator.geolocation.clearWatch(id);\r\n    }\r\n}\r\n\r\n","import { ILaya } from \"../../../ILaya\";\r\nimport { Handler } from \"../../utils/Handler\";\r\n\r\n\r\n/**\r\n * Media用于捕捉摄像头和麦克风。可以捕捉任意之一，或者同时捕捉两者。<code>getCamera</code>前可以使用<code>supported()</code>检查当前浏览器是否支持。\r\n * <b>NOTE:</b>\r\n * <p>目前Media在移动平台只支持Android，不支持IOS。只可在FireFox完整地使用，Chrome测试时无法捕捉视频。</p>\r\n */\r\nexport class Media {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 检查浏览器兼容性。\r\n     */\r\n    static supported(): boolean {\r\n        return !!ILaya.Browser.window.navigator.getUserMedia;\r\n    }\r\n\r\n    /**\r\n     * 获取用户媒体。\r\n     * @param\toptions\t简单的可选项可以使<code>{ audio:true, video:true }</code>表示同时捕捉两者。详情见<i>https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia</i>。\r\n     * @param\tonSuccess 获取成功的处理器，唯一参数返回媒体的Blob地址，可以将其传给Video。\r\n     * @param\tonError\t获取失败的处理器，唯一参数是Error。\r\n     */\r\n    static getMedia(options: any, onSuccess: Handler, onError: Handler): void {\r\n        if (ILaya.Browser.window.navigator.getUserMedia) {\r\n            ILaya.Browser.window.navigator.getUserMedia(options, function (stream: string): void {\r\n                onSuccess.runWith(ILaya.Browser.window.URL.createObjectURL(stream));\r\n            }, function (err: Error): void {\r\n                    onError.runWith(err);\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\n","import { RotationInfo } from \"./RotationInfo\";\r\nimport { Event } from \"../../events/Event\";\r\nimport { EventDispatcher } from \"../../events/EventDispatcher\";\r\nimport { ILaya } from \"../../../ILaya\";\r\n\r\n/**\r\n * 使用Gyroscope.instance获取唯一的Gyroscope引用，请勿调用构造函数。\r\n * \r\n * <p>\r\n * listen()的回调处理器接受两个参数：\r\n * <code>function onOrientationChange(absolute:Boolean, info:RotationInfo):void</code>\r\n * <ol>\r\n * <li><b>absolute</b>: 指示设备是否可以提供绝对方位数据（指向地球坐标系），或者设备决定的任意坐标系。关于坐标系参见<i>https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Orientation_and_motion_data_explained</i>。</li>\r\n * <li><b>info</b>: <code>RotationInfo</code>类型参数，保存设备的旋转值。</li>\r\n * </ol>\r\n * </p>\r\n * \r\n * <p>\r\n * 浏览器兼容性参见：<i>http://caniuse.com/#search=deviceorientation</i>\r\n * </p>\r\n */\r\nexport class Gyroscope extends EventDispatcher {\r\n    private static info: RotationInfo = new RotationInfo();\r\n\r\n    /**\r\n     * Gyroscope的唯一引用。\r\n     */\r\n    private static _instance: Gyroscope;\r\n    \r\n    /**\r\n     * 获得默认值\r\n     */\r\n    static get instance(): Gyroscope {\r\n        Gyroscope._instance = Gyroscope._instance || new Gyroscope(0);\r\n        return Gyroscope._instance;\r\n    }\r\n\r\n    /**\r\n     * 实例化一个Gyroscope\r\n     * @param singleton \r\n     */\r\n    constructor(singleton: number) {\r\n        super();\r\n        this.onDeviceOrientationChange = this.onDeviceOrientationChange.bind(this);\r\n    }\r\n\r\n    protected onStartListeningToType(type: string) {\r\n        if (type == Event.CHANGE)\r\n            ILaya.Browser.window.addEventListener('deviceorientation', this.onDeviceOrientationChange);\r\n        return this;\r\n    }\r\n\r\n    private onDeviceOrientationChange(e: any): void {\r\n        Gyroscope.info.alpha = e.alpha;\r\n        Gyroscope.info.beta = e.beta;\r\n        Gyroscope.info.gamma = e.gamma;\r\n\r\n        // 在Safari中\r\n        if (e.webkitCompassHeading) {\r\n            Gyroscope.info.alpha = e.webkitCompassHeading * -1;\r\n            Gyroscope.info.compassAccuracy = e.webkitCompassAccuracy;\r\n        }\r\n\r\n        this.event(Event.CHANGE, [e.absolute, Gyroscope.info]);\r\n    }\r\n}\r\n\r\n"],"names":["EventDispatcher","Event","ILaya"],"mappings":"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"}