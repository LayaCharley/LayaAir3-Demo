{"version":3,"names":["AccelerationInfo","constructor","RotationInfo","Accelerator","EventDispatcher","super","this","onDeviceOrientationChange","bind","instance","_instance","onStartListeningToType","type","Event","CHANGE","ILaya","Browser","window","addEventListener","e","interval","acceleration","x","y","z","accelerationIncludingGravity","rotationRate","alpha","gamma","beta","onAndroid","userAgent","indexOf","Math","PI","onIOS","event","static","tx","transformedAcceleration","orientation","stage","canvasDegree","Shake","start","throushold","shakeInterval","lastX","lastY","lastZ","NaN","on","onShake","stop","off","isNaN","lastMillSecond","now","deltaX","abs","deltaY","deltaZ","isShaked","GeolocationInfo","setPosition","pos","coords","latitude","longitude","altitude","accuracy","altitudeAccuracy","heading","speed","timestamp","Geolocation","onSuccess","onError","navigator","geolocation","getCurrentPosition","position","runWith","error","enableHighAccuracy","timeout","maximumAge","watchPosition","id","clearWatch","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","supported","Gyroscope","singleton","info","webkitCompassHeading","compassAccuracy","webkitCompassAccuracy","absolute","getUserMedia","options","stream","URL","createObjectURL","err"],"sources":["../../src/layaAir/laya/device/motion/AccelerationInfo.ts","../../src/layaAir/laya/device/motion/RotationInfo.ts","../../src/layaAir/laya/device/motion/Accelerator.ts","../../src/layaAir/laya/device/Shake.ts","../../src/layaAir/laya/device/geolocation/GeolocationInfo.ts","../../src/layaAir/laya/device/geolocation/Geolocation.ts","../../src/layaAir/laya/device/motion/Gyroscope.ts","../../src/layaAir/laya/device/media/Media.ts"],"sourcesContent":["/**\r\n\t * 加速度x/y/z的单位均为m/s²。\r\n\t * 在硬件（陀螺仪）不支持的情况下，alpha、beta和gamma值为null。\r\n\t * \r\n\t * @author Survivor\r\n\t */\r\nexport class AccelerationInfo {\r\n\t/**\r\n\t * x轴上的加速度值。\r\n\t */\r\n\tx: number;\r\n\t/**\r\n\t * y轴上的加速度值。\r\n\t */\r\n\ty: number;\r\n\t/**\r\n\t * z轴上的加速度值。\r\n\t */\r\n\tz: number;\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n}\r\n\r\n","/**\r\n\t * 保存旋转信息的类。请勿修改本类的属性。\r\n\t * @author Survivor\r\n\t */\r\nexport class RotationInfo {\r\n\t/**\r\n\t * <p>\r\n\t * 指示设备是否可以提供绝对方位数据（指向地球坐标系），或者设备决定的任意坐标系。\r\n\t * 关于坐标系参见<i>https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Orientation_and_motion_data_explained</i>。\r\n\t * </p>\r\n\t * 需要注意的是，IOS环境下，该值始终为false。即使如此，你依旧可以从<code>alpha</code>中取得正确的值。\r\n\t */\r\n\tabsolute: boolean;\r\n\r\n\t/**\r\n\t * Z轴旋转角度，其值范围从0至360。\r\n\t * 若<code>absolute</code>为true或者在IOS中，alpha值是从北方到当前设备方向的角度值。\r\n\t */\r\n\talpha: number;\r\n\r\n\t/**\r\n\t * X轴旋转角度, 其值范围从-180至180。代表设备从前至后的运动。\r\n\t */\r\n\tbeta: number;\r\n\r\n\t/**\r\n\t * Y轴旋转角度，其值范围从-90至90。代表设备从左至右的运动。\r\n\t */\r\n\tgamma: number;\r\n\r\n\t/**\r\n\t * 罗盘数据的精确度（角度）。仅IOS可用。\r\n\t */\r\n\tcompassAccuracy: number;\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n}\r\n\r\n","import { AccelerationInfo } from \"./AccelerationInfo\";\r\nimport { RotationInfo } from \"./RotationInfo\";\r\nimport { EventDispatcher } from \"../../events/EventDispatcher\";\r\nimport { ILaya } from \"../../../ILaya\";\r\nimport { Event } from \"../../events/Event\";\r\n\r\n/**\r\n * Accelerator.instance获取唯一的Accelerator引用，请勿调用构造函数。\r\n *\r\n * <p>\r\n * listen()的回调处理器接受四个参数：\r\n * <ol>\r\n * <li><b>acceleration</b>: 表示用户给予设备的加速度。</li>\r\n * <li><b>accelerationIncludingGravity</b>: 设备受到的总加速度（包含重力）。</li>\r\n * <li><b>rotationRate</b>: 设备的自转速率。</li>\r\n * <li><b>interval</b>: 加速度获取的时间间隔（毫秒）。</li>\r\n * </ol>\r\n * </p>\r\n * <p>\r\n * <b>NOTE</b><br/>\r\n * 如，rotationRate的alpha在apple和moz文档中都是z轴旋转角度，但是实测是x轴旋转角度。为了使各属性表示的值与文档所述相同，实际值与其他属性进行了对调。\r\n * 其中：\r\n * <ul>\r\n * <li>alpha使用gamma值。</li>\r\n * <li>beta使用alpha值。</li>\r\n * <li>gamma使用beta。</li>\r\n * </ul>\r\n * 目前孰是孰非尚未可知，以此为注。\r\n * </p>\r\n */\r\nexport class Accelerator extends EventDispatcher {\r\n    /**\r\n     * Accelerator的唯一引用。\r\n     */\r\n    private static _instance: Accelerator;\r\n\r\n    static get instance(): Accelerator {\r\n        Accelerator._instance = Accelerator._instance || new Accelerator()\r\n        return Accelerator._instance;\r\n    }\r\n\r\n    private static acceleration: AccelerationInfo = new AccelerationInfo();\r\n    private static accelerationIncludingGravity: AccelerationInfo = new AccelerationInfo();\r\n    private static rotationRate: RotationInfo = new RotationInfo();\r\n\r\n    constructor() {\r\n        super();\r\n        this.onDeviceOrientationChange = this.onDeviceOrientationChange.bind(this);\r\n    }\r\n    protected onStartListeningToType(type: string) {\r\n        if (type == Event.CHANGE)\r\n            ILaya.Browser.window.addEventListener('devicemotion', this.onDeviceOrientationChange);\r\n        return this;\r\n    }\r\n\r\n    private onDeviceOrientationChange(e: any): void {\r\n        var interval: number = e.interval;\r\n\r\n        Accelerator.acceleration.x = e.acceleration.x;\r\n        Accelerator.acceleration.y = e.acceleration.y;\r\n        Accelerator.acceleration.z = e.acceleration.z;\r\n\r\n        Accelerator.accelerationIncludingGravity.x = e.accelerationIncludingGravity.x;\r\n        Accelerator.accelerationIncludingGravity.y = e.accelerationIncludingGravity.y;\r\n        Accelerator.accelerationIncludingGravity.z = e.accelerationIncludingGravity.z;\r\n\r\n        Accelerator.rotationRate.alpha = e.rotationRate.gamma * -1;\r\n        Accelerator.rotationRate.beta = e.rotationRate.alpha * -1;\r\n        Accelerator.rotationRate.gamma = e.rotationRate.beta;\r\n\r\n        if (ILaya.Browser.onAndroid) {\r\n            if (ILaya.Browser.userAgent.indexOf(\"Chrome\") > -1) {\r\n                Accelerator.rotationRate.alpha *= 180 / Math.PI;\r\n                Accelerator.rotationRate.beta *= 180 / Math.PI;\r\n                Accelerator.rotationRate.gamma *= 180 / Math.PI;\r\n            }\r\n\r\n            Accelerator.acceleration.x *= -1;\r\n            Accelerator.accelerationIncludingGravity.x *= -1;\r\n        }\r\n        else if (ILaya.Browser.onIOS) {\r\n            Accelerator.acceleration.y *= -1;\r\n            Accelerator.acceleration.z *= -1;\r\n\r\n            Accelerator.accelerationIncludingGravity.y *= -1;\r\n            Accelerator.accelerationIncludingGravity.z *= -1;\r\n\r\n            interval *= 1000;\r\n        }\r\n        this.event(Event.CHANGE, [Accelerator.acceleration, Accelerator.accelerationIncludingGravity, Accelerator.rotationRate, interval]);\r\n    }\r\n\r\n    private static transformedAcceleration: AccelerationInfo;\r\n    /**\r\n     * 把加速度值转换为视觉上正确的加速度值。依赖于Browser.window.orientation，可能在部分低端机无效。\r\n     * @param\tacceleration\r\n     * @return\r\n     */\r\n    static getTransformedAcceleration(acceleration: AccelerationInfo): AccelerationInfo {\r\n        Accelerator.transformedAcceleration = Accelerator.transformedAcceleration || new AccelerationInfo();\r\n        Accelerator.transformedAcceleration.z = acceleration.z;\r\n\r\n        if (ILaya.Browser.window.orientation == 90) {\r\n            Accelerator.transformedAcceleration.x = acceleration.y;\r\n            Accelerator.transformedAcceleration.y = -acceleration.x;\r\n        }\r\n        else if (ILaya.Browser.window.orientation == -90) {\r\n            Accelerator.transformedAcceleration.x = -acceleration.y;\r\n            Accelerator.transformedAcceleration.y = acceleration.x;\r\n        }\r\n        else if (!ILaya.Browser.window.orientation) {\r\n            Accelerator.transformedAcceleration.x = acceleration.x;\r\n            Accelerator.transformedAcceleration.y = acceleration.y;\r\n        }\r\n        else if (ILaya.Browser.window.orientation == 180) {\r\n            Accelerator.transformedAcceleration.x = -acceleration.x;\r\n            Accelerator.transformedAcceleration.y = -acceleration.y;\r\n        }\r\n\r\n        var tx: number;\r\n        if (ILaya.stage.canvasDegree == -90) {\r\n            tx = Accelerator.transformedAcceleration.x;\r\n            Accelerator.transformedAcceleration.x = -Accelerator.transformedAcceleration.y;\r\n            Accelerator.transformedAcceleration.y = tx;\r\n        }\r\n        else if (ILaya.stage.canvasDegree == 90) {\r\n            tx = Accelerator.transformedAcceleration.x;\r\n            Accelerator.transformedAcceleration.x = Accelerator.transformedAcceleration.y;\r\n            Accelerator.transformedAcceleration.y = -tx;\r\n        }\r\n\r\n        return Accelerator.transformedAcceleration;\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { AccelerationInfo } from \"./motion/AccelerationInfo\"\r\nimport { Accelerator } from \"./motion/Accelerator\"\r\nimport { RotationInfo } from \"./motion/RotationInfo\"\r\nimport { EventDispatcher } from \"../events/EventDispatcher\";\r\nimport { Handler } from \"../utils/Handler\";\r\nimport { Event } from \"../events/Event\";\r\nimport { ILaya } from \"../../ILaya\";\r\n\r\n\r\n/**\r\n * Shake只能在支持此操作的设备上有效。\r\n * \r\n */\r\nexport class Shake extends EventDispatcher {\r\n    private throushold: number;\r\n    private shakeInterval: number;\r\n    private callback: Handler;\r\n\r\n    private lastX: number;\r\n    private lastY: number;\r\n    private lastZ: number;\r\n\r\n    private lastMillSecond: number;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n\r\n    }\r\n\r\n    private static _instance: Shake;\r\n    static get instance(): Shake {\r\n        Shake._instance = Shake._instance || new Shake();\r\n        return Shake._instance;\r\n    }\r\n\r\n    /**\r\n     * 开始响应设备摇晃。\r\n     * @param\tthroushold\t响应的瞬时速度阈值，轻度摇晃的值约在5~10间。\r\n     * @param\ttimeout\t\t设备摇晃的响应间隔时间。\r\n     * @param\tcallback\t在设备摇晃触发时调用的处理器。\r\n     */\r\n    start(throushold: number, interval: number): void {\r\n        this.throushold = throushold;\r\n        this.shakeInterval = interval;\r\n\r\n        this.lastX = this.lastY = this.lastZ = NaN;\r\n\r\n        // 使用加速器监听设备运动。\r\n        Accelerator.instance.on(Event.CHANGE, this, this.onShake);\r\n    }\r\n\r\n    /**\r\n     * 停止响应设备摇晃。\r\n     */\r\n    stop(): void {\r\n        Accelerator.instance.off(Event.CHANGE, this, this.onShake);\r\n    }\r\n\r\n    private onShake(acceleration: AccelerationInfo, accelerationIncludingGravity: AccelerationInfo, rotationRate: RotationInfo, interval: number): void {\r\n        // 设定摇晃的初始状态。\r\n        if (isNaN(this.lastX)) {\r\n            this.lastX = accelerationIncludingGravity.x;\r\n            this.lastY = accelerationIncludingGravity.y;\r\n            this.lastZ = accelerationIncludingGravity.z;\r\n\r\n            this.lastMillSecond = ILaya.Browser.now();\r\n            return;\r\n        }\r\n\r\n        // 速度增量计算。\r\n        var deltaX: number = Math.abs(this.lastX - accelerationIncludingGravity.x);\r\n        var deltaY: number = Math.abs(this.lastY - accelerationIncludingGravity.y);\r\n        var deltaZ: number = Math.abs(this.lastZ - accelerationIncludingGravity.z);\r\n\r\n        // 是否满足摇晃选项。\r\n        if (this.isShaked(deltaX, deltaY, deltaZ)) {\r\n            var deltaMillSecond: number = ILaya.Browser.now() - this.lastMillSecond;\r\n\r\n            // 按照设定间隔触发摇晃。\r\n            if (deltaMillSecond > this.shakeInterval) {\r\n                this.event(Event.CHANGE);\r\n                this.lastMillSecond = ILaya.Browser.now();\r\n            }\r\n        }\r\n\r\n        this.lastX = accelerationIncludingGravity.x;\r\n        this.lastY = accelerationIncludingGravity.y;\r\n        this.lastZ = accelerationIncludingGravity.z;\r\n    }\r\n\r\n    // 通过任意两个分量判断是否满足摇晃设定。\r\n    private isShaked(deltaX: number, deltaY: number, deltaZ: number): boolean {\r\n        return (deltaX > this.throushold && deltaY > this.throushold) ||\r\n            (deltaX > this.throushold && deltaZ > this.throushold) ||\r\n            (deltaY > this.throushold && deltaZ > this.throushold)\r\n    }\r\n}\r\n\r\n","export class GeolocationInfo {\r\n\tprivate pos: any;\r\n\tprivate coords: any;\r\n\r\n\t/**\r\n\t * 设置设备经纬度\r\n\t * @param pos \r\n\t */\r\n\tsetPosition(pos: any): void {\r\n\t\tthis.pos = pos;\r\n\t\tthis.coords = pos.coords;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的纬度\r\n\t */\r\n\tget latitude(): number {\r\n\t\treturn this.coords.latitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的经度\r\n\t */\r\n\tget longitude(): number {\r\n\t\treturn this.coords.longitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的高度\r\n\t */\r\n\tget altitude(): number {\r\n\t\treturn this.coords.altitude;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的精度\r\n\t */\r\n\tget accuracy(): number {\r\n\t\treturn this.coords.accuracy;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前地理坐标的高度精度\r\n\t */\r\n\tget altitudeAccuracy(): number {\r\n\t\treturn this.coords.altitudeAccuracy;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前行进方向\r\n\t */\r\n\tget heading(): number {\r\n\t\treturn this.coords.heading;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备当前的速度\r\n\t */\r\n\tget speed(): number {\r\n\t\treturn this.coords.speed;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取设备得到当前位置的时间\r\n\t */\r\n\tget timestamp(): number {\r\n\t\treturn this.pos.timestamp;\r\n\t}\r\n}\r\n\r\n","import { GeolocationInfo } from \"./GeolocationInfo\";\r\nimport { Handler } from \"../../utils/Handler\";\r\n\r\n\r\n/**\r\n * 使用前可用<code>supported</code>查看浏览器支持。\r\n */\r\nexport class Geolocation {\r\n    private static navigator = navigator;\r\n    private static position: GeolocationInfo = new GeolocationInfo();\r\n\r\n    /**\r\n     * 由于权限被拒绝造成的地理信息获取失败。\r\n     */\r\n    static PERMISSION_DENIED: number = 1;\r\n    /**\r\n     * 由于内部位置源返回了内部错误导致地理信息获取失败。\r\n     */\r\n    static POSITION_UNAVAILABLE: number = 2;\r\n    /**\r\n     * 信息获取所用时长超出<code>timeout</code>所设置时长。\r\n     */\r\n    static TIMEOUT: number = 3;\r\n\r\n    /**\r\n     * 是否支持。\r\n     */\r\n    static supported: boolean = !!Geolocation.navigator.geolocation;\r\n\r\n    /**\r\n     * 如果<code>enableHighAccuracy</code>为true，并且设备能够提供一个更精确的位置，则会获取最佳可能的结果。\r\n     * 请注意,这可能会导致较慢的响应时间或增加电量消耗（如使用GPS）。\r\n     * 另一方面，如果设置为false，将会得到更快速的响应和更少的电量消耗。\r\n     * 默认值为false。\r\n     */\r\n    static enableHighAccuracy: boolean = false;\r\n    /**\r\n     * 表示允许设备获取位置的最长时间。默认为Infinity，意味着getCurentPosition()直到位置可用时才会返回信息。\r\n     */\r\n\r\n    static timeout: number = 1E10;\r\n    /**\r\n     * 表示可被返回的缓存位置信息的最大时限。\r\n     * 如果设置为0，意味着设备不使用缓存位置，并且尝试获取实时位置。\r\n     * 如果设置为Infinity，设备必须返回缓存位置而无论其时限。\r\n     */\r\n    static maximumAge: number = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * 获取设备当前位置。\r\n     * @param\tonSuccess\t带有唯一<code>Position</code>参数的回调处理器。\r\n     * @param\tonError\t\t可选的。带有错误信息的回调处理器。错误代码为Geolocation.PERMISSION_DENIED、Geolocation.POSITION_UNAVAILABLE和Geolocation.TIMEOUT之一。\r\n     */\r\n    static getCurrentPosition(onSuccess: Handler, onError: Handler = null): void {\r\n        Geolocation.navigator.geolocation.getCurrentPosition(function (pos: any): void {\r\n            Geolocation.position.setPosition(pos);\r\n            onSuccess.runWith(Geolocation.position);\r\n        },\r\n            function (error: any): void {\r\n                onError.runWith(error);\r\n            },\r\n            {\r\n                enableHighAccuracy: Geolocation.enableHighAccuracy,\r\n                timeout: Geolocation.timeout,\r\n                maximumAge: Geolocation.maximumAge\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 监视设备当前位置。回调处理器在设备位置改变时被执行。\r\n     * @param\tonSuccess\t带有唯一<code>Position</code>参数的回调处理器。\r\n     * @param\tonError\t\t可选的。带有错误信息的回调处理器。错误代码为Geolocation.PERMISSION_DENIED、Geolocation.POSITION_UNAVAILABLE和Geolocation.TIMEOUT之一。\r\n     */\r\n    static watchPosition(onSuccess: Handler, onError: Handler): number {\r\n        return Geolocation.navigator.geolocation.watchPosition(function (pos: any): void {\r\n            Geolocation.position.setPosition(pos);\r\n            onSuccess.runWith(Geolocation.position);\r\n        },\r\n            function (error: any): void {\r\n                onError.runWith(error);\r\n            },\r\n            {\r\n                enableHighAccuracy: Geolocation.enableHighAccuracy,\r\n                timeout: Geolocation.timeout,\r\n                maximumAge: Geolocation.maximumAge\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 移除<code>watchPosition</code>安装的指定处理器。\r\n     * @param\tid\r\n     */\r\n    static clearWatch(id: number): void {\r\n        Geolocation.navigator.geolocation.clearWatch(id);\r\n    }\r\n}\r\n\r\n","import { RotationInfo } from \"./RotationInfo\";\r\nimport { Event } from \"../../events/Event\";\r\nimport { EventDispatcher } from \"../../events/EventDispatcher\";\r\nimport { ILaya } from \"../../../ILaya\";\r\n\r\n/**\r\n * 使用Gyroscope.instance获取唯一的Gyroscope引用，请勿调用构造函数。\r\n * \r\n * <p>\r\n * listen()的回调处理器接受两个参数：\r\n * <code>function onOrientationChange(absolute:Boolean, info:RotationInfo):void</code>\r\n * <ol>\r\n * <li><b>absolute</b>: 指示设备是否可以提供绝对方位数据（指向地球坐标系），或者设备决定的任意坐标系。关于坐标系参见<i>https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Orientation_and_motion_data_explained</i>。</li>\r\n * <li><b>info</b>: <code>RotationInfo</code>类型参数，保存设备的旋转值。</li>\r\n * </ol>\r\n * </p>\r\n * \r\n * <p>\r\n * 浏览器兼容性参见：<i>http://caniuse.com/#search=deviceorientation</i>\r\n * </p>\r\n */\r\nexport class Gyroscope extends EventDispatcher {\r\n    private static info: RotationInfo = new RotationInfo();\r\n\r\n    /**\r\n     * Gyroscope的唯一引用。\r\n     */\r\n    private static _instance: Gyroscope;\r\n    \r\n    /**\r\n     * 获得默认值\r\n     */\r\n    static get instance(): Gyroscope {\r\n        Gyroscope._instance = Gyroscope._instance || new Gyroscope(0);\r\n        return Gyroscope._instance;\r\n    }\r\n\r\n    /**\r\n     * 实例化一个Gyroscope\r\n     * @param singleton \r\n     */\r\n    constructor(singleton: number) {\r\n        super();\r\n        this.onDeviceOrientationChange = this.onDeviceOrientationChange.bind(this);\r\n    }\r\n\r\n    protected onStartListeningToType(type: string) {\r\n        if (type == Event.CHANGE)\r\n            ILaya.Browser.window.addEventListener('deviceorientation', this.onDeviceOrientationChange);\r\n        return this;\r\n    }\r\n\r\n    private onDeviceOrientationChange(e: any): void {\r\n        Gyroscope.info.alpha = e.alpha;\r\n        Gyroscope.info.beta = e.beta;\r\n        Gyroscope.info.gamma = e.gamma;\r\n\r\n        // 在Safari中\r\n        if (e.webkitCompassHeading) {\r\n            Gyroscope.info.alpha = e.webkitCompassHeading * -1;\r\n            Gyroscope.info.compassAccuracy = e.webkitCompassAccuracy;\r\n        }\r\n\r\n        this.event(Event.CHANGE, [e.absolute, Gyroscope.info]);\r\n    }\r\n}\r\n\r\n","import { ILaya } from \"../../../ILaya\";\r\nimport { Handler } from \"../../utils/Handler\";\r\n\r\n\r\n/**\r\n * Media用于捕捉摄像头和麦克风。可以捕捉任意之一，或者同时捕捉两者。<code>getCamera</code>前可以使用<code>supported()</code>检查当前浏览器是否支持。\r\n * <b>NOTE:</b>\r\n * <p>目前Media在移动平台只支持Android，不支持IOS。只可在FireFox完整地使用，Chrome测试时无法捕捉视频。</p>\r\n */\r\nexport class Media {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 检查浏览器兼容性。\r\n     */\r\n    static supported(): boolean {\r\n        return !!ILaya.Browser.window.navigator.getUserMedia;\r\n    }\r\n\r\n    /**\r\n     * 获取用户媒体。\r\n     * @param\toptions\t简单的可选项可以使<code>{ audio:true, video:true }</code>表示同时捕捉两者。详情见<i>https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia</i>。\r\n     * @param\tonSuccess 获取成功的处理器，唯一参数返回媒体的Blob地址，可以将其传给Video。\r\n     * @param\tonError\t获取失败的处理器，唯一参数是Error。\r\n     */\r\n    static getMedia(options: any, onSuccess: Handler, onError: Handler): void {\r\n        if (ILaya.Browser.window.navigator.getUserMedia) {\r\n            ILaya.Browser.window.navigator.getUserMedia(options, function (stream: string): void {\r\n                onSuccess.runWith(ILaya.Browser.window.URL.createObjectURL(stream));\r\n            }, function (err: Error): void {\r\n                    onError.runWith(err);\r\n                });\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":"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"}