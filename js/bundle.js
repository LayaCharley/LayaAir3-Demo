"use strict";(()=>{var du=Object.defineProperty;var cu=Object.getOwnPropertyDescriptor;var o=(p,s,e,t)=>{for(var a=t>1?void 0:t?cu(s,e):s,i=p.length-1,r;i>=0;i--)(r=p[i])&&(a=(t?r(s,e,a):r(a))||a);return t&&a&&du(s,e,a),a};var G=Laya.Stat,{regClass:mu,property:k}=Laya,y=class extends Laya.Script{constructor(){super(...arguments);this.index_2d=0;this.index_3d=0;this.show_2d=!0;this.show_3d=!0;this._titleCellSize=30;this._contentCellSize=24;this._totalTitleHeight1=0;this._totalTitleHeight2=0;this._contentSelectedIndexArr1=new Array;this._contentSelectedIndexArr2=new Array;this._cur2D3D=!0;this.titleIndex=0;this.contentIndex=0;this.category="null";this.group=0;this.contentName=0;this._statPos=null}onResize(){if(console.log("Browser.clientWidth:"+Laya.Browser.clientWidth+"  Laya.stage.designWidth:"+Laya.stage.designWidth),console.log("Browser.clientHeight:"+Laya.Browser.clientHeight+"  Laya.stage.designHeight:"+Laya.stage.designHeight),console.log("Browser.pixelRatio:"+Laya.Browser.pixelRatio),Laya.Browser.clientWidth>Laya.Browser.clientHeight){y.isLandscape=!0,this.codeButton.visible=!0,this.qrcodeButton.visible=!0;let e=Laya.stage.designHeight,t=Laya.stage.designHeight*Laya.Browser.clientWidth/Laya.Browser.clientHeight;y.screenWidth=t,y.screenHeight=e,console.log("onResize >>","[screenWidth:"+t+"] [screenHeight:"+e+"]"),t>1440&&(t=1440),this.rightImage.width=t-250-40,this.desc.width=this.rightImage.width,console.log("this.rightImage.width:"+this.rightImage.width),this.rightImage.width<1138?(this.pageImage.width=this.rightImage.width,this.page.width=this.pageImage.width-14,this.page.height=this.page.width*y.pageHeight/y.pageWidth):(this.pageImage.width=1138,this.page.width=this.pageImage.width-14,this.page.height=this.page.width*y.pageHeight/y.pageWidth),this.curScene2D&&this.curScene2D.scale(this.page.width/y.pageWidth,this.page.height/y.pageHeight),this._statPos=this.pageImage.localToGlobal(new Laya.Point(0,0),!1),y.pagePos=this.page.localToGlobal(new Laya.Point(0,0),!1)}else{y.isLandscape=!1,this.codeButton.visible=!1,this.qrcodeButton.visible=!1;let e=Laya.stage.designHeight,t=Laya.stage.designHeight*Laya.Browser.clientHeight/Laya.Browser.clientWidth;console.log("onResize >>","[screenWidth:"+t+"] [screenHeight:"+e+"]"),t>1440&&(t=1440),this.rightImage.width=t-250-40,this.desc.width=this.rightImage.width,this.rightImage.width<1138?(this.pageImage.width=this.rightImage.width,this.page.width=this.pageImage.width-14,this.page.height=this.page.width*y.pageHeight/y.pageWidth):(this.pageImage.width=1138,this.page.width=this.pageImage.width-14,this.page.height=this.page.width*y.pageHeight/y.pageWidth),this.curScene2D&&this.curScene2D.scale(this.page.width/y.pageWidth,this.page.height/y.pageHeight),this._statPos=this.pageImage.localToGlobal(new Laya.Point(0,0),!1),y.pagePos=this.page.localToGlobal(new Laya.Point(0,0),!1)}this._cur2D3D||(Laya.Stat.hide(),this.showStat()),Laya.Browser.onPC||(this.codeButton.visible=!1,this.qrcodeButton.visible=!1),y.scaleWidth=this.page.width/y.pageWidth,y.scaleHeight=this.page.height/y.pageHeight,console.log("onResize >>","[scaleWidth:"+y.scaleWidth+"] [scaleWidth:"+y.scaleHeight+"]")}showStat(){y.isLandscape&&(Laya.Stat.hide(),Laya.Stat.show(this._statPos.x*Laya.Browser.clientHeight/Laya.stage.designHeight*Laya.Browser.pixelRatio+20,this._statPos.y*Laya.Browser.clientHeight/Laya.stage.designHeight*Laya.Browser.pixelRatio+20,[G.FPSStatUIParams,G.NodeStatUIParams,G.Sprite3DStatUIParams,G.DrawCall,G.TriangleFace,G.RenderNode,G.SkinRenderNode,G.ParticleRenderNode,G.FrustumCulling,G.GPUMemory,G.TextureMemeory,G.RenderTextureMemory,G.BufferMemory]))}onEnable(){Laya.LayaGL.renderEngine.getCapable(Laya.RenderCapable.RenderTextureFormat_R16G16B16A16)?y.rt=new Laya.RenderTexture(y.pageWidth*2,y.pageHeight*2,Laya.RenderTargetFormat.R16G16B16A16,Laya.RenderTargetFormat.DEPTHSTENCIL_24_8,!1,4):y.rt=new Laya.RenderTexture(y.pageWidth*2,y.pageHeight*2,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.DEPTHSTENCIL_24_8,!1,4),y.curPage=this.page,y.curPage.texture=new Laya.Texture(y.rt),this.setMousePointer(),this.titleList1.mouseHandler=new Laya.Handler(this,this.onTitleMouseHandler1),this.contentList1.renderHandler=new Laya.Handler(this,this.onContentListRender),this.contentList1.mouseHandler=new Laya.Handler(this,this.onContentMouseHandler1),this.titleList2.mouseHandler=new Laya.Handler(this,this.onTitleMouseHandler2),this.contentList2.renderHandler=new Laya.Handler(this,this.onContentListRender),this.contentList2.mouseHandler=new Laya.Handler(this,this.onContentMouseHandler2),this._cur2D3D=!0;let e=!0;this.category=window.category,this.category!="null"&&(this.category=="2D"?(this._cur2D3D=!1,e=!1):this.category=="3D"&&(this._cur2D3D=!0,e=!0)),this.group=Number(window.group),isNaN(this.group)&&(this.group=0),this.contentName=Number(window.name),isNaN(this.contentName)&&(this.contentName=0);let t="resources/json/2d.json";Laya.loader.load(t).then(i=>{let r=Laya.loader.getRes(t);this._json1=r.data.demoList,this.initTitleList(this._json1,this.titleList1,!0),e||this.select2D(this.group)});let a="resources/json/3d.json";Laya.loader.load(a).then(i=>{let r=Laya.loader.getRes(a);this._json2=r.data.demoList,this.initTitleList(this._json2,this.titleList2,!1),e&&this.select3D(this.group)}),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize),this.btn1.on(Laya.Event.CLICK,this,this.select2DFromButton),this.btn2.on(Laya.Event.CLICK,this,this.select3DFromButton),this.onResize(),this.codeButton.on(Laya.Event.CLICK,null,()=>{let i=this._cur2D3D==!0?"2D":"3D",r=null,n=0,l=null;this._cur2D3D?(r=this._json1,n=this.index_2d,l=this._contentSelectedIndexArr1):(r=this._json2,n=this.index_3d,l=this._contentSelectedIndexArr2),window.$.ajax("script/"+i+"/"+r[n].content[l[n]].scene+".ts",{dataType:"text",success:d=>{window.$("#codeLayer").css("display","block"),window.$("#fade").css("display","block"),window.editor.setValue(d),window.editor.resize(),window.editor.moveCursorTo(0)},error:function(){console.log(arguments)}})}),this.qrcodeButton.on(Laya.Event.CLICK,null,()=>{window.$("#qrcodeLayer").css("display","block");let i=Laya.Browser.window.location.href+"?category="+(this._cur2D3D==!0?"2D":"3D")+"&group="+this.titleIndex+"&name="+this.contentIndex;console.log(i),window.$("#qrcodeTable").empty(),window.$("#qrcodeTable").qrcode({render:"table",text:i}),window.$("#fade").css("display","block")})}initTitleList(e,t,a){if(e&&e.length>0){let i=[];for(let r=0;r<e.length;r++)a?(this._contentSelectedIndexArr1[r]=0,this.category=="2D"&&this.group==r&&(this._contentSelectedIndexArr1[r]=this.contentName)):(this._contentSelectedIndexArr2[r]=0,this.category=="3D"&&this.group==r&&(this._contentSelectedIndexArr2[r]=this.contentName)),i[r]={},i[r].title={text:e[r].title},i[r].num={text:e[r].content.length};t.array=i,t.repeatY=i.length,a?this._totalTitleHeight1=this._titleCellSize*i.length:this._totalTitleHeight2=this._titleCellSize*i.length,t.vScrollBarSkin=""}}select2D(e=0){this._cur2D3D||(y.rt=new Laya.RenderTexture(y.pageWidth*2,y.pageHeight*2,Laya.RenderTargetFormat.R16G16B16A16,Laya.RenderTargetFormat.DEPTHSTENCIL_24_8,!1,4),y.curPage.texture=new Laya.Texture(y.rt),Laya.Resource.destroyUnusedResources(),Laya.Scene.gc(),Laya.Stat.hide(),this.panel1.visible=!0,this.panel2.visible=!1,this._cur2D3D=!0,this.btn1.selected=!0,this.btn2.selected=!1,e==0?this.showContentList(this.index_2d):(this.index_2d=e,this.titleIndex=e,this.showContentList(e)))}select2DFromButton(){this.select2D()}select3D(e=0){this._cur2D3D&&(this.showStat(),this.panel1.visible=!1,this.panel2.visible=!0,this._cur2D3D=!1,this.btn1.selected=!1,this.btn2.selected=!0,e==0?this.showContentList(this.index_3d):(this.index_3d=e,this.titleIndex=e,this.showContentList(e)))}select3DFromButton(){this.select3D()}showContentList(e){let t=null,a=null,i=null,r=0,n=0,l=null,d=null,c=!1;this._cur2D3D?(t=this.titleList1,a=this.contentList1,i=this.titleListBg1,n=this._totalTitleHeight1,l=this._contentSelectedIndexArr1,d=this._json1,c=this.show_2d):(t=this.titleList2,a=this.contentList2,i=this.titleListBg2,n=this._totalTitleHeight2,l=this._contentSelectedIndexArr2,d=this._json2,c=this.show_3d);let u=d[e].content;if(u&&u.length>0){let m=[],L=u.length;c||(L=0);for(let g=0;g<L;g++)m[g]={},g==l[e]?(m[g].img={visible:!0},m[g].name={text:u[g].name,color:"#ffffff"}):(m[g].img={visible:!1},m[g].name={text:u[g].name,color:"#717171"});a.array=m,a.repeatY=m.length,a.height=this._contentCellSize*m.length,c?(r=a.height+30,a.y=this._titleCellSize*(e+1),a.y+=15):(r=a.height,a.y=this._titleCellSize*(e+1),a.y),a.vScrollBarSkin="",t.height=n+r,i.height=t.height+10}c&&this.showContent(l[e]),c||(e=-1);for(let m=0;m<d.length;m++){let L=t.getCell(m);m>e?L.y=this._titleCellSize*m+r:L.y=this._titleCellSize*m;let g=L.getChildByName("arrow");m==e?g.index=1:g.index=0;let x=L.getChildByName("select");m==e?x.index=1:x.index=0;let S=L.getChildByName("bg");m==e?S.visible=!0:S.visible=!1;let T=L.getChildByName("title");m==e?T.color="#2395db":T.color="#000000"}}showContent(e){let t=null,a=null,i=null,r="",n=0;this._cur2D3D?(t=this.contentList1,i=this._contentSelectedIndexArr1,a=this._json1,r="2D",n=this.index_2d):(t=this.contentList2,i=this._contentSelectedIndexArr2,a=this._json2,n=this.index_3d,r="3D"),i[n]=e,t.refresh();let l=a[n].title,d=a[n].content[e];this.name.text=l+"--"+d.name,this.desc.text=d.desc,this.nameLine.width=this.getStrLength(this.name.text,this.name.fontSize),this.curSceneURl=="resources/scene/3D/Camera/CameraMSAADemo.ls"&&(y.curPage.texture=new Laya.Texture(y.rt)),Laya.Scene.close(this.curSceneURl),Laya.Scene.destroy(this.curSceneURl),this.page.destroyChildren();let c="resources/scene/"+r+"/"+d.scene+".ls";console.log("open "+d.scene),Laya.Browser._isMiniGame&&d.minigame!=null&&!d.minigame&&(c="resources/scene/Error.ls"),Laya.Scene.open(c,!1).then(u=>{this.curSceneURl=c,this.curScene2D=u,this.page.addChild(u),this.curScene2D&&this.curScene2D.scale(this.page.width/y.pageWidth,this.page.height/y.pageHeight)})}onContentListRender(e,t){let a=null,i=null,r=0;if(this._cur2D3D?(a=this.titleList1,i=this._contentSelectedIndexArr1,r=this.index_2d):(a=this.titleList2,i=this._contentSelectedIndexArr2,r=this.index_3d),t>a.array.length||t<0)return;let n=e.getChildByName("img"),l=e.getChildByName("name");t==i[r]?(n.visible=!0,n.width=(l.x-n.x)*2+this.getStrLength(l.text,l.fontSize),l.color="#ffffff"):(n.visible=!1,l.color="#000000")}onTitleMouseHandler1(e,t){e.type==Laya.Event.CLICK&&(t==this.index_2d&&this.show_2d?this.show_2d=!1:(this.index_2d=t,this.show_2d=!0),this.titleIndex=t,this.showContentList(t))}onTitleMouseHandler2(e,t){e.type==Laya.Event.CLICK&&(t==this.index_3d&&this.show_3d?this.show_3d=!1:(this.index_3d=t,this.show_3d=!0),this.titleIndex=t,this.showContentList(t))}onContentMouseHandler1(e,t){e.type==Laya.Event.CLICK&&(this._contentSelectedIndexArr1[this.index_2d]=t,this.contentIndex=t,this.showContentList(this.index_2d))}onContentMouseHandler2(e,t){e.type==Laya.Event.CLICK&&(this._contentSelectedIndexArr2[this.index_3d]=t,this.contentIndex=t,this.showContentList(this.index_3d))}getStrLength(e,t){for(var a=0,i=0;i<e.length;i++)e.charCodeAt(i)>127||e.charCodeAt(i)==94?a+=t:a+=t/2+2;return a+2}setMousePointer(){this.btn1.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.btn1.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.btn2.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.btn2.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.codeButton.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.codeButton.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.qrcodeButton.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.qrcodeButton.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.titleList1.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.titleList1.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.titleList2.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.titleList2.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.contentList1.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.contentList1.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"}),this.contentList2.on(Laya.Event.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this.contentList2.on(Laya.Event.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"})}};y.pageWidth=1124,y.pageHeight=456,y.screenWidth=0,y.screenHeight=0,y.scaleWidth=0,y.scaleHeight=0,y.pagePos=null,y.isLandscape=!0,o([k(Laya.Button)],y.prototype,"btn1",2),o([k(Laya.Button)],y.prototype,"btn2",2),o([k(Laya.Image)],y.prototype,"titleListBg1",2),o([k(Laya.List)],y.prototype,"titleList1",2),o([k(Laya.List)],y.prototype,"contentList1",2),o([k(Laya.Panel)],y.prototype,"panel1",2),o([k(Laya.Image)],y.prototype,"titleListBg2",2),o([k(Laya.List)],y.prototype,"titleList2",2),o([k(Laya.List)],y.prototype,"contentList2",2),o([k(Laya.Panel)],y.prototype,"panel2",2),o([k(Laya.Sprite)],y.prototype,"page",2),o([k(Laya.Label)],y.prototype,"name",2),o([k(Laya.Image)],y.prototype,"nameLine",2),o([k(Laya.Button)],y.prototype,"codeButton",2),o([k(Laya.Button)],y.prototype,"qrcodeButton",2),o([k(Laya.Label)],y.prototype,"desc",2),o([k(Laya.Image)],y.prototype,"rightImage",2),o([k(Laya.Image)],y.prototype,"pageImage",2),y=o([mu("tywzgsPaRP2ncBN_LrqMpg")],y);var ci=class extends Laya.Scene{};Laya.LayaEnv.beforeInit=function(p){console.log("before init from Main"),Laya.Config.preserveDrawingBuffer=!0,Laya.Config.isAlpha=!0};var{regClass:uu,property:Ib}=Laya,mi=class extends ci{constructor(){super(...arguments);this.loadingIndex=0;this.loadingOtherScenesPath=[{url:"resources/res/threeDimen/scene/CourtyardScene/Courtyard.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Light/MultiLight.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/PostProcess/PostProcessDoF.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/PostProcess/PostProcessAO.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/PostProcess/PostProcessBloom.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/PostProcess/PostProcess_Blur.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/PostProcess/PostProcess_Edge.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Show/GunDemo.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Show/DamagedHelmetModelShow.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Advance/ReflectionProbe.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Advance/VideoPlayIn3DWorld.ls",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Advance/CommandBuffer_Outline.ls",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/LayaScene_separable-sss/Conventional/HeadBlinnphong.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/texAnimation/Attack01/Attack01.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/texAnimation/role/role.lh",type:Laya.Loader.HIERARCHY}]}onAwake(){let e=[{url:"resources/image/button1.png",type:Laya.Loader.IMAGE},{url:"resources/image/button2.png",type:Laya.Loader.IMAGE},{url:"resources/image/clip_arrow.png",type:Laya.Loader.IMAGE},{url:"resources/image/clip_num_bg.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_blue_line.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_btn_bg.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_frame.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_list_bg.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_selected_bg.png",type:Laya.Loader.IMAGE},{url:"resources/image/img_white_bg.jpg",type:Laya.Loader.IMAGE},{url:"resources/image/img_white_line.png",type:Laya.Loader.IMAGE},{url:"resources/image/vscroll.png",type:Laya.Loader.IMAGE},{url:"resources/image/vscroll$bar.png",type:Laya.Loader.IMAGE},{url:"resources/image/vscroll$down.png",type:Laya.Loader.IMAGE},{url:"resources/image/vscroll$up.png",type:Laya.Loader.IMAGE},{url:"resources/res/apes/monkey0.png",type:Laya.Loader.IMAGE},{url:"resources/res/apes/monkey1.png",type:Laya.Loader.IMAGE},{url:"resources/res/apes/monkey2.png",type:Laya.Loader.IMAGE},{url:"resources/res/apes/monkey3.png",type:Laya.Loader.IMAGE},{url:"resources/res/fighter/fighter.atlas",type:Laya.Loader.ATLAS},{url:"resources/res/bg2.png",type:Laya.Loader.IMAGE},{url:"resources/res/tiledMap/orthogonal-test-movelayer.json",type:Laya.Loader.JSON},{url:"resources/res/tiledMap/isometric_grass_and_water.json",type:Laya.Loader.JSON},{url:"resources/res/tiledMap/perspective_walls.json",type:Laya.Loader.JSON},{url:"resources/res/tiledMap/desert.json",type:Laya.Loader.JSON},{url:"resources/res/threeDimen/skinModel/BoneLinkScene/PangZi.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/staticModel/grid/plane.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/particle/ETF_Burning_Ground.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/particle/ETF_Eternal_Light.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/skinModel/dude/dude.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/trail/Cube.lh",type:Laya.Loader.HIERARCHY},{url:"resources/scene/3D/Scene3D/GriendSkyAmbientDemo/GriendSkyAmbientDemo.ktx",type:Laya.Loader.TEXTURE2D},{url:"resources/scene/3D/Material/PBRMaterialDemo/PBRMaterialDemo.ktx",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/LayaScene_MaskModelTest/Conventional/Assets/Scenes/MaskModelTestGIReflection.ltcb",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/fbx/LayaMonkey.FBX",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/fbx/Danding.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/fbx/Stand.FBX",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/fbx/Material.lmat",type:Laya.Loader.MATERIAL},{url:"resources/res/threeDimen/fbx/LayaMonkey.lmat",type:Laya.Loader.MATERIAL},{url:"resources/res/threeDimen/gltf/AnimatedCube/AnimatedCube.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/gltf/RiggedFigure/RiggedFigure.gltf",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/gltf/Duck/Duck.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/staticModel/teapot/teapot-Teapot001.lm",type:Laya.Loader.MESH},{url:"resources/res/threeDimen/skyBox/DawnDusk/Skybox.lmat",type:Laya.Loader.MATERIAL},{url:"resources/res/threeDimen/scene/LayaScene_dudeScene/Conventional/dudeSceneNoCamera.ls",type:Laya.Loader.HIERARCHY}];console.time(),Laya.loader.load(["resources/image/ly.png","resources/image/progress.png","resources/image/progress$bar.png"]).then(()=>{console.timeEnd(),console.log("\u5148\u52A0\u8F7D\u672C\u573A\u666F\u8981\u7528\u7684\u5B8C\u6210"),Laya.loader.load(e,null,Laya.Handler.create(this,this.onLoading,null,!1)).then(()=>{this.onLoaded()}),Laya.loader.on(Laya.Event.ERROR,this,this.onError)})}onError(e){console.log("\u52A0\u8F7D\u5931\u8D25: "+e)}onLoading(e){e>.92?this.loadingBar.value=.95:this.loadingBar.value=e}onLoaded(){this.loadingBar.value=.98,console.log("\u52A0\u8F7D\u7ED3\u675F",this.loadingBar.value),Laya.Browser._isMiniGame||(this.initDom(),this.initAce()),this.enterDemo()}initDom(){let e="resources/image/img_code_close.png";var t=Laya.Browser.document.createElement("div");t.id="codeLayer",t.style="display: none;position: absolute;top: 15%;left: 20%;width: 60%;height: 70%;background-color: #e4e4e4;z-index:1002;overflow: auto;",Laya.Browser.document.body.appendChild(t);var a=Laya.Browser.document.createElement("span");a.style="position:absolute;text-align:center;color:#000000;width:100%;top:10;font-size:20px;",a.innerHTML="\u6E90\u7801&nbsp;&nbsp;",t.appendChild(a);var i=Laya.Browser.document.createElement("img");i.style="position:absolute;right:15;top:10;cursor:pointer;",i.src=Laya.URL.postFormatURL(Laya.URL.formatURL(e)),i.setAttribute("href","javascript:void(0)"),i.setAttribute("onclick","document.getElementById('codeLayer').style.display='none';document.getElementById('fade').style.display='none'"),t.appendChild(i);var r=Laya.Browser.document.createElement("pre");r.id="code",r.setAttribute("class","ace_editor"),r.style="position:absolute;top:30px;width:99%;height:91%;border:2px solid #ccc;",t.appendChild(r);var n=Laya.Browser.document.createElement("textarea");n.id="codeContent",n.setAttribute("class","ace_text-input"),r.appendChild(n);var l=Laya.Browser.document.createElement("div");l.id="qrcodeLayer",l.style="display: none;position: absolute;left: 0;right: 0;top: 0;bottom: 0;text-align:center;margin:auto;width: 316px; height: 346px;background-color: #e4e4e4; z-index:1002; overflow: false;",Laya.Browser.document.body.appendChild(l);var d=Laya.Browser.document.createElement("span");d.style="position:absolute;text-align:center;color:#000000;width:100%;top:10px;left:10px;font-size:20px;",d.innerHTML="\u626B\u63CF\u4E8C\u7EF4\u7801&nbsp;&nbsp;",l.appendChild(d);var c=Laya.Browser.document.createElement("img");c.style="position:absolute;right:15;top:10;cursor:pointer;",c.src=Laya.URL.postFormatURL(Laya.URL.formatURL(e)),c.setAttribute("href","javascript:void(0)"),c.setAttribute("onclick","document.getElementById('qrcodeLayer').style.display='none';document.getElementById('fade').style.display='none'"),l.appendChild(c),console.log("asd");var u=Laya.Browser.document.createElement("div");u.id="qrcode",u.style="position:absolute;top:30px;padding: 30px 30px 30px 30px;",l.appendChild(u);var m=Laya.Browser.document.createElement("div");m.id="qrcodeTable",u.appendChild(m);var L=Laya.Browser.document.createElement("div");L.id="fade",L.style="display: none;position: absolute;top: 0%;left: 0%; width: 100%; height: 100%; background-color: black; z-index:1001; -moz-opacity: 0.8; opacity:.80; filter: alpha(opacity=88);",Laya.Browser.document.body.appendChild(L)}initAce(){var e=Laya.Browser.document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js",e.onload=function(){var t=Laya.Browser.document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ext-language_tools.js",t.onload=function(){var a=Laya.Browser.document.createElement("script");a.src=Laya.URL.postFormatURL(Laya.URL.formatURL("js/aceInit.js")),a.onerror=function(){console.log("download "+a.src+" error")},Laya.Browser.document.body.appendChild(a)},t.onerror=function(){console.log("download "+t.src+" error")},Laya.Browser.document.body.appendChild(t)},e.onerror=function(){console.log("download "+e.src+" error")},Laya.Browser.document.body.appendChild(e)}enterDemo(){Laya.Scene.open("resources/scene/Index.ls")}loadOtherScene(e){e!=this.loadingOtherScenesPath.length&&Laya.loader.load(this.loadingOtherScenesPath[e]).then(()=>{console.log("\u540E\u671F\u52A0\u8F7D\u5B8C "+e+" \u573A\u666F"),this.loadingIndex++,this.loadOtherScene(this.loadingIndex)})}};mi=o([uu("rTzxCCGgSpCehmpAEyfXIg")],mi);var Ol=Laya.Vector3,yr=Laya.Quaternion,Ot=Laya.InputManager,ui=Laya.Event,Lr=class extends Laya.Script{constructor(){super();this._tempVector3=new Ol;this.yawPitchRoll=new Ol;this.resultRotation=new yr;this.tempRotationZ=new yr;this.tempRotationX=new yr;this.tempRotationY=new yr;this.rotaionSpeed=6e-5;this.speed=8e-4}_updateRotation(){Math.abs(this.yawPitchRoll.y)<1.5&&(yr.createFromYawPitchRoll(this.yawPitchRoll.x,this.yawPitchRoll.y,this.yawPitchRoll.z,this.tempRotationZ),this.tempRotationZ.cloneTo(this.camera.transform.localRotation),this.camera.transform.localRotation=this.camera.transform.localRotation)}onAwake(){Laya.stage.on(ui.RIGHT_MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(ui.RIGHT_MOUSE_UP,this,this.mouseUp),this.camera=this.owner}onUpdate(){var e=Laya.timer.delta;if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&this.isMouseDown){var t=this.owner.scene;Ot.hasKeyDown(87)&&this.moveForward(-this.speed*e),Ot.hasKeyDown(83)&&this.moveForward(this.speed*e),Ot.hasKeyDown(65)&&this.moveRight(-this.speed*e),Ot.hasKeyDown(68)&&this.moveRight(this.speed*e),Ot.hasKeyDown(81)&&this.moveVertical(this.speed*e),Ot.hasKeyDown(69)&&this.moveVertical(-this.speed*e);var a=Laya.stage.mouseX-this.lastMouseX,i=Laya.stage.mouseY-this.lastMouseY,r=this.yawPitchRoll;r.x-=a*this.rotaionSpeed*e,r.y-=i*this.rotaionSpeed*e,this._updateRotation()}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY}onDestroy(){Laya.stage.off(ui.RIGHT_MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(ui.RIGHT_MOUSE_UP,this,this.mouseUp)}mouseDown(e){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0}mouseUp(e){this.isMouseDown=!1}mouseOut(e){this.isMouseDown=!1}moveForward(e){this._tempVector3.x=this._tempVector3.y=0,this._tempVector3.z=e,this.camera.transform.translate(this._tempVector3)}moveRight(e){this._tempVector3.y=this._tempVector3.z=0,this._tempVector3.x=e,this.camera.transform.translate(this._tempVector3)}moveVertical(e){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=e,this.camera.transform.translate(this._tempVector3,!1)}};var U=Laya.Stat,yu=Laya.Button,cn=Laya.Event,Nl=Laya.Vector3,{regClass:Lu,property:Gb}=Laya,h=class extends Laya.Script{constructor(){super();this.pageWidth=Laya.stage.designHeight*Laya.Browser.clientWidth/Laya.Browser.clientHeight,this.pageHeight=Laya.stage.designHeight,y.curPage&&(this.pageWidth=y.pageWidth,this.pageHeight=y.pageHeight)}base(e=null,t=!0,a=!1){this.box2D=this.owner,this.box2D.bgColor="#232628",y&&y.curPage&&e?(t&&e.addComponent(Lr),a||(e.msaa=!0,e.renderTarget=y.rt)):e&&(t&&e.addComponent(Lr),Laya.Stat.show(0,0,[U.FPSStatUIParams,U.NodeStatUIParams,U.Sprite3DStatUIParams,U.DrawCall,U.TriangleFace,U.RenderNode,U.SkinRenderNode,U.ParticleRenderNode,U.FrustumCulling,U.GPUMemory,U.TextureMemeory,U.RenderTextureMemory,U.BufferMemory,U.BufferMemory]))}setCameraDirectionLight(e,t,a=60){e.transform.position=new Nl(0,2,3),e.transform.rotationEuler=new Nl(-30,0,0),e.useOcclusionCulling=!1,e.fieldOfView=a,t.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1)}addBottomButton(e,t,a){this._buttonType=0,this._button=this.owner.addChild(new yu("resources/image/img_btn_bg.png",e[0])),this._button.size(150,40),this._button.labelSize=16,this._button.sizeGrid="21,83,22,76",this._button.stateNum=1,this._button.labelColors="#ffffff",this._button.pos(this.pageWidth/2-this._button.width/2,this.pageHeight-50),this._button.on(cn.CLICK,this,()=>{if(this._buttonType++,e.length==2)switch(this._buttonType%=2,this._buttonType){case 0:this._button.label=e[0],a[1].apply(t);break;case 1:this._button.label=e[1],a[0].apply(t);break}else if(e.length==3)switch(this._buttonType%=3,this._buttonType){case 0:this._button.label=e[0],a[2].apply(t);break;case 1:this._button.label=e[1],a[0].apply(t);break;case 2:this._button.label=e[2],a[1].apply(t);break}}),this._button.on(cn.MOUSE_OVER,null,()=>{Laya.Mouse.cursor="pointer"}),this._button.on(cn.MOUSE_OUT,null,()=>{Laya.Mouse.cursor="default"})}};h=o([Lu("-ZmmsnFvTKeOcW0JNlTkMQ")],h);var gu=Laya.Animation,vu=Laya.Handler,Su=Laya.Tween,{regClass:xu,property:fu}=Laya,gr=class extends h{constructor(){super();this.phoenixWidth=750;this.phoenixHeight=450;this.bgColorTweener=new Su;this.gradientInterval=2e3;this.bgColorChannels={r:99,g:0,b:255}}onAwake(){super.base(),this.setup()}setup(){this.createPhoenixes(),this.evalBgColor(),Laya.timer.frameLoop(1,this,this.renderBg)}createPhoenixes(){var e=Math.min(this.pageWidth/(this.phoenixWidth*2),this.pageHeight/this.phoenixHeight);this.blendedPhoenix=this.createAnimation(),this.blendedPhoenix.blendMode="lighter",this.blendedPhoenix.scale(e,e),this.blendedPhoenix.y=(this.pageHeight-this.phoenixHeight*e)/2,this.normalPhoenix=this.createAnimation(),this.normalPhoenix.scale(e,e),this.normalPhoenix.x=this.phoenixWidth*e,this.normalPhoenix.y=(this.pageHeight-this.phoenixHeight*e)/2}createAnimation(){for(var e=[],t=1;t<=25;++t)e.push("resources/res/phoenix/phoenix"+this.preFixNumber(t,4)+".jpg");var a=new gu;a.loadImages(e),this.box2D.addChild(a);var i=a.frames.concat();return i=i.reverse(),a.frames=a.frames.concat(i),a.play(),a}preFixNumber(e,t){return("0000000000"+e).slice(-t)}evalBgColor(){var e=Math.random()*16777215,t=this.getColorChannals(e);this.bgColorTweener.to(this.bgColorChannels,{r:t[0],g:t[1],b:t[2]},this.gradientInterval,null,vu.create(this,this.onTweenComplete))}getColorChannals(e){var t=[];return t.push(e>>16),t.push(e>>8&255),t.push(e&255),t}onTweenComplete(){this.evalBgColor()}renderBg(){this.bgSp.graphics.clear(),this.bgSp.graphics.drawRect(this.blendedPhoenix.x,this.blendedPhoenix.y,this.phoenixWidth,this.phoenixHeight,this.getHexColorString())}getHexColorString(){this.bgColorChannels.r=Math.floor(this.bgColorChannels.r),this.bgColorChannels.g=0,this.bgColorChannels.b=Math.floor(this.bgColorChannels.b);var e=this.bgColorChannels.r.toString(16);e=e.length==2?e:"0"+e;var t=this.bgColorChannels.g.toString(16);t=t.length==2?t:"0"+t;var a=this.bgColorChannels.b.toString(16);return a=a.length==2?a:"0"+a,"#"+e+t+a}onDestroy(){this.blendedPhoenix!=null&&this.normalPhoenix!=null&&(this.bgColorTweener.clear(),this.normalPhoenix.stop(),this.blendedPhoenix.stop(),Laya.timer.clear(this,this.renderBg),this.box2D.graphics.clear())}};o([fu({type:Laya.Sprite})],gr.prototype,"bgSp",2),gr=o([xu("B2ErhHiHQESJEG4vwrDQqw")],gr);var Du=Laya.Animation,Cu=Laya.Loader,{regClass:wu,property:jb}=Laya,yi=class extends h{constructor(){super();this.AniConfPath="resources/res/fighter/fighter.json"}onAwake(){super.base(),Laya.loader.load(this.AniConfPath,Cu.ATLAS).then(()=>{this.createAnimation()})}createAnimation(e=null){var t=new Du;t.loadAtlas(this.AniConfPath),t.interval=30,t.index=1,t.play();var a=t.getGraphicBounds();t.pivot(a.width/2,a.height/2),t.pos(this.pageWidth/2,this.pageHeight/2),this.owner.addChild(t)}};yi=o([wu("uxpJifHLQPGt4AQ_i_RI9A")],yi);var bu=Laya.MovieClip,{regClass:Mu,property:eM}=Laya,Li=class extends h{constructor(){super();this.SWFPath="resources/res/swf/dragon.swf";this.MCWidth=318;this.MCHeight=406}onAwake(){super.base(),this.createMovieClip()}createMovieClip(){var e=new bu;e.load(this.SWFPath),e.x=(this.pageWidth-this.MCWidth)/2,e.y=(this.pageHeight-this.MCHeight)/2,this.owner.addChild(e)}};Li=o([Mu("LWnzyfBBSXu5Ig4friIx_A")],Li);var Tu=Laya.Sprite,Ul=Laya.SpriteUtils,Eu=Laya.Render,vr=Laya.Browser,Ru=Laya.Text,{regClass:Au,property:oM}=Laya,gi=class extends h{constructor(){super();this.rowHeight=30;this.rowSpacing=10}onAwake(){super.base(),this.box2D.bgColor="#FFFFFF",this.form=new Tu,this.form.size(250,120),this.form.pos((this.pageWidth-this.form.width)/2,(this.pageHeight-this.form.height)/2),this.owner.addChild(this.form);var e=this.rowSpacing+this.rowHeight;this.showLabel("\u90AE\u7BB1",0,e*0),this.showLabel("\u51FA\u751F\u65E5\u671F",0,e*1),this.showLabel("\u5BC6\u7801",0,e*2),this.emailInput=this.createInputElement(),this.birthdayInput=this.createInputElement(),this.passwordInput=this.createInputElement(),this.birthdayInput.type="date",this.passwordInput.type="password";var t;let a=[this.emailInput,this.birthdayInput,this.passwordInput];for(var i=0;i<a.length;i++)t=a[i],y.curPage?Ul.fitDOMElementInArea(t,this.form,y.pagePos.x+100,y.pagePos.y+i*(this.rowSpacing+this.rowHeight),150,this.rowHeight):Ul.fitDOMElementInArea(t,this.form,100,i*(this.rowSpacing+this.rowHeight),150,this.rowHeight)}onDestroy(){vr.removeElement(this.emailInput),vr.removeElement(this.birthdayInput),vr.removeElement(this.passwordInput)}showLabel(e,t,a){var i=new Ru;i.height=this.rowHeight,i.valign="middle",i.fontSize=15,i.font="SimHei",i.text=e,i.pos(t,a),this.form.addChild(i)}createInputElement(){var e=vr.createElement("input");return e.style.zIndex=Eu.canvas.zIndex+1,e.style.width="100px",vr.document.body.appendChild(e),e}};gi=o([Au("HHgiFTpAT12GadkF8cH98Q")],gi);var Bu=Laya.Sprite,Wl=Laya.SpriteUtils,Vu=Laya.Render,mn=Laya.Browser,{regClass:_u,property:pM}=Laya,vi=class extends h{constructor(){super()}onAwake(){super.base();var e=mn.createElement("video");mn.document.body.appendChild(e),this.video=e,e.style.zInddex=Vu.canvas.style.zIndex+1,e.src=Laya.URL.postFormatURL(Laya.URL.formatURL("resources/res/av/mov_bbb.mp4")),e.controls=!0,e.setAttribute("webkit-playsinline",!0),e.setAttribute("playsinline",!0);var t=new Bu;this.owner.addChild(t),t.pos((this.pageWidth-600)/2,(this.pageHeight-400)/2),t.size(600,400),t.graphics.drawRect(0,0,t.width,t.height,"#000000"),y.curPage?Wl.fitDOMElementInArea(e,t,y.pagePos.x,y.pagePos.y,t.width,t.height):Wl.fitDOMElementInArea(e,t,0,0,t.width,t.height)}onDestroy(){mn.removeElement(this.video)}};vi=o([_u("GF_Fe9v3QAi8fRHm_2vYUg")],vi);var un=Laya.Sprite,Pu=Laya.Event,ku=Laya.Browser,Fu=Laya.Text,Iu=Laya.Gyroscope,{regClass:Hu,property:uM}=Laya,Si=class extends h{constructor(){super();this.compassImgPath="resources/res/inputDevice/kd.png";this.firstTime=!0}onAwake(){super.base(),Laya.loader.load(this.compassImgPath).then(()=>{this.init()})}init(){this.createCompass(),this.createDirectionIndicator(),this.drawUI(),this.createDegreesText(),Iu.instance.on(Pu.CHANGE,this,this.onOrientationChange)}createCompass(){this.compassImg=new un,this.box2D.addChild(this.compassImg),this.compassImg.loadImage(this.compassImgPath),this.compassImg.pivot(this.compassImg.width/2,this.compassImg.height/2),this.compassImg.pos(this.pageWidth/2,400)}drawUI(){var e=new un;this.box2D.addChild(e),e.graphics.drawLine(this.compassImg.x,50,this.compassImg.x,182,"#FFFFFF",3),e.graphics.drawLine(-140+this.compassImg.x,this.compassImg.y,140+this.compassImg.x,this.compassImg.y,"#AAAAAA",1),e.graphics.drawLine(this.compassImg.x,-140+this.compassImg.y,this.compassImg.x,140+this.compassImg.y,"#AAAAAA",1)}createDegreesText(){this.degreesText=new Fu,this.box2D.addChild(this.degreesText),this.degreesText.align="center",this.degreesText.size(this.pageWidth,100),this.degreesText.pos(0,this.compassImg.y+400),this.degreesText.fontSize=100,this.degreesText.color="#FFFFFF"}createDirectionIndicator(){this.directionIndicator=new un,this.box2D.addChild(this.directionIndicator),this.directionIndicator.alpha=.8,this.directionIndicator.graphics.drawCircle(0,0,70,"#343434"),this.directionIndicator.graphics.drawLine(-40,0,40,0,"#FFFFFF",3),this.directionIndicator.graphics.drawLine(0,-40,0,40,"#FFFFFF",3),this.directionIndicator.x=this.compassImg.x,this.directionIndicator.y=this.compassImg.y}onOrientationChange(e,t){t.alpha===null?alert("\u5F53\u524D\u8BBE\u5907\u4E0D\u652F\u6301\u9640\u87BA\u4EEA\u3002"):this.firstTime&&!e&&!ku.onIOS&&(this.firstTime=!1,alert("\u5728\u5F53\u524D\u8BBE\u5907\u4E2D\u65E0\u6CD5\u83B7\u53D6\u5730\u7403\u5750\u6807\u7CFB\uFF0C\u4F7F\u7528\u8BBE\u5907\u5750\u6807\u7CFB\uFF0C\u4F60\u53EF\u4EE5\u7EE7\u7EED\u89C2\u8D4F\uFF0C\u4F46\u662F\u63D0\u4F9B\u7684\u65B9\u4F4D\u5E76\u975E\u6B63\u786E\u65B9\u4F4D\u3002")),this.degreesText.text=360-Math.floor(t.alpha)+"\xB0",this.compassImg.rotation=t.alpha,this.directionIndicator.x=-1*Math.floor(t.gamma)/90*70+this.compassImg.x,this.directionIndicator.y=-1*Math.floor(t.beta)/90*70+this.compassImg.y}};Si=o([Hu("vW0TOgNgTi29IFye-FByfQ")],Si);var Gl=Laya.Sprite,Ou=Laya.Event,Nu=Laya.Accelerator,zl=Laya.Point,{regClass:Uu,property:vM}=Laya,xi=class extends h{constructor(){super();this.segments=[];this.foods=[];this.initialSegmentsAmount=5;this.vx=0;this.vy=0}onAwake(){super.base(),this.initSnake(),Nu.instance.on(Ou.CHANGE,this,this.monitorAccelerator),Laya.timer.frameLoop(1,this,this.animate),Laya.timer.loop(3e3,this,this.produceFood),this.produceFood()}initSnake(){for(var e=0;e<this.initialSegmentsAmount;e++)if(this.addSegment(),e==0){var t=this.segments[0];t.rotation=180,this.targetPosition=new zl,this.targetPosition.x=this.pageWidth/2,this.targetPosition.y=this.pageHeight/2,t.pos(this.targetPosition.x+t.width,this.targetPosition.y),t.graphics.drawCircle(t.width,5,3,"#000000"),t.graphics.drawCircle(t.width,-5,3,"#000000")}}monitorAccelerator(e,t,a,i){this.vx=t.x,this.vy=t.y}addSegment(){var e=new yn(40,30);if(this.box2D.addChildAt(e,0),this.segments.length>0){var t=this.segments[this.segments.length-1];e.rotation=t.rotation;var a=e.getPinPosition();e.x=t.x-a.x,e.y=t.y-a.y}this.segments.push(e)}animate(){var e=this.segments[0];this.targetPosition.x+=this.vx,this.targetPosition.y+=this.vy,this.limitMoveRange(),this.checkEatFood();for(var t=this.targetPosition.x,a=this.targetPosition.y,i=0,r=this.segments.length;i<r;i++){e=this.segments[i];var n=t-e.x,l=a-e.y,d=Math.atan2(l,n);e.rotation=d*180/Math.PI;var c=e.getPinPosition(),u=c.x-e.x,m=c.y-e.y;e.x=t-u,e.y=a-m,t=e.x,a=e.y}}limitMoveRange(){this.targetPosition.x<0?this.targetPosition.x=0:this.targetPosition.x>this.pageWidth&&(this.targetPosition.x=this.pageWidth),this.targetPosition.y<0?this.targetPosition.y=0:this.targetPosition.y>this.pageHeight&&(this.targetPosition.y=this.pageHeight)}checkEatFood(){for(var e,t=this.foods.length-1;t>=0;t--)e=this.foods[t],e.hitTestPoint(this.targetPosition.x,this.targetPosition.y)&&(this.addSegment(),Laya.stage.removeChild(e),this.foods.splice(t,1))}produceFood(){if(this.foods.length==5)return;var e=new Gl;this.box2D.addChild(e),this.foods.push(e);let t=40;e.size(t,t),e.graphics.drawRect(0,0,t,t,"#00BFFF"),e.x=Math.random()*this.pageWidth,e.y=Math.random()*this.pageHeight}};xi=o([Uu("BupG4utVTDKNK2-oW8jPnA")],xi);var yn=class extends Gl{constructor(s,e){super(),this.size(s,e),this.init()}init(){this.graphics.drawRect(-this.height/2,-this.height/2,this.width+this.height,this.height,"#FF7F50")}getPinPosition(){var s=this.rotation*Math.PI/180,e=this.x+Math.cos(s)*this.width,t=this.y+Math.sin(s)*this.width;return new zl(e,t)}};var Wu=Laya.Text,Sr=Laya.Geolocation,Xl=Laya.Handler,be=Laya.Browser,Gu=Laya.SpriteUtils,{regClass:zu,property:CM}=Laya,fi=class extends h{constructor(){super();this.BMap=be.window.BMap}onAwake(){this.convertor=new this.BMap.Convertor,super.base(),this.createDom(),this.initMap(),this.createInfoText();var e=new Xl(this,this.updatePosition),t=new Xl(this,this.onError);Sr.enableHighAccuracy=!0,Sr.watchPosition(e,t),this.convertToBaiduCoord=this.convertToBaiduCoord.bind(this)}onDestroy(){be.removeElement(this.mapDiv)}createDom(){this.mapDiv=be.createElement("div");var e=this.mapDiv.style;e.position="absolute",e.top="50px",e.left="0px",e.width=be.width/be.pixelRatio+"px",e.height=be.height/be.pixelRatio+"px",be.document.body.appendChild(this.mapDiv),y.curPage&&Gu.fitDOMElementInArea(this.mapDiv,this.box2D,y.pagePos.x,y.pagePos.y+50,this.pageWidth,this.pageHeight-50)}initMap(){this.map=new this.BMap.Map(this.mapDiv),this.map.disableKeyboard(),this.map.disableScrollWheelZoom(),this.map.disableDoubleClickZoom(),this.map.disablePinchToZoom(),this.map.centerAndZoom(new this.BMap.Point(116.32715863448607,39.990912172420714),15),this.marker=new this.BMap.Marker(new this.BMap.Point(0,0)),this.map.addOverlay(this.marker);var e=new this.BMap.Label("\u5F53\u524D\u4F4D\u7F6E",{offset:new this.BMap.Size(-15,30)});this.marker.setLabel(e)}createInfoText(){this.infoText=new Wu,this.owner.addChild(this.infoText),this.infoText.fontSize=20,this.infoText.color="#FFFFFF",this.infoText.text="\u7B49\u5F85\u521D\u59CB\u5316\u6570\u636E",this.infoText.size(this.pageWidth,this.pageHeight)}updatePosition(e){var t=new this.BMap.Point(e.longitude,e.latitude);this.convertor.translate([t],1,5,this.convertToBaiduCoord),this.infoText.text="\u7ECF\u5EA6\uFF1A"+e.longitude+"	\u7EAC\u5EA6\uFF1A"+e.latitude+"	\u7CBE\u5EA6\uFF1A"+e.accuracy+`
\u6D77\u62D4\uFF1A`+e.altitude+"	\u6D77\u62D4\u7CBE\u5EA6\uFF1A"+e.altitudeAccuracy+`
\u5934\uFF1A`+e.heading+`
\u901F\u5EA6\uFF1A`+e.speed+`
\u65F6\u95F4\u6233\uFF1A`+e.timestamp}convertToBaiduCoord(e){if(e.status==0){var t=e.points[0];this.marker.setPosition(t),this.map.panTo(t),this.map.setZoom(17)}}onError(e){e.code==Sr.TIMEOUT?console.log("\u83B7\u53D6\u4F4D\u7F6E\u8D85\u65F6"):e.code==Sr.POSITION_UNAVAILABLE?console.log("\u4F4D\u7F6E\u4E0D\u53EF\u7528"):e.code==Sr.PERMISSION_DENIED&&console.log("\u65E0\u6743\u9650")}};fi=o([zu("jsLDvnZkSD2buGhEui5utA")],fi);var Xu=Laya.Sprite,Yu=Laya.Event,Ln=Laya.Shake,Ku=Laya.Text,{regClass:Qu,property:TM}=Laya,Di=class extends h{constructor(){super();this.picW=824;this.picH=484;this.shakeCount=0}onAwake(){super.base(),this.showShakePic(),this.showConsoleText(),this.startShake()}showShakePic(){var e=new Xu;e.loadImage("resources/res/inputDevice/shake.png"),this.box2D.addChild(e)}showConsoleText(){this.console=new Ku,this.box2D.addChild(this.console),this.console.y=this.picH+10,this.console.width=this.pageWidth,this.console.height=this.pageHeight-this.console.y,this.console.color="#FFFFFF",this.console.fontSize=50,this.console.align="center",this.console.valign="middle",this.console.leading=10}startShake(){Ln.instance.start(5,500),Ln.instance.on(Yu.CHANGE,this,this.onShake),this.console.text=`\u5F00\u59CB\u63A5\u6536\u8BBE\u5907\u6447\u52A8
`}onShake(){this.shakeCount++,this.console.text+="\u8BBE\u5907\u6447\u6643\u4E86"+this.shakeCount+`\u6B21
`,this.shakeCount>=3&&(Ln.instance.stop(),this.console.text+="\u505C\u6B62\u63A5\u6536\u8BBE\u5907\u6447\u52A8")}};Di=o([Qu("DRgv9cgHSC-TpHHFIGJN5w")],Di);var Ju=Laya.Sprite,ju=Laya.BlurFilter,{regClass:qu,property:BM}=Laya,Ci=class extends h{constructor(){super();this.apePath="resources/res/apes/monkey2.png"}onAwake(){super.base(),Laya.loader.load(this.apePath).then(()=>{this.createApe()})}createApe(e=null){var t=new Ju;t.loadImage(this.apePath),t.x=(this.pageWidth-t.width)/2,t.y=(this.pageHeight-t.height)/2,this.box2D.addChild(t),this.applayFilter(t)}applayFilter(e){var t=new ju;t.strength=5,e.filters=[t]}};Ci=o([qu("Wi2fYkt0S4eiLYLs1l-laA")],Ci);var Zu=Laya.Sprite,Yl=Laya.ColorFilter,{regClass:$u,property:kM}=Laya,wi=class extends h{constructor(){super();this.ApePath="resources/res/apes/monkey2.png"}onAwake(){super.base(),Laya.loader.load(this.ApePath).then(()=>{this.setup()})}setup(e=null){this.normalizeApe(),this.makeRedApe(),this.grayingApe()}normalizeApe(){var e=this.createApe();this.apeTexture=Laya.loader.getRes(this.ApePath),e.x=(this.pageWidth-this.apeTexture.width)/2-this.apeTexture.width,e.y=(this.pageHeight-this.apeTexture.height)/2}makeRedApe(){var e=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],t=new Yl(e),a=this.createApe();a.filters=[t],a.x=(this.pageWidth-this.apeTexture.width)/2,a.y=(this.pageHeight-this.apeTexture.height)/2}grayingApe(){var e=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],t=new Yl(e),a=this.createApe();a.filters=[t],a.x=(this.pageWidth-this.apeTexture.width)/2+this.apeTexture.width,a.y=(this.pageHeight-this.apeTexture.height)/2}createApe(){var e=new Zu;return e.loadImage("resources/res/apes/monkey2.png"),this.box2D.addChild(e),e}};wi=o([$u("oZH-8C9FTuaxcKlebggGcw")],wi);var ey=Laya.Sprite,ty=Laya.GlowFilter,{regClass:ay,property:OM}=Laya,bi=class extends h{constructor(){super();this.apePath="resources/res/apes/monkey2.png"}onAwake(){super.base(),Laya.loader.load(this.apePath).then(e=>{this.setup(e)})}setup(e){this.createApe(),this.applayFilter()}createApe(){this.ape=new ey,this.ape.loadImage(this.apePath);var e=Laya.loader.getRes(this.apePath);this.ape.x=(this.pageWidth-e.width)/2,this.ape.y=(this.pageHeight-e.height)/2,this.box2D.addChild(this.ape)}applayFilter(){var e=new ty("#ffff00",10,0,0);this.ape.filters=[e]}};bi=o([ay("MkWuN1tPQXiQHUsigAu4Sg")],bi);var ry=Laya.Sprite,iy=Laya.Event,oy=Laya.Tween,sy=Laya.Ease,{regClass:ny,property:GM}=Laya,Me=class extends h{constructor(){super()}onAwake(){super.base(),this.createSprite()}createSprite(){this.sp=new ry,this.sp.graphics.drawRect(0,0,200,200,"#D2691E"),this.sp.anchorX=.5,this.sp.anchorY=.5,this.sp.x=this.pageWidth/2,this.sp.y=this.pageHeight/2,this.sp.size(200,200),this.box2D.addChild(this.sp),this.sp.on(Me.ROTATE,this,this.onRotate),this.sp.on(iy.CLICK,this,this.onSpriteClick)}onSpriteClick(e=null){var t=Math.random()*180;this.sp.event(Me.ROTATE,[t])}onRotate(e){oy.to(this.sp,{rotation:e},1e3,sy.elasticOut)}};Me.ROTATE="rotate",Me=o([ny("Q0j0OCRDRMW1bm__7SERCg")],Me);var hy=Laya.Sprite,Kl=Laya.Event,ly=Laya.Rectangle,{regClass:py,property:KM}=Laya,Mi=class extends h{constructor(){super();this.ApePath="resources/res/apes/monkey2.png"}onAwake(){super.base(),Laya.loader.load(this.ApePath).then(()=>{this.setup()})}setup(e=null){this.createApe(),this.showDragRegion()}createApe(){this.ape=new hy,this.ape.loadImage(this.ApePath),this.box2D.addChild(this.ape);var e=Laya.loader.getRes(this.ApePath);this.ape.pivot(e.width/2,e.height/2),this.ape.x=this.pageWidth/2,this.ape.y=this.pageHeight/2,this.ape.on(Kl.MOUSE_DOWN,this,this.onStartDrag)}showDragRegion(){var e=350,t=200;this.dragRegion=new ly(this.pageWidth-e>>1,this.pageHeight-t>>1,e,t),this.box2D.graphics.drawRect(this.dragRegion.x,this.dragRegion.y,this.dragRegion.width,this.dragRegion.height,null,"#FFFFFF",2)}onStartDrag(e=null){this.ape.startDrag(this.dragRegion,!0,100)}onDestroy(){this.ape&&this.ape.off(Kl.MOUSE_DOWN,this,this.onStartDrag)}};Mi=o([py("lTEz83EISMmzj_hReDodIw")],Mi);var gn=Laya.Sprite,xr=Laya.Event,dy=Laya.Text,{regClass:cy,property:qM}=Laya,Ti=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){this.buildWorld(),this.createLogger()}buildWorld(){this.createCoralRect(),this.createDeepSkyblueRect(),this.createDarkOrchidRect(),this.box2D.on(xr.MOUSE_DOWN,this,this.onDown)}createCoralRect(){var e=new gn;e.graphics.drawRect(0,0,this.pageWidth,this.pageHeight/2,"#FF7F50"),e.name="\u73CA\u745A\u8272\u5BB9\u5668",e.size(this.pageWidth,this.pageHeight/2),this.box2D.addChild(e),e.on(xr.MOUSE_DOWN,this,this.onDown)}createDeepSkyblueRect(){var e=new gn;e.graphics.drawRect(0,0,100,100,"#00BFFF"),e.name="\u5929\u84DD\u8272\u77E9\u5F62",e.size(100,100),e.pos(10,10),this.box2D.addChild(e),e.on(xr.MOUSE_DOWN,this,this.onDown)}createDarkOrchidRect(){var e=new gn;e.name="\u6697\u7D2B\u8272\u77E9\u5F62\u5BB9\u5668",e.graphics.drawRect(-100,-100,200,200,"#9932CC"),e.pos(this.pageWidth/2,this.pageHeight/2),this.box2D.addChild(e),e.mouseThrough=!0,e.on(xr.MOUSE_DOWN,this,this.onDown)}createLogger(){this.logger=new dy,this.logger.size(this.pageWidth,this.pageHeight),this.logger.align="right",this.logger.fontSize=20,this.logger.color="#FFFFFF",this.box2D.addChild(this.logger)}onDown(e=null){this.logger.text+="\u70B9\u51FB - "+e.target.name+`
`}onDestroy(){this.box2D.off(xr.MOUSE_DOWN,this,this.onDown)}};Ti=o([cy("YKPK-Kr2S6Ow6eVoQxWlNw")],Ti);var my=Laya.Sprite,fr=Laya.Event,uy=Laya.Ease,Ql=Laya.Tween,{regClass:yy,property:t3}=Laya,Ei=class extends h{constructor(){super();this.HOLD_TRIGGER_TIME=1e3;this.apePath="resources/res/apes/monkey2.png"}onAwake(){this.base(),Laya.loader.load(this.apePath).then(()=>{this.createApe()})}createApe(e=null){this.ape=new my,this.ape.loadImage(this.apePath);var t=Laya.loader.getRes(this.apePath);this.ape.pivot(t.width/2,t.height/2),this.ape.pos(this.pageWidth/2,this.pageHeight/2),this.ape.scale(.8,.8),this.box2D.addChild(this.ape),this.ape.on(fr.MOUSE_DOWN,this,this.onApePress)}onApePress(e=null){Laya.timer.once(this.HOLD_TRIGGER_TIME,this,this.onHold),this.box2D.on(fr.MOUSE_UP,this,this.onApeRelease)}onHold(e=null){Ql.to(this.ape,{scaleX:1,scaleY:1},500,uy.bounceOut),this.isApeHold=!0}onApeRelease(e=null){this.isApeHold?(this.isApeHold=!1,Ql.to(this.ape,{scaleX:.8,scaleY:.8},300)):Laya.timer.clear(this,this.onHold),this.box2D.off(fr.MOUSE_UP,this,this.onApeRelease)}onDestroy(){this.ape&&this.ape.off(fr.MOUSE_DOWN,this,this.onApePress),Laya.timer.clear(this,this.onHold),this.box2D.off(fr.MOUSE_UP,this,this.onApeRelease)}};Ei=o([yy("51C7ozfLR4aC5BtlY6LjOg")],Ei);var Ri=Laya.Event,Ly=Laya.Text,{regClass:gy,property:o3}=Laya,Ai=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){this.listenKeyboard(),this.createLogger(),Laya.timer.frameLoop(1,this,this.keyboardInspector)}listenKeyboard(){this.keyDownList=[],Laya.stage.on(Ri.KEY_DOWN,this,this.onKeyDown),Laya.stage.on(Ri.KEY_UP,this,this.onKeyUp)}onKeyDown(e=null){this.keyDownList[e.keyCode]=!0}onKeyUp(e=null){delete this.keyDownList[e.keyCode]}keyboardInspector(e=null){for(var t=this.keyDownList.length,a="[ ",i=0;i<t;i++)this.keyDownList[i]&&(a+=i+" ");a+="]",this.logger.changeText(a)}createLogger(){this.logger=new Ly,this.logger.size(this.pageWidth,this.pageHeight),this.logger.fontSize=30,this.logger.font="SimHei",this.logger.wordWrap=!0,this.logger.color="#FFFFFF",this.logger.align="center",this.logger.valign="middle",this.box2D.addChild(this.logger)}onDestroy(){Laya.timer.clear(this,this.keyboardInspector),this.box2D.off(Ri.KEY_DOWN,this,this.onKeyDown),this.box2D.off(Ri.KEY_UP,this,this.onKeyUp)}};Ai=o([gy("q89OHTT-RsqvbFkx3p8Dug")],Ai);var vy=Laya.Sprite,B=Laya.Event,Jl=Laya.Text,{regClass:Sy,property:l3}=Laya,Bi=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){this.createInteractiveTarget(),this.createLogger()}createInteractiveTarget(){var e=new vy;e.graphics.drawRect(0,0,200,200,"#D2691E"),e.size(200,200),e.x=(this.pageWidth-200)/2,e.y=(this.pageHeight-200)/2,this.box2D.addChild(e),e.on(B.MOUSE_DOWN,this,this.mouseHandler),e.on(B.MOUSE_UP,this,this.mouseHandler),e.on(B.RIGHT_MOUSE_DOWN,this,this.mouseHandler),e.on(B.RIGHT_MOUSE_UP,this,this.mouseHandler),e.on(B.CLICK,this,this.mouseHandler),e.on(B.RIGHT_CLICK,this,this.mouseHandler),e.on(B.MOUSE_MOVE,this,this.mouseHandler),e.on(B.MOUSE_OVER,this,this.mouseHandler),e.on(B.MOUSE_OUT,this,this.mouseHandler),e.on(B.DOUBLE_CLICK,this,this.mouseHandler),e.on(B.MOUSE_WHEEL,this,this.mouseHandler)}mouseHandler(e=null){switch(e.type){case B.MOUSE_DOWN:this.appendText(`
\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014
\u5DE6\u952E\u6309\u4E0B`);break;case B.MOUSE_UP:this.appendText(`
\u5DE6\u952E\u62AC\u8D77`);break;case B.CLICK:this.appendText(`
\u5DE6\u952E\u70B9\u51FB
\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014`);break;case B.RIGHT_MOUSE_DOWN:this.appendText(`
\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014
\u53F3\u952E\u6309\u4E0B`);break;case B.RIGHT_MOUSE_UP:this.appendText(`
\u53F3\u952E\u62AC\u8D77`);break;case B.RIGHT_CLICK:this.appendText(`
\u53F3\u952E\u5355\u51FB
\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014`);break;case B.MOUSE_MOVE:/\.*$/.test(this.txt.text)?this.appendText("."):this.appendText(`
\u9F20\u6807\u79FB\u52A8`);break;case B.MOUSE_OVER:this.appendText(`
\u9F20\u6807\u7ECF\u8FC7\u76EE\u6807`);break;case B.MOUSE_OUT:this.appendText(`
\u9F20\u6807\u79FB\u51FA\u76EE\u6807`);break;case B.DOUBLE_CLICK:this.appendText(`
\u9F20\u6807\u5DE6\u952E\u53CC\u51FB
\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014`);break;case B.MOUSE_WHEEL:this.appendText(`
\u9F20\u6807\u6EDA\u8F6E\u6EDA\u52A8`);break}}appendText(e){this.txt.text+=e,this.txt.scrollY=this.txt.maxScrollY}createLogger(){this.txt=new Jl,this.txt.overflow=Jl.SCROLL,this.txt.text=`\u8BF7\u628A\u9F20\u6807\u79FB\u5230\u5230\u77E9\u5F62\u65B9\u5757,\u5DE6\u53F3\u952E\u64CD\u4F5C\u89E6\u53D1\u76F8\u5E94\u4E8B\u4EF6
`,this.txt.size(this.pageWidth,this.pageHeight),this.txt.pos(10,50),this.txt.fontSize=20,this.txt.wordWrap=!0,this.txt.color="#FFFFFF",this.box2D.addChild(this.txt)}onDestroy(){}};Bi=o([Sy("q7i7Q8EXT6qfcJuPzvInNw")],Bi);var xy=Laya.Sprite,de=Laya.Event,{regClass:fy,property:m3}=Laya,Vi=class extends h{constructor(){super();this.preRadian=0}onAwake(){super.base(),this.setup()}setup(){this.createSprite(),this.box2D.on(de.MOUSE_UP,this,this.onMouseUp),this.box2D.on(de.MOUSE_OUT,this,this.onMouseUp)}createSprite(){this.sp=new xy;var e=200,t=300;this.sp.graphics.drawRect(0,0,e,t,"#FF7F50"),this.sp.size(e,t),this.sp.pivot(e/2,t/2),this.sp.pos(this.pageWidth/2,this.pageHeight/2),this.box2D.addChild(this.sp),this.sp.on(de.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e){let t=e.touches;t&&t.length==2&&(this.preRadian=Math.atan2(t[0].pos.y-t[1].pos.y,t[0].pos.x-t[1].pos.y),this.box2D.on(de.MOUSE_MOVE,this,this.onMouseMove))}onMouseMove(e){var t=e.touches;if(t&&t.length==2){var a=Math.atan2(t[0].pos.y-t[1].pos.y,t[0].pos.x-t[1].pos.x);this.sp.rotation+=180/Math.PI*(a-this.preRadian),this.preRadian=a}}onMouseUp(e){this.box2D.off(de.MOUSE_MOVE,this,this.onMouseMove)}onDestroy(){this.sp&&this.sp.off(de.MOUSE_DOWN,this,this.onMouseDown),this.box2D.off(de.MOUSE_UP,this,this.onMouseUp),this.box2D.off(de.MOUSE_OUT,this,this.onMouseUp),this.box2D.off(de.MOUSE_MOVE,this,this.onMouseMove)}};Vi=o([fy("AF7NBVJmR5uwOwWLYBor3A")],Vi);var Dy=Laya.Sprite,ce=Laya.Event,{regClass:Cy,property:g3}=Laya,_i=class extends h{constructor(){super();this.lastDistance=0}onAwake(){super.base(),this.setup()}setup(){this.createSprite(),this.box2D.on(ce.MOUSE_UP,this,this.onMouseUp),this.box2D.on(ce.MOUSE_OUT,this,this.onMouseUp)}createSprite(){this.sp=new Dy;var e=300,t=300;this.sp.graphics.drawRect(0,0,e,t,"#FF7F50"),this.sp.size(e,t),this.sp.pivot(e/2,t/2),this.sp.pos(this.pageWidth/2,this.pageHeight/2),this.box2D.addChild(this.sp),this.sp.on(ce.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e=null){var t=e.touches;t&&t.length==2&&(this.lastDistance=this.getDistance(t),this.box2D.on(ce.MOUSE_MOVE,this,this.onMouseMove))}onMouseMove(e=null){var t=this.getDistance(e.touches);let a=.01;this.sp.scaleX+=(t-this.lastDistance)*a,this.sp.scaleY+=(t-this.lastDistance)*a,this.lastDistance=t}onMouseUp(e=null){this.box2D.off(ce.MOUSE_MOVE,this,this.onMouseMove)}getDistance(e){var t=0;if(e&&e.length==2){var a=e[0].pos.x-e[1].pos.x,i=e[0].pos.y-e[1].pos.y;t=Math.sqrt(a*a+i*i)}return t}onDestroy(){this.sp&&this.sp.off(ce.MOUSE_DOWN,this,this.onMouseDown),this.box2D.off(ce.MOUSE_UP,this,this.onMouseUp),this.box2D.off(ce.MOUSE_OUT,this,this.onMouseUp),this.box2D.off(ce.MOUSE_MOVE,this,this.onMouseMove)}};_i=o([Cy("Sbw2-FweTqCYl-5zyW0gug")],_i);var jl=Laya.Sprite,Y=Laya.Event,wy=Laya.Tween,{regClass:by,property:f3}=Laya,Pi=class extends h{constructor(){super();this.TrackLength=200;this.TOGGLE_DIST=this.TrackLength/2}onAwake(){super.base(),this.setup()}setup(){this.createSprtie(),this.drawTrack()}createSprtie(){this.button=new jl,this.button.graphics.drawRect(0,0,50,30,"#FF7F50"),this.button.anchorX=.5,this.button.anchorY=.5,this.button.size(50,30),this.button.x=(this.pageWidth-this.TrackLength)/2,this.button.y=this.pageHeight/2,this.button.on(Y.MOUSE_DOWN,this,this.onMouseDown),this.box2D.addChild(this.button),this.beginPosition=this.button.x,this.endPosition=this.beginPosition+this.TrackLength}drawTrack(){var e=new jl;this.box2D.graphics.drawLine(this.beginPosition,this.pageHeight/2,this.endPosition,this.pageHeight/2,"#FFFFFF",20),this.box2D.addChild(e)}onMouseDown(e=null){this.box2D.on(Y.MOUSE_MOVE,this,this.onMouseMove),this.buttonPosition=this.button.x,this.box2D.on(Y.MOUSE_UP,this,this.onMouseUp),this.box2D.on(Y.MOUSE_OUT,this,this.onMouseUp)}onMouseMove(e=null){this.button.x=Math.max(Math.min(this.box2D.mouseX,this.endPosition),this.beginPosition)}onMouseUp(e=null){this.box2D.off(Y.MOUSE_MOVE,this,this.onMouseMove),this.box2D.off(Y.MOUSE_UP,this,this.onMouseUp),this.box2D.off(Y.MOUSE_OUT,this,this.onMouseUp);var t=this.box2D.mouseX-this.buttonPosition,a=this.beginPosition;t>this.TOGGLE_DIST&&(a=this.endPosition),wy.to(this.button,{x:a},100)}onDestroy(){this.button&&this.button.off(Y.MOUSE_DOWN,this,this.onMouseDown),this.box2D.off(Y.MOUSE_MOVE,this,this.onMouseMove),this.box2D.off(Y.MOUSE_UP,this,this.onMouseUp),this.box2D.off(Y.MOUSE_OUT,this,this.onMouseUp),this.box2D.graphics.clear()}};Pi=o([by("c2_eQcP_TJK440Pq1xTEmQ")],Pi);var My=Laya.Animation,ql=Laya.Sprite,Ty=Laya.Event,Ey=Laya.Text,{regClass:Ry,property:b3}=Laya,ki=class extends h{constructor(){super();this.isDestroyed=!1;this.PathBg="resources/res/bg2.png";this.PathFly="resources/res/fighter/fighter.atlas"}onAwake(){super.base(),this.init()}init(){this.spBg=ql.fromImage(this.PathBg),this.box2D.addChild(this.spBg),this.aniFly=new My,this.aniFly.loadAtlas(this.PathFly),this.aniFly.play(),this.aniFly.pos(250,100),this.box2D.addChild(this.aniFly),this.btn=new ql().size(205,55),this.btn.graphics.drawRect(0,0,this.btn.width,this.btn.height,"#057AFB"),this.txt=new Ey,this.txt.text="\u9500\u6BC1",this.txt.pos(75,15),this.txt.fontSize=25,this.txt.color="#FF0000",this.btn.addChild(this.txt),this.btn.pos(20,160),this.btn.mouseEnabled=!0,this.btn.name="btnBg",this.owner.addChild(this.btn),this.btn.on(Ty.MOUSE_UP,this,this.onMouseUp1)}onMouseUp1(e){this.isDestroyed?(this.spBg.visible=!0,this.aniFly.visible=!0,this.isDestroyed=!1,this.txt.text="\u9500\u6BC1"):(this.spBg.visible=!1,this.aniFly.visible=!1,Laya.loader.clearTextureRes(this.PathBg),Laya.loader.clearTextureRes(this.PathFly),this.isDestroyed=!0,this.txt.text="\u6062\u590D")}};ki=o([Ry("ySDM7k5cRu-UjZOG0tCUlw")],ki);var Fi=Laya.Loader,{regClass:Ay,property:R3}=Laya,Ii=class extends h{constructor(){super();this.ROBOT_DATA_PATH="resources/res/skeleton/robot/robot.bin";this.ROBOT_TEXTURE_PATH="resources/res/skeleton/robot/texture.png"}onAwake(){super.base();var e=[];e.push({url:this.ROBOT_DATA_PATH,type:Fi.BUFFER}),e.push({url:this.ROBOT_TEXTURE_PATH,type:Fi.IMAGE}),Laya.loader.load(e).then(()=>{this.onAssetsLoaded()})}onAssetsLoaded(e=null){var t=Fi.getRes(this.ROBOT_DATA_PATH),a=Fi.getRes(this.ROBOT_TEXTURE_PATH)}};Ii=o([Ay("UKV2NPdBTDe_NqDM6dCdoA")],Ii);var By=Laya.Event,Vy=Laya.Loader,{regClass:_y,property:_3}=Laya,Hi=class extends h{constructor(){super()}onAwake(){super.base(),Laya.loader.retryNum=0;var s=["do not exist","resources/res/fighter/fighter.png","resources/res/legend/map.jpg"];Laya.loader.load(s,Vy.IMAGE,this.onLoading).then(()=>{this.onAssetLoaded()}),Laya.loader.on(By.ERROR,this,this.onError)}onAssetLoaded(){console.log("\u52A0\u8F7D\u7ED3\u675F")}onLoading(s){console.log("\u52A0\u8F7D\u8FDB\u5EA6: "+s)}onError(s){console.log("\u52A0\u8F7D\u5931\u8D25: "+s)}};Hi=o([_y("uURjddYsQcmalDk0_hxOaA")],Hi);var vn=Laya.Handler,{regClass:Py,property:I3}=Laya,Oi=class extends h{constructor(){super();this.numLoaded=0;this.resAmount=3}onAwake(){super.base(),Laya.loader.maxLoader=1,Laya.loader.load("resources/res/apes/monkey2.png",vn.create(this,this.onAssetLoaded),null,null,0,!1),Laya.loader.load("resources/res/apes/monkey1.png",vn.create(this,this.onAssetLoaded),null,null,1,!1),Laya.loader.load("resources/res/apes/monkey0.png",vn.create(this,this.onAssetLoaded),null,null,2,!1)}onAssetLoaded(e){++this.numLoaded==3&&(Laya.loader.maxLoader=5,console.log("All done."))}};Oi=o([Py("nhMTIVdTSvK64hL7pQxgvg")],Oi);var Sn=Laya.Loader,{regClass:ky,property:U3}=Laya,Ni=class extends h{constructor(){super()}onAwake(){super.base(),Laya.loader.load("resources/res/apes/monkey0.png").then(s=>{this.onAssetLoaded1(s)}),Laya.loader.load(["resources/res/apes/monkey0.png","resources/res/apes/monkey1.png","resources/res/apes/monkey2.png"]).then(()=>{this.onAssetLoaded2()})}onAssetLoaded1(s){}onAssetLoaded2(){var s=Sn.getRes("resources/res/apes/monkey0.png"),e=Sn.getRes("resources/res/apes/monkey1.png"),t=Sn.getRes("resources/res/apes/monkey2.png")}};Ni=o([ky("lbNwREZHTumSBzb50wQ7KA")],Ni);var xn=Laya.Event,Fy=Laya.Text,Iy=Laya.HttpRequest,{regClass:Hy,property:X3}=Laya,Ui=class extends h{constructor(){super();this.text=new Laya.Label}onAwake(){super.base(),this.connect(),this.showLogger(),this.text.text="\u8BF7\u67E5\u770B\u6E90\u7801\u548C\u8C03\u8BD5\u4FE1\u606F\uFF0C\u4E86\u89E3\u5982\u4F55\u4F7F\u7528",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text)}connect(){this.hr=new Iy,this.hr.once(xn.PROGRESS,this,this.onHttpRequestProgress),this.hr.once(xn.COMPLETE,this,this.onHttpRequestComplete),this.hr.once(xn.ERROR,this,this.onHttpRequestError),this.hr.send("https://xkxz.zhonghao.huo.inner.layabox.com/",null,"get","text")}showLogger(){this.logger=new Fy,this.logger.fontSize=30,this.logger.color="#FFFFFF",this.logger.align="center",this.logger.valign="middle",this.logger.size(this.pageWidth,this.pageHeight),this.logger.text=`\u7B49\u5F85\u54CD\u5E94...
`,this.box2D.addChild(this.logger)}onHttpRequestError(e=null){console.log(e)}onHttpRequestProgress(e=null){console.log(e)}onHttpRequestComplete(e=null){this.logger.text+="\u6536\u5230\u6570\u636E\uFF1A"+this.hr.data}};Ui=o([Hy("ShfP7QX5T3uea49IvTW3SA")],Ui);var fn=Laya.Event,Oy=Laya.Text,Ny=Laya.HttpRequest,{regClass:Uy,property:J3}=Laya,Wi=class extends h{constructor(){super();this.text=new Laya.Label}onAwake(){super.base(),this.connect(),this.showLogger(),this.text.text="\u8BF7\u67E5\u770B\u6E90\u7801\u548C\u8C03\u8BD5\u4FE1\u606F\uFF0C\u4E86\u89E3\u5982\u4F55\u4F7F\u7528",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text)}connect(){this.hr=new Ny,this.hr.once(fn.PROGRESS,this,this.onHttpRequestProgress),this.hr.once(fn.COMPLETE,this,this.onHttpRequestComplete),this.hr.once(fn.ERROR,this,this.onHttpRequestError),this.hr.send("https://xkxz.zhonghao.huo.inner.layabox.com/","name=myname&psword=xxx","post","text")}showLogger(){this.logger=new Oy,this.logger.fontSize=30,this.logger.color="#FFFFFF",this.logger.align="center",this.logger.valign="middle",this.logger.size(this.pageWidth,this.pageHeight),this.logger.text=`\u7B49\u5F85\u54CD\u5E94...
`,this.box2D.addChild(this.logger)}onHttpRequestError(e=null){console.log(e)}onHttpRequestProgress(e=null){console.log(e)}onHttpRequestComplete(e=null){this.logger.text+="\u6536\u5230\u6570\u636E\uFF1A"+this.hr.data}};Wi=o([Uy("WiEkGSE0RB2WUtuX7pzFdQ")],Wi);var{regClass:Wy,property:$3}=Laya,Gi=class extends h{constructor(){super();this.ProtoBuf=window.protobuf;this.text=new Laya.Label}onAwake(){super.base();var e="resources/res/protobuf/awesome.proto";this.ProtoBuf.load(e,this.onAssetsLoaded),this.text.text="\u8BF7\u67E5\u770B\u6E90\u7801\u548C\u8C03\u8BD5\u4FE1\u606F\uFF0C\u4E86\u89E3\u5982\u4F55\u4F7F\u7528",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text)}onAssetsLoaded(e,t){if(e)throw e;var a=t.lookupType("awesomepackage.AwesomeMessage");console.log(a);var i={awesomeField:"AwesomeString"};console.log(i);var r=a.verify(i);if(r)throw Error(r);var n=a.create(i);console.log(n);var l=a.encode(n).finish();console.log(n),console.log(l)}};Gi=o([Wy("mFgKwzVzQ--Uhcf1BnFdGw")],Gi);var Gy=Laya.Byte,zi=Laya.Event,zy=Laya.Socket,{regClass:Xy,property:r1}=Laya,Xi=class extends h{constructor(){super();this.text=new Laya.Label}onAwake(){super.base(),this.connect(),this.text.text="\u8BF7\u67E5\u770B\u6E90\u7801\u548C\u8C03\u8BD5\u4FE1\u606F\uFF0C\u4E86\u89E3\u5982\u4F55\u4F7F\u7528",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text)}connect(){this.socket=new zy,this.socket.connectByUrl("wss://echo.websocket.org:80"),this.output=this.socket.output,this.socket.on(zi.OPEN,this,this.onSocketOpen),this.socket.on(zi.CLOSE,this,this.onSocketClose),this.socket.on(zi.MESSAGE,this,this.onMessageReveived),this.socket.on(zi.ERROR,this,this.onConnectError)}onSocketOpen(e=null){console.log("Connected"),this.socket.send("demonstrate <sendString>");for(var t="demonstrate <output.writeByte>",a=0;a<t.length;++a)this.output.writeByte(t.charCodeAt(a));this.socket.flush()}onSocketClose(e=null){console.log("Socket closed")}onMessageReveived(e=null){console.log("Message from server:"),typeof e=="string"?console.log(e):e instanceof ArrayBuffer&&console.log(new Gy(e).readUTFBytes()),this.socket.input.clear()}onConnectError(e=null){console.log("error")}};Xi=o([Xy("ui5qvJY2Que7sewAd6WNwQ")],Xi);var Yy=Laya.XML,{regClass:Ky,property:n1}=Laya,Yi=class extends h{constructor(){super();this.text=new Laya.Label}onAwake(){super.base(),this.setup(),this.text.text="\u8BF7\u67E5\u770B\u6E90\u7801\u548C\u8C03\u8BD5\u4FE1\u606F\uFF0C\u4E86\u89E3\u5982\u4F55\u4F7F\u7528",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text)}setup(){var e="<root><item>item a</item><item>item b</item>somethis...</root1>",t="<root><item>item a</item><item>item b</item>somethings...</root>";this.proessXML(e),console.log(`
`),this.proessXML(t)}proessXML(e){try{var t=new Yy(e)}catch(a){return}this.printDirectChildren(t)}printDirectChildren(e){for(var t=e.elements(),a=0;a<t.length;a++){var i=t[a];console.log("\u8282\u70B9\u540D\u79F0: "+i.name),console.log(`
`)}}};Yi=o([Ky("0NqqJQL9RTSCV7cTQuWvkw")],Yi);var Qy=Laya.Sprite,Jy=Laya.Event,jy=Laya.Text,{regClass:qy,property:d1}=Laya,Ki=class extends h{constructor(){super();this.starCount=2500;this.sx=1+Math.random()/20;this.sy=1+Math.random()/20;this.stars=[];this.w=this.pageWidth;this.h=this.pageHeight;this.slideX=this.w/2;this.slideY=this.h/2}onAwake(){super.base(),this.createText(),this.start(),this.box2D.on(Jy.RESIZE,this,this.resize)}start(){for(var e=0;e<this.starCount;e++){var t=new Qy;t.loadImage("resources/res/pixi/bubble_32x32.png"),t.x=Math.random()*this.w-this.slideX,t.y=Math.random()*this.h-this.slideY,t.pivot(16,16),this.stars.push({sprite:t,x:t.x,y:t.y}),this.box2D.addChild(t)}this.box2D.on(Laya.Event.CLICK,this,this.newWave),this.speedInfo.text="SX: "+this.sx+`
SY: `+this.sy,this.resize(),Laya.timer.frameLoop(1,this,this.update)}createText(){this.speedInfo=new jy,this.speedInfo.color="#FFFFFF",this.speedInfo.pos(this.w-160,20),this.speedInfo.zOrder=1,this.box2D.addChild(this.speedInfo)}newWave(){this.sx=1+Math.random()/20,this.sy=1+Math.random()/20,this.speedInfo.text="SX: "+this.sx+`
SY: `+this.sy}resize(){this.w=this.pageWidth,this.h=this.pageHeight,this.slideX=this.w/2,this.slideY=this.h/2}update(){for(var e=0;e<this.starCount;e++)this.stars[e].sprite.x=this.stars[e].x+this.slideX,this.stars[e].sprite.y=this.stars[e].y+this.slideY,this.stars[e].x=this.stars[e].x*this.sx,this.stars[e].y=this.stars[e].y*this.sy,this.stars[e].x>this.w?this.stars[e].x=this.stars[e].x-this.w:this.stars[e].x<-this.w&&(this.stars[e].x=this.stars[e].x+this.w),this.stars[e].y>this.h?this.stars[e].y=this.stars[e].y-this.h:this.stars[e].y<-this.h&&(this.stars[e].y=this.stars[e].y+this.h)}onDestroy(){this.box2D.off(Laya.Event.CLICK,this,this.newWave),Laya.timer.clear(this,this.update)}};Ki=o([qy("kvn22L5jTKWGuy7Rtb5jxw")],Ki);var Zy=Laya.Sprite,$y=Laya.Event,{regClass:e0,property:y1}=Laya,Qi=class extends h{constructor(){super();this.n=2e3;this.d=1;this.current=0;this.objs=17;this.vx=0;this.vy=0;this.vz=0;this.points1=[];this.points2=[];this.points3=[];this.tpoint1=[];this.tpoint2=[];this.tpoint3=[];this.balls=[]}onAwake(){super.base(),this.setup()}setup(){this.box2D.on($y.RESIZE,this,this.onResize),this.makeObject(0);for(var e=0;e<this.n;e++){this.tpoint1[e]=this.points1[e],this.tpoint2[e]=this.points2[e],this.tpoint3[e]=this.points3[e];var t=new Zy;t.loadImage("resources/res/pixi/pixel.png"),t.pivot(3,3),t.alpha=.5,this.balls[e]=t,this.box2D.addChild(t)}this.onResize(),Laya.timer.loop(5e3,this,this.nextObject),Laya.timer.frameLoop(1,this,this.update)}nextObject(){this.current++,this.current>this.objs&&(this.current=0),this.makeObject(this.current)}makeObject(e){var t,a;switch(e){case 0:for(a=0;a<this.n;a++)this.points1[a]=-50+Math.round(Math.random()*100),this.points2[a]=0,this.points3[a]=0;break;case 1:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(e*360/this.n)*10),this.points2[a]=Math.cos(t)*10*(Math.sin(e*360/this.n)*10),this.points3[a]=Math.sin(t)*100;break;case 2:for(a=0;a<this.n;a++)t=-90+Math.random()*180,this.points1[a]=Math.cos(t)*10*(Math.cos(e*360/this.n)*10),this.points2[a]=Math.cos(t)*10*(Math.sin(e*360/this.n)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 3:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(t)*10),this.points2[a]=Math.cos(t)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(t)*100;break;case 4:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(t)*10),this.points2[a]=Math.cos(t)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 5:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(t)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 6:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(a*360/this.n)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 7:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(a*360/this.n)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(a*360/this.n)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 8:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(a*360/this.n)*10),this.points3[a]=Math.sin(t)*100;break;case 9:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(t)*100;break;case 10:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(a*360/this.n)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.cos(t)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 11:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.sin(t)*10*(Math.sin(a*360/this.n)*10),this.points3[a]=Math.sin(t)*100;break;case 12:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(t)*10),this.points2[a]=Math.sin(t)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 13:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.sin(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 14:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.sin(t)*10*(Math.cos(t)*10),this.points2[a]=Math.sin(t)*10*(Math.sin(a*360/this.n)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 15:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(a*360/this.n)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.sin(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break;case 16:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(a*360/this.n)*10),this.points2[a]=Math.sin(a*360/this.n)*10*(Math.sin(t)*10),this.points3[a]=Math.sin(t)*100;break;case 17:for(a=0;a<this.n;a++)t=-90+Math.round(Math.random()*180),this.points1[a]=Math.cos(t)*10*(Math.cos(t)*10),this.points2[a]=Math.cos(a*360/this.n)*10*(Math.sin(a*360/this.n)*10),this.points3[a]=Math.sin(a*360/this.n)*100;break}}onResize(){}update(){var e,t,a,i,r,n,l;this.d<200&&this.d++,this.vx+=.0075,this.vy+=.0075,this.vz+=.0075;for(var d=0;d<this.n;d++)this.points1[d]>this.tpoint1[d]&&(this.tpoint1[d]=this.tpoint1[d]+1),this.points1[d]<this.tpoint1[d]&&(this.tpoint1[d]=this.tpoint1[d]-1),this.points2[d]>this.tpoint2[d]&&(this.tpoint2[d]=this.tpoint2[d]+1),this.points2[d]<this.tpoint2[d]&&(this.tpoint2[d]=this.tpoint2[d]-1),this.points3[d]>this.tpoint3[d]&&(this.tpoint3[d]=this.tpoint3[d]+1),this.points3[d]<this.tpoint3[d]&&(this.tpoint3[d]=this.tpoint3[d]-1),e=this.tpoint1[d],t=this.tpoint2[d],a=this.tpoint3[d],r=t*Math.cos(this.vx)-a*Math.sin(this.vx),n=t*Math.sin(this.vx)+a*Math.cos(this.vx),i=e*Math.cos(this.vy)-n*Math.sin(this.vy),n=e*Math.sin(this.vy)+n*Math.cos(this.vy),l=i,i=i*Math.cos(this.vz)-r*Math.sin(this.vz),r=l*Math.sin(this.vz)+r*Math.cos(this.vz),this.balls[d].x=512*i/(this.d-n)+this.box2D.width/2,this.balls[d].y=this.box2D.height/2-512*r/(this.d-n)}onDestroy(){Laya.timer.clear(this,this.nextObject),Laya.timer.clear(this,this.update)}};Qi=o([e0("YPFgUrVMRhiHtIvB2_ssDw")],Qi);var Zl=Laya.Sprite,{regClass:t0,property:S1}=Laya,Ji=class extends h{constructor(){super();this.colors=["#5D0776","#EC8A49","#AF3666","#F6C84C","#4C779A"];this.colorCount=0;this.isDown=!1;this.path=[];this.color=this.colors[0]}onAwake(){super.base(),this.createCanvases(),Laya.timer.frameLoop(1,this,this.animate)}createCanvases(){var e=new Zl;this.box2D.addChild(e);var t=new Zl;this.box2D.addChild(t),this.liveGraphics=t.graphics,this.canvasGraphics=e.graphics}onMouseDown(e=null){this.isDown=!0,this.color=this.colors[this.colorCount++%this.colors.length],this.path.length=0}onMouseMove(e=null){this.isDown&&(this.path.push(e.target.mouseX),this.path.push(e.target.mouseY))}onMouseUp(e=null){this.isDown=!1,this.canvasGraphics.drawPoly(0,0,this.path.concat(),this.color)}animate(){this.liveGraphics.clear(),this.liveGraphics.drawPoly(0,0,this.path,this.color)}onDestroy(){Laya.timer.clear(this,this.animate)}};Ji=o([t0("22qnXAvNRVOWom8cP2FC8w")],Ji);var a0=Laya.Sprite,ji=Laya.Point,{regClass:r0,property:C1}=Laya,qi=class extends h{constructor(){super();this.viewWidth=this.pageWidth;this.viewHeight=this.pageHeight;this.lasers=[];this.tick=0;this.frequency=80;this.type=0}onAwake(){super.base(),Laya.timer.frameLoop(1,this,this.animate)}animate(){if(this.tick>this.frequency){this.tick=0;var e=new Dn;e.loadImage("resources/res/pixi/laser0"+(this.type%5+1)+".png"),this.type++,e.life=0;var t,a;this.type%2?(t=new ji(-20,Math.random()*this.viewHeight),a=new ji(this.viewWidth,Math.random()*this.viewHeight+20)):(t=new ji(Math.random()*this.viewWidth,-20),a=new ji(Math.random()*this.viewWidth,this.viewHeight+20));var i=t.x-a.x,r=t.y-a.y,n=Math.sqrt(i*i+r*r)+40;e.scaleX=n/20,e.pos(t.x,t.y),e.pivotY=43/2,e.blendMode="lighter",e.rotation=(Math.atan2(r,i)+Math.PI)*180/Math.PI,this.lasers.push(e),this.box2D.addChild(e),this.frequency*=.9}for(var l=0;l<this.lasers.length;l++)e=this.lasers[l],e.life++,e.life>60*.3&&(e.alpha*=.9,e.scaleY=e.alpha,e.alpha<.01&&(this.lasers.splice(l,1),this.box2D.removeChild(e),l--));this.tick+=1}onDestroy(){Laya.timer.clear(this,this.animate)}};qi=o([r0("nBznGw8JT729qhJZytx5xg")],qi);var Dn=class extends a0{};var i0=Laya.Sprite,o0=Laya.Loader,{regClass:s0,property:T1}=Laya,Zi=class extends h{constructor(){super();this.colAmount=100;this.extraSpace=50;this.moveSpeed=2;this.rotateSpeed=2}onAwake(){super.base(),Laya.loader.load("resources/res/cartoonCharacters/cartoonCharactors.json",o0.ATLAS).then(()=>{this.createCharacters()})}createCharacters(e=null){this.characterGroup=[];for(var t=0;t<this.colAmount;++t){var a=(this.pageWidth+this.extraSpace*2)/this.colAmount*t-this.extraSpace,i=360/this.colAmount*t,r=(this.pageHeight-500)/2;this.createCharacter("cartoonCharactors/1.png",46,50,i).pos(a,50+r),this.createCharacter("cartoonCharactors/2.png",34,50,i).pos(a,150+r),this.createCharacter("cartoonCharactors/3.png",42,50,i).pos(a,250+r),this.createCharacter("cartoonCharactors/4.png",48,50,i).pos(a,350+r),this.createCharacter("cartoonCharactors/5.png",36,50,i).pos(a,450+r)}Laya.timer.frameLoop(1,this,this.animate)}createCharacter(e,t,a,i){var r=new i0;return r.loadImage(e),r.rotation=i,r.pivot(t,a),this.box2D.addChild(r),this.characterGroup.push(r),r}animate(){for(var e=this.characterGroup.length-1;e>=0;--e)this.animateCharactor(this.characterGroup[e])}animateCharactor(e){e.x+=this.moveSpeed,e.rotation+=this.rotateSpeed,e.x>this.pageWidth+this.extraSpace&&(e.x=-this.extraSpace)}onDestroy(){Laya.timer.clear(this,this.animate)}};Zi=o([s0("xJNxuzqlTmKb19za3jbEcQ")],Zi);var n0=Laya.Animation,$l=Laya.Sprite,h0=Laya.Stat,ep=Laya.Text,l0=Laya.Image,{regClass:p0,property:B1}=Laya,$i=class extends h{constructor(){super();this.amount=500;this.character1=["resources/res/cartoon2/yd-6_01.png","resources/res/cartoon2/yd-6_02.png","resources/res/cartoon2/yd-6_03.png","resources/res/cartoon2/yd-6_04.png","resources/res/cartoon2/yd-6_05.png","resources/res/cartoon2/yd-6_06.png","resources/res/cartoon2/yd-6_07.png","resources/res/cartoon2/yd-6_08.png"];this.character2=["resources/res/cartoon2/yd-3_01.png","resources/res/cartoon2/yd-3_02.png","resources/res/cartoon2/yd-3_03.png","resources/res/cartoon2/yd-3_04.png","resources/res/cartoon2/yd-3_05.png","resources/res/cartoon2/yd-3_06.png","resources/res/cartoon2/yd-3_07.png","resources/res/cartoon2/yd-3_08.png"];this.character3=["resources/res/cartoon2/yd-2_01.png","resources/res/cartoon2/yd-2_02.png","resources/res/cartoon2/yd-2_03.png","resources/res/cartoon2/yd-2_04.png","resources/res/cartoon2/yd-2_05.png","resources/res/cartoon2/yd-2_06.png","resources/res/cartoon2/yd-2_07.png","resources/res/cartoon2/yd-2_08.png"];this.character4=["resources/res/cartoon2/wyd-1_01.png","resources/res/cartoon2/wyd-1_02.png","resources/res/cartoon2/wyd-1_03.png","resources/res/cartoon2/wyd-1_04.png","resources/res/cartoon2/wyd-1_05.png","resources/res/cartoon2/wyd-1_06.png","resources/res/cartoon2/wyd-1_07.png","resources/res/cartoon2/wyd-1_08.png"];this.characterSkins=[this.character1,this.character2,this.character3,this.character4];this.characters=[]}onAwake(){super.base(),this.image=new l0,this.image.skin="resources/res/cartoon2/background.jpg",this.box2D.addChild(this.image),this.createCharacters(),this.text=new ep,this.text.zOrder=1e4,this.text.fontSize=60,this.text.color="#ff0000",this.box2D.addChild(this.text),Laya.timer.frameLoop(1,this,this.gameLoop)}createCharacters(){for(var e,t,a=0;a<this.amount;a++)t=this.characterSkins[Math.floor(Math.random()*this.characterSkins.length)],e=new Dr(t,this.pageWidth),e.x=Math.random()*(this.pageWidth+Dr.WIDTH*2),e.y=Math.random()*(this.pageHeight-Dr.HEIGHT),e.zOrder=e.y,e.setSpeed(Math.floor(Math.random()*2+3)),e.setName(a.toString()),this.box2D.addChild(e),this.characters.push(e)}gameLoop(){for(var e=this.characters.length-1;e>=0;e--)this.characters[e].update();Laya.timer.currFrame%60===0&&(this.text.text=h0.FPS.toString())}onDestroy(){Laya.timer.clear(this,this.gameLoop)}};$i=o([p0("3oxOQpf9QKSjYaaq8dXndg")],$i);var Oe=class Oe extends $l{constructor(e,t){super();this.speed=5;this.pageWidth=0;this.pageWidth=t,this.createAnimation(e),this.createBloodBar(),this.createNameLabel()}createAnimation(e){this.animation=new n0,this.animation.loadImages(e),this.animation.interval=70,this.animation.play(0),this.addChild(this.animation)}createBloodBar(){this.bloodBar=new $l,this.bloodBar.loadImage("resources/res/cartoon2/blood_1_r.png"),this.bloodBar.x=20,this.addChild(this.bloodBar)}createNameLabel(){this.nameLabel=new ep,this.nameLabel.color="#FFFFFF",this.nameLabel.text="Default",this.nameLabel.fontSize=13,this.nameLabel.width=Oe.WIDTH,this.nameLabel.align="center",this.addChild(this.nameLabel)}setSpeed(e){this.speed=e}setName(e){this.nameLabel.text=e}update(){this.x+=this.speed,this.x>=this.pageWidth+Oe.WIDTH&&(this.x=-Oe.WIDTH)}};Oe.WIDTH=110,Oe.HEIGHT=110;var Dr=Oe;var tp=Laya.Sprite,d0=Laya.Rectangle,{regClass:c0,property:k1}=Laya,eo=class extends h{constructor(){super();this.texturePath="resources/res/tinyMaggot.png";this.padding=100;this.maggotAmount=5e3;this.tick=0;this.maggots=[]}onAwake(){super.base(),this.wrapBounds=new d0(-this.padding,-this.padding,this.pageWidth+this.padding*2,this.pageHeight+this.padding*2),Laya.loader.load(this.texturePath).then(()=>{this.onTextureLoaded()})}onTextureLoaded(e=null){this.maggotTexture=Laya.loader.getRes(this.texturePath),this.initMaggots(),Laya.timer.frameLoop(1,this,this.animate)}initMaggots(){for(var e,t=0;t<this.maggotAmount;t++){t%16e3==0&&(e=this.createNewContainer());var a=this.newMaggot();e.addChild(a),this.maggots.push(a)}}createNewContainer(){var e=new tp;return e.size(this.pageWidth,this.pageHeight),this.box2D.addChild(e),e}newMaggot(){var e=new Cn;e.graphics.drawTexture(this.maggotTexture,0,0),e.pivot(16.5,35);var t=.8+Math.random()*.3;return e.scale(t,t),e.rotation=.1,e.x=Math.random()*this.pageWidth,e.y=Math.random()*this.pageHeight,e.direction=Math.random()*Math.PI,e.turningSpeed=Math.random()-.8,e.speed=(2+Math.random()*2)*.2,e.offset=Math.random()*100,e}animate(){for(var e,t=this.wrapBounds,a=180/Math.PI,i,r=0,n=0,l=0;l<this.maggotAmount;l++)e=this.maggots[l],e.scaleY=.9+Math.sin(this.tick+e.offset)*.1,e.direction+=e.turningSpeed*.01,i=e.direction,r=e.x,n=e.y,r+=Math.sin(i)*(e.speed*e.scaleY),n+=Math.cos(i)*(e.speed*e.scaleY),e.rotation=(-i+Math.PI)*a,r<t.x?r+=t.width:r>t.x+t.width&&(r-=t.width),n<t.y?n+=t.height:n>t.y+t.height&&(n-=t.height),e.pos(r,n);this.tick+=.1}onDestroy(){Laya.timer.clear(this,this.animate)}};eo=o([c0("YZOmilzWQb-0ngIhi9VbYA")],eo);var Cn=class extends tp{};var ap=Laya.Event,{regClass:m0,property:O1}=Laya,to=class extends h{constructor(){super();this.fileName="Dragon";this.rowCount=10;this.colCount=10;this.xOff=50;this.yOff=100;this.mAnimationArray=[];this.mActionIndex=0}onAwake(){super.base(),this.mSpacingX=this.pageWidth/this.colCount,this.mSpacingY=this.pageHeight/this.rowCount,Laya.loader.load("resources/res/skeleton/"+this.fileName+"/"+this.fileName+".sk").then(e=>{for(var t=0;t<this.rowCount;t++)for(var a=0;a<this.colCount;a++)this.mArmature=e.buildArmature(1),this.mArmature.x=this.xOff+a*this.mSpacingX,this.mArmature.y=this.yOff+t*this.mSpacingY,this.mAnimationArray.push(this.mArmature),this.mArmature.play(0,!0),this.mArmature.scale(.2,.2),this.box2D.addChild(this.mArmature);this.box2D.on(ap.CLICK,this,this.toggleAction)})}onDestroy(){this.box2D.off(ap.CLICK,this,this.toggleAction)}toggleAction(e=null){this.mActionIndex++;var t=this.mArmature.getAnimNum();this.mActionIndex>=t&&(this.mActionIndex=0);for(var a=0,i=this.mAnimationArray.length;a<i;a++)this.mAnimationArray[a].play(this.mActionIndex,!0)}};to=o([m0("KTGA3tgVQJ-eNH-3SDGR5Q")],to);var u0=Laya.BoxCollider,Ne=Laya.Sprite,rp=Laya.Event,Ue=Laya.RigidBody,y0=Laya.ChainCollider,L0=Laya.PolygonCollider,ip=Laya.CircleCollider,op=Laya.RevoluteJoint,g0=Laya.Label,{regClass:v0,property:G1}=Laya,ao=class extends h{constructor(){super();this.ecount=30;this.TempVec=new Laya.Vector2}onStart(){super.base(),Laya.Config.isAntialias=!0,Laya.Physics2D.I.start(),this.createBridge(),this.eventListener()}createBridge(){let a=new Ne,i=new Ue;i.type="static",a.addComponentInstance(i);let r=a.addComponent(y0);r.datas=[0,450,1024,450],this.box2D.addChild(a);let n=new Ne;this.box2D.addChild(n),n.pos(250,250);let l=new Ue;l.type="static",n.addComponentInstance(l);let d=l,c=20,u=2.5;for(let x=0;x<this.ecount;x++){let S=new Ne;this.box2D.addChild(S),S.pos(250+x*c,250);let T=S.addComponent(Ue),_=S.addComponent(u0);_.width=c,_.height=u,_.density=20,_.friction=.2,_.y=-u/2;let N=new op;N.otherBody=d,S.addComponentInstance(N),d=T}let m=new Ne;this.box2D.addChild(m),m.pos(250+this.ecount*c,250);let L=new Ue;L.type="static",m.addComponentInstance(L);let g=new op;g.otherBody=d,m.addComponentInstance(g);for(let x=0;x<2;x++){let S=new Ne;this.box2D.addChild(S),S.pos(350+100*x,200);let T=S.addComponent(Ue);T.bullet=!0;let _=S.addComponent(L0);_.datas=[-10,0,10,0,0,30],_.density=1}for(let x=0;x<2;x++){let S=new Ne;this.box2D.addChild(S),S.pos(400+150*x,200);let T=S.addComponent(Ue);T.bullet=!0;let _=S.addComponent(ip);_.radius=10}}eventListener(){this.box2D.on(rp.CLICK,this,()=>{let t=this.TempVec,a=300+Math.random()*400,i=300,r=new Ne;this.box2D.addChild(r);let n=r.addComponent(Ue);n.bullet=!0,n.type="dynamic";let l=r.addComponent(ip);l.radius=5,l.x=this.box2D.mouseX,l.y=this.box2D.mouseY,t.x=a-l.x,t.y=i-l.y,Laya.Vector2.normalize(t,t),Laya.Vector2.scale(t,25,t),n.linearVelocity=t.toArray(),Laya.timer.frameOnce(120,this,function(){r.destroy()})});let e=this.label=this.box2D.addChild(new g0("\u5355\u51FB\u5C4F\u5E55\u4EA7\u751F\u65B0\u7684\u5C0F\u7403\u521A\u4F53\uFF0C\u51FB\u5411bridge\u7684\u968F\u673A\u4F4D\u7F6E"));e.top=20,e.right=20,e.fontSize=16,e.color="#e69999"}onDisable(){this.box2D&&(this.box2D.offAll(rp.CLICK),this.box2D.removeChild(this.label),this.box2D=null),Laya.Physics2D.I.destroyWorld()}};ao=o([v0("7bhWluynSVSGvz2fLB5wrg")],ao);var sp=Laya.Sprite,ro=Laya.Event,Nt=Laya.RigidBody,S0=Laya.ChainCollider,x0=Laya.MouseJoint,np=Laya.CircleCollider,{regClass:f0,property:K1}=Laya,io=class extends h{constructor(){super();this.count=7;this.bodys=[];this.touching=[]}onStart(){super.base(),Laya.Config.isAntialias=!0,Laya.Physics2D.I.start(),this.createSensor()}createSensor(){let e=new sp;this.box2D.addChild(e);let t=new Nt;t.type="static",e.addComponentInstance(t);let a=e.addComponent(S0);a.datas=[50,300,50,440,1050,440,1050,300];let i=this.sensorCollider=e.addComponent(np);i.isSensor=!0,i.radius=100,i.x=450,i.y=150;for(let r=0,n=this.count;r<n;r++){let l=new sp;this.box2D.addChild(l),l.pos(370+r*50,50).size(40,40);let d=l.addComponent(Nt);this.bodys.push(d),this.touching[r]=!1,d.getBody().GetUserData().pointer=r;let c=l.addComponent(np);c.radius=20,l.addComponent(x0)}e.on(ro.TRIGGER_ENTER,this,this.onTriggerEnter),e.on(ro.TRIGGER_EXIT,this,this.onTriggerExit),Laya.physicsTimer.frameLoop(1,this,this.onTriggerStay)}onTriggerEnter(e,t,a){if(t===this.sensorCollider){let r=e.owner.getComponent(Nt).getBody().GetUserData().pointer;this.touching[r]=!0}}onTriggerStay(){let e=this.bodys,t;for(let a=0,i=this.count;a<i;a++){if(t=e[a],!this.touching[a])continue;let r=this.sensorCollider.owner.getComponent(Nt),n=t.owner.getComponent(Nt),l=n.getWorldCenter(),d=r.GetWorldPoint(this.sensorCollider.x,this.sensorCollider.y),c=d.x-l.x,u=d.y-l.y,m=new Laya.Vector2(c,u);Laya.Vector2.scalarLength(m)<1e-5||(Laya.Vector2.normalize(m,m),n.applyForce(l,{x:m.x*100,y:m.y*100}))}}onTriggerExit(e,t,a){if(t===this.sensorCollider){let r=e.owner.getComponent(Nt).getBody().GetUserData().pointer;this.touching[r]=!1}}onDisable(){if(this.sensorCollider){let e=this.sensorCollider.owner;e.off(ro.TRIGGER_ENTER,this,this.onTriggerEnter),e.off(ro.TRIGGER_EXIT,this,this.onTriggerExit),Laya.physicsTimer.clearAll(this),this.sensorCollider=null}Laya.Physics2D.I.destroyWorld()}};io=o([f0("_hU_blMcTVacZH6aysIhsQ")],io);var D0=Laya.BoxCollider,oo=Laya.Sprite,I=Laya.Event,Cr=Laya.RigidBody,C0=Laya.ChainCollider,hp=Laya.MouseJoint,w0=Laya.PolygonCollider,b0=Laya.CircleCollider,{regClass:M0,property:q1}=Laya,E=class extends h{constructor(){super();this.preMovementX=0;this.preMovementY=0}onStart(){super.base(),this.preMovementX=0,this.preMovementY=0,Laya.Config.isAntialias=!0,Laya.Physics2D.I.start(),this.createHouse();for(let e=1;e<=3;e++)this.createBox(300,300,20,20,e),this.createTriangle(500,300,20,e),this.createCircle(700,300,10,e)}createHouse(){let e=new oo;console.log(e.globalRotation),this.box2D.addChild(e);let t=e.addComponent(Cr);t.type="static";let a=e.addComponent(C0);a.loop=!0,a.datas=[450,0,0,200,0,450,1024,450,1024,200]}createBox(e,t,a,i,r){let n=new oo;n.on(I.MOUSE_DOWN,this,this.mouseDown),this.box2D.addChild(n),n.pos(e,t).size(a*r,i*r);let l=n.addComponent(Cr);l.category=E.k_boxCategory,l.mask=E.k_boxMask;let d=n.addComponent(D0);d.width=a*r,d.height=i*r,this.addGroup(l,r)}createTriangle(e,t,a,i){let r=new oo;r.on(I.MOUSE_DOWN,this,this.mouseDown),this.box2D.addChild(r),r.pos(e,t).size(a*i,a*i);let n=r.addComponent(Cr);n.category=E.k_triangleCategory,n.mask=E.k_triangleMask;let l=r.addComponent(w0);l.datas=[0,0,0,a*i,a*i,0],this.addGroup(n,i)}createCircle(e,t,a,i){let r=new oo;r.on(I.MOUSE_DOWN,this,this.mouseDown),this.box2D.addChild(r),r.pos(e,t).size(a*2*i,a*2*i),r.pivot(.5,.5);let n=r.addComponent(Cr);n.category=E.k_circleCategory,n.mask=E.k_circleMask;let l=r.addComponent(b0);l.radius=a*i,this.addGroup(n,i)}addGroup(e,t){switch(t){case 1:e.group=E.k_smallGroup;break;case 2:e.group=E.k_middleGroup;break;case 3:e.group=E.k_largeGroup;break}}mouseDown(e){this.curTarget=e.target;let t=this.curTarget.addComponent(hp);Laya.timer.callLater(t,t.onMouseDown),this.box2D.on(I.MOUSE_UP,this,this.destoryJoint),this.box2D.on(I.MOUSE_OUT,this,this.destoryJoint)}mouseMove(e){let t=e.nativeEvent.movementX,a=e.nativeEvent.movementY;this.preMovementX=t,this.preMovementY=a,this.curTarget.pos(this.box2D.mouseX,this.box2D.mouseY)}mouseUp(){this.box2D.off(I.MOUSE_MOVE,this,this.mouseMove),this.box2D.off(I.MOUSE_UP,this,this.mouseUp),this.box2D.off(I.MOUSE_OUT,this,this.mouseUp);let e=this.curTarget.getComponent(Cr);e.type="dynamic",e.linearVelocity=[this.preMovementX,this.preMovementY],this.curTarget=null}destoryJoint(){this.box2D.off(I.MOUSE_UP,this,this.destoryJoint),this.box2D.off(I.MOUSE_OUT,this,this.destoryJoint),this.curTarget.getComponent(hp).destroy(),this.curTarget=null}onDisable(){this.box2D&&(this.box2D.off(I.MOUSE_MOVE,this,this.mouseMove),this.box2D.off(I.MOUSE_UP,this,this.mouseUp),this.box2D.off(I.MOUSE_OUT,this,this.mouseUp),this.box2D.off(I.MOUSE_UP,this,this.destoryJoint),this.box2D.off(I.MOUSE_OUT,this,this.destoryJoint),this.box2D=null),Laya.Physics2D.I.destroyWorld()}};E.k_smallGroup=1,E.k_middleGroup=0,E.k_largeGroup=-1,E.k_triangleCategory=2,E.k_boxCategory=4,E.k_circleCategory=8,E.k_triangleMask=15,E.k_boxMask=15^E.k_circleCategory,E.k_circleMask=E.k_triangleCategory|E.k_boxCategory|1,E=o([M0("zrtTgw6WRQaNzid4oHqBhA")],E);var T0=Laya.BoxCollider,We=Laya.Sprite,so=Laya.Event,me=Laya.RigidBody,E0=Laya.ChainCollider,lp=Laya.RevoluteJoint,wn=Laya.CircleCollider,pp=Laya.PolygonCollider,no=Laya.DistanceJoint,R0=Laya.Label,{regClass:A0,property:tT}=Laya,ho=class extends h{constructor(){super();this.scale=2.5;this.pos=[500,200];this.m_offset=[30*this.scale,0];this.pivot=[0,8*this.scale];this.TempVec=new Laya.Vector2;this.drawFlags=["Shape","Joint","AABB","Pair","CenterOfMass"]}onStart(){super.base(),Laya.Config.isAntialias=!0,Laya.Physics2D.I.start(),this.Construct(),this.eventListener()}Construct(){let e=new We;this.box2D.addChild(e);let t=new me;t.type="static",e.addComponentInstance(t);let a=new E0;a.datas=[50,200,50,400,1050,400,1050,200],e.addComponentInstance(a);for(let L=1;L<=32;L++){let g=new We;g.pos(L*30+50,400-5*this.scale),this.box2D.addChild(g);let x=g.addComponent(me),S=g.addComponent(wn);S.radius=2.5*this.scale}let i=this.chassis=new We;i.size(50*this.scale,20*this.scale),i.anchorX=i.anchorY=.5,i.pos(this.pos[0],this.pos[1]),this.box2D.addChild(i);let r=i.addComponent(me);r.group=-1;let n=i.addComponent(T0);n.density=1,n.width=50*this.scale,n.height=20*this.scale;let l=this.wheel=new We;l.width=l.height=2*16*this.scale,l.anchorX=l.anchorY=.5,l.pos(i.x,i.y),this.box2D.addChild(l);let d=l.addComponent(me);d.group=-1;let c=l.addComponent(wn);c.density=1,c.radius=16*this.scale;let u=this.motorJoint=new lp;u.otherBody=r,u.collideConnected=!1,u.motorSpeed=2,u.maxMotorTorque=400,u.enableMotor=!0,l.addComponentInstance(u);let m=[0,this.pivot[1]];this.createLeg(-1,m,0),this.createLeg(1,m,0),this.createLeg(-1,m,120*Math.PI/180),this.createLeg(1,m,120*Math.PI/180),this.createLeg(-1,m,-120*Math.PI/180),this.createLeg(1,m,-120*Math.PI/180)}getDistance(e,t,a,i){let r=e.GetWorldPoint(t[0],t[1]),n=r.x,l=r.y;return r=a.GetWorldPoint(i[0],i[1]),Math.sqrt(Math.pow(r.x-n,2)+Math.pow(r.y-l,2))}getNewPoint(e,t){let a=Math.cos(e),i=Math.sin(e),r=a*t[0]-i*t[1],n=i*t[0]+a*t[1];return[r,n]}createLeg(e,t,a){let i=this.wheel.getComponent(me),r=this.chassis.getComponent(me),n=[54*e*this.scale,-61*-1*this.scale],l=[72*e*this.scale,-12*-1*this.scale],d=[43*e*this.scale,-19*-1*this.scale],c=[31*e*this.scale,8*-1*this.scale],u=[60*e*this.scale,15*-1*this.scale],m=[25*e*this.scale,37*-1*this.scale],L=new We;L.pos(this.chassis.x,this.chassis.y+16*this.scale),this.box2D.addChild(L);let g=L.addComponent(me);g.angularDamping=10,g.group=-1;let x=L.addComponent(pp);x.density=1;let S=new We;S.pos(this.chassis.x+c[0]+this.pivot[0],this.chassis.y+c[1]+this.pivot[1]),this.box2D.addChild(S);let T=S.addComponent(me);T.angularDamping=10,T.group=-1;let _=S.addComponent(pp);_.density=1,e>0?(x.datas=n.concat(l).concat(d),_.datas=[0,0].concat(ue.SubVV(u,c)).concat(ue.SubVV(m,c))):(x.datas=n.concat(d).concat(l),_.datas=[0,0].concat(ue.SubVV(m,c)).concat(ue.SubVV(u,c)));let N=.5,pi=10,W=new no;W.otherBody=T,W.selfAnchor=l,W.otherAnchor=ue.SubVV(u,c),W.frequency=pi,W.damping=N,L.addComponentInstance(W),W.maxLength=W.minLength=W.length=this.getDistance(T,W.otherAnchor,g,W.selfAnchor);let we=new no;we.otherBody=T,we.selfAnchor=d,we.frequency=pi,we.damping=N,L.addComponentInstance(we),we.maxLength=we.minLength=we.length=this.getDistance(T,W.otherAnchor,g,W.selfAnchor);let Hl=this.getNewPoint(a,t),j=new no;j.selfAnchor=d,j.otherBody=i,j.otherAnchor=Hl,j.frequency=pi,j.damping=N,L.addComponentInstance(j),j.maxLength=j.minLength=j.length=this.getDistance(i,t,g,j.selfAnchor);let q=new no;q.selfAnchor=ue.SubVV(m,c),q.otherBody=i,q.otherAnchor=Hl,q.frequency=pi,q.damping=N,S.addComponentInstance(q),q.maxLength=q.minLength=q.length=this.getDistance(i,t,T,q.selfAnchor);let di=new lp;di.otherBody=T,di.anchor=ue.AddVV(c,this.pivot),di.collideConnected=!1,this.chassis.addComponentInstance(di)}eventListener(){this.box2D.on(so.DOUBLE_CLICK,this,()=>{this.motorJoint.motorSpeed=-this.motorJoint.motorSpeed}),this.box2D.on(so.CLICK,this,()=>{let i=this.TempVec,r=new We;r.pos(this.box2D.mouseX,this.box2D.mouseY),this.box2D.addChild(r);let n=r.addComponent(me),l=r.addComponent(wn);l.radius=3*this.scale,i.x=this.chassis.x-r.x,i.y=this.chassis.y-r.y,Laya.Vector2.normalize(i,i),Laya.Vector2.scale(i,50,i),n.linearVelocity=i.toArray(),Laya.timer.frameOnce(120,this,function(){r.destroy()})});let e=this.label=this.box2D.addChild(new R0(`\u53CC\u51FB\u5C4F\u5E55\uFF0C\u4EFF\u751F\u673A\u5668\u4EBA\u5411\u76F8\u53CD\u65B9\u5411\u8FD0\u52A8
\u5355\u51FB\u4EA7\u751F\u65B0\u7684\u5C0F\u7403\u521A\u4F53`));e.top=20,e.right=20,e.fontSize=16,e.color="#e69999";for(var t=0,a=this.drawFlags.length;t<a;t++)this.createCheckBox(this.drawFlags[t],t<=1,1300,70+50*t)}createCheckBox(e,t,a,i){var r=new Laya.CheckBox("atlas/comp/checkbox.png");this.box2D.addChild(r),r.labelColors="white",r.labelSize=20,r.labelFont="Microsoft YaHei",r.labelPadding="3,0,0,5",r.x=a,r.y=i,r.label=e,r.selected=t,r.on("change",this,this.updateSelect,[r])}updateSelect(e){let t=e.selected;switch(e.label){case"Shape":Laya.Physics2D.I.drawShape=t;break;case"Joint":Laya.Physics2D.I.drawJoint=t;break;case"AABB":Laya.Physics2D.I.drawAABB=t;break;case"Pair":Laya.Physics2D.I.drawPair=t;break;case"CenterOfMass":Laya.Physics2D.I.drawCenterOfMass=t;break}}onDisable(){this.box2D&&(this.box2D.offAll(so.CLICK),this.box2D.offAll(so.DOUBLE_CLICK),this.box2D.removeChild(this.label),this.box2D=null),Laya.Physics2D.I.destroyWorld()}};ho=o([A0("TNlhRHvxTpyYIeN3aXr9VQ")],ho);var ue=class{static AddVV(s,e){return[s[0]+e[0],s[1]+e[1]]}static SubVV(s,e){return[s[0]-e[0],s[1]-e[1]]}};var wr=Laya.BoxCollider,dp=Laya.Sprite,cp=Laya.Event,mp=Laya.RigidBody,B0=Laya.RevoluteJoint,V0=Laya.Label,{regClass:_0,property:oT}=Laya,lo=class extends h{constructor(){super();this.count=0;this.totalBox=200}onStart(){super.base(),Laya.Config.isAntialias=!0,Laya.Physics2D.I.start(),this.createBox(),this.eventListener()}createBox(){let a=this.pageWidth/2,i=this.pageHeight/2,r=this.box=new dp;r.size(300+20*2,300+20*2),r.pos(a,i),r.anchorX=.5,r.anchorY=.5,this.box2D.addChild(r);let n=r.addComponent(mp),l=r.addComponent(wr),d=r.addComponent(wr),c=r.addComponent(wr),u=r.addComponent(wr);l.width=300+20*2,l.height=20,l.x=0,l.y=0,d.width=300+20*2,d.height=20,d.x=0,d.y=300+20,c.width=20,c.height=300+20*2,c.x=0,c.y=0,u.width=20,u.height=300+20*2,u.x=300+20,u.y=0;let m=new B0;m.motorSpeed=.05*Math.PI,m.maxMotorTorque=1e8,m.enableMotor=!0,r.addComponentInstance(m)}addMiniBox(){if(this.count>=this.totalBox)return;let e=new dp;this.box2D.addChild(e),e.x=this.box.x,e.y=this.box.y;let t=e.addComponent(mp);t.type="dynamic";let a=e.addComponent(wr);a.width=5,a.height=5,this.count++}eventListener(){let e=this.label=this.box2D.addChild(new V0("\u53CC\u51FB\u5C4F\u5E55\uFF0C\u5C06\u4F1A\u4EA7\u751F100\u4E2A\u65B0\u7684\u5C0F\u521A\u4F53"));e.top=20,e.right=20,e.fontSize=16,e.color="#e69999",this.box2D.on(cp.DOUBLE_CLICK,this,()=>{this.totalBox+=100}),Laya.timer.frameLoop(1,this,this.addMiniBox)}onDisable(){this.box2D&&(this.box2D.offAll(cp.DOUBLE_CLICK),this.box2D.removeChild(this.label),this.box2D=null),Laya.Physics2D.I.destroyWorld()}};lo=o([_0("rQs2IMKnSLG02ChdnKAUPQ")],lo);var up=Laya.Event,{regClass:P0,property:lT}=Laya,po=class extends h{constructor(){super();this.mStartX=400;this.mStartY=400;this.mCurrIndex=0;this.mCurrSkinIndex=0;this.mSkinList=["goblin","goblingirl"]}onAwake(){super.base(),Laya.loader.load("resources/res/spine/spineRes2/goblins.sk").then(e=>{this.mArmature=e.buildArmature(1),this.mArmature.x=this.mStartX,this.mArmature.y=this.mStartY,this.mArmature.scale(.8,.8),this.owner.addChild(this.mArmature),this.mArmature.on(up.STOPPED,this,this.completeHandler),this.play(),this.changeSkin(),Laya.timer.loop(1e3,this,this.changeSkin)})}changeSkin(){this.mCurrSkinIndex++,this.mCurrSkinIndex>=this.mSkinList.length&&(this.mCurrSkinIndex=0),this.mArmature.showSkinByName(this.mSkinList[this.mCurrSkinIndex])}completeHandler(){this.play()}play(){this.mCurrIndex++,this.mCurrIndex>=this.mArmature.getAnimNum()&&(this.mCurrIndex=0),this.mArmature.play(this.mCurrIndex,!1)}onDestroy(){this.mArmature!=null&&(this.mArmature.stop(),Laya.timer.clear(this,this.changeSkin),this.mArmature.off(up.STOPPED,this,this.completeHandler))}};po=o([P0("WeTg5SfoSn-mdUSSxUw1iQ")],po);var yp=Laya.Event,{regClass:k0,property:mT}=Laya,co=class extends h{constructor(){super();this.mStartX=300;this.mStartY=350;this.mCurrIndex=0}onAwake(){super.base(),Laya.loader.load("resources/res/spine/spineRes1/dragon.sk").then(e=>{this.mArmature=e.buildArmature(0),this.mArmature.x=this.mStartX,this.mArmature.y=this.mStartY,this.mArmature.scale(.5,.5),this.owner.addChild(this.mArmature),this.mArmature.on(yp.STOPPED,this,this.completeHandler),this.play()})}completeHandler(){this.play()}play(){this.mCurrIndex++,this.mCurrIndex>=this.mArmature.getAnimNum()&&(this.mCurrIndex=0),this.mArmature.play(this.mCurrIndex,!1)}onDestroy(){this.mArmature!=null&&(this.mArmature.stop(),this.mArmature.off(yp.STOPPED,this,this.completeHandler))}};co=o([k0("1UinKkq_SqKbfkmdZ7blxQ")],co);var F0=Laya.Event,I0=Laya.Loader,H0=Laya.SpineSkeleton,{regClass:O0,property:gT}=Laya,mo=class extends h{constructor(){super();this.index=-1}onAwake(){super.base(),Laya.loader.load("resources/res/spine/spineboy-pro.skel",I0.SPINE).then(e=>{this.skeleton=new H0,this.skeleton.templet=e,this.owner.addChild(this.skeleton),this.skeleton.pos(this.pageWidth/2-200,this.pageHeight/2-20),this.skeleton.scale(.3,.3),this.skeleton.on(F0.STOPPED,this,this.play),this.play()})}play(){++this.index>=this.skeleton.getAnimNum()&&(this.index=0),this.skeleton.play(this.index,!1,!0)}};mo=o([O0("UDObL6LRRyeTdm6QCKpaSQ")],mo);var N0=Laya.Sprite,bn=Laya.Event,U0=Laya.Handler,Lp=Laya.Tween,{regClass:W0,property:fT}=Laya,uo=class extends h{constructor(){super();this.mStartX=400;this.mStartY=400;this.mCurrIndex=0}onAwake(){super.base(),this.mLabelSprite=new N0,Laya.loader.load("resources/res/spine/spineRes6/alien.sk").then(e=>{this.mArmature=e.buildArmature(1),this.mArmature.x=this.mStartX,this.mArmature.y=this.mStartY,this.mArmature.scale(.5,.5),this.owner.addChild(this.mArmature),this.mArmature.on(bn.LABEL,this,this.onEvent),this.mArmature.on(bn.STOPPED,this,this.completeHandler),this.play()})}completeHandler(){this.play()}play(){this.mCurrIndex++,this.mCurrIndex>=this.mArmature.getAnimNum()&&(this.mCurrIndex=0),this.mArmature.play(this.mCurrIndex,!1)}onEvent(e){var t=e;this.owner.addChild(this.mLabelSprite),this.mLabelSprite.x=this.mStartX,this.mLabelSprite.y=this.mStartY,this.mLabelSprite.graphics.clear(),this.mLabelSprite.graphics.fillText(t.name,0,0,"20px Arial","#ff0000","center"),Lp.to(this.mLabelSprite,{y:this.mStartY-200},1e3,null,U0.create(this,this.playEnd))}playEnd(){this.mLabelSprite.removeSelf()}onDestroy(){this.mArmature!=null&&(Lp.clearAll(this.mLabelSprite),this.mArmature.stop(),this.mArmature.off(bn.STOPPED,this,this.completeHandler))}};uo=o([W0("4h4wqJWtTya0o1RvgJ52Ow")],uo);var gp=Laya.Event,{regClass:G0,property:bT}=Laya,yo=class extends h{constructor(){super();this.mStartX=200;this.mStartY=400;this.mCurrIndex=0}onAwake(){super.base(),Laya.loader.load("resources/res/spine/spineRes4/stretchyman.sk").then(e=>{this.mArmature=e.buildArmature(1),this.mArmature.x=this.mStartX,this.mArmature.y=this.mStartY,this.mArmature.scale(.5,.5),this.owner.addChild(this.mArmature),this.mArmature.on(gp.STOPPED,this,this.completeHandler),this.play()})}completeHandler(){this.play()}play(){this.mCurrIndex++,this.mCurrIndex>=this.mArmature.getAnimNum()&&(this.mCurrIndex=0),this.mArmature.play(this.mCurrIndex,!1)}onDestroy(){this.mArmature!=null&&(this.mArmature.stop(),this.mArmature.off(gp.STOPPED,this,this.completeHandler))}};yo=o([G0("lCi_BdX1TlilYpDgHbWvgA")],yo);var{regClass:z0,property:RT}=Laya,vp=Laya.Event,Lo=class extends h{constructor(){super();this.mStartX=400;this.mStartY=500;this.mCurrIndex=0}onAwake(){super.base(),Laya.loader.load("resources/res/spine/spineRes5/vine.sk").then(e=>{this.mArmature=e.buildArmature(1),this.mArmature.x=this.mStartX,this.mArmature.y=this.mStartY,this.mArmature.scale(.5,.5),this.owner.addChild(this.mArmature),this.mArmature.on(vp.STOPPED,this,this.completeHandler),this.play()})}completeHandler(){this.play()}play(){this.mCurrIndex++,this.mCurrIndex>=this.mArmature.getAnimNum()&&(this.mCurrIndex=0),this.mArmature.play(this.mCurrIndex,!1)}onDestroy(){this.mArmature!=null&&(this.mArmature.stop(),this.mArmature.off(vp.STOPPED,this,this.completeHandler))}};Lo=o([z0("WNFXVxlJSeSIYw4m5SRMRA")],Lo);var X0=Laya.Sprite,Sp=Laya.Event,xp=Laya.Handler,go=Laya.SoundManager,{regClass:Y0,property:_T}=Laya,vo=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var s=10,e=this.createButton("\u64AD\u653E\u97F3\u6548");e.x=(this.pageWidth-e.width*2+s)/2,e.y=(this.pageHeight-e.height)/2,this.box2D.addChild(e);var t=this.createButton("\u64AD\u653E\u97F3\u4E50");t.x=e.x+s+e.width,t.y=e.y,this.box2D.addChild(t),e.on(Sp.CLICK,this,this.onPlaySound),t.on(Sp.CLICK,this,this.onPlayMusic)}createButton(s){var e=110,t=40,a=new X0;return a.size(e,t),a.graphics.drawRect(0,0,e,t,"#FF7F50"),a.graphics.fillText(s,e/2,8,"25px SimHei","#FFFFFF","center"),this.box2D.addChild(a),a}onPlayMusic(s=null){console.log("\u64AD\u653E\u97F3\u4E50"),go.playMusic("resources/res/sounds/bgm.mp3",1,new xp(this,this.onComplete))}onPlaySound(s=null){console.log("\u64AD\u653E\u97F3\u6548"),go.playSound("resources/res/sounds/btn.mp3",1,new xp(this,this.onComplete))}onComplete(){console.log("\u64AD\u653E\u5B8C\u6210")}onDestroy(){go.stopAllSound(),go.stopMusic()}};vo=o([Y0("QoTSrEWXRfqe3jQjacyuNQ")],vo);var K0=Laya.Handler,Q0=Laya.Rectangle,J0=Laya.TiledMap,{regClass:j0,property:IT}=Laya,So=class extends h{constructor(){super()}onAwake(){super.base(),this.createMap()}createMap(){this.tiledMap=new J0,this.tiledMap.createMap("resources/res/tiledMap/orthogonal-test-movelayer.json",new Q0(0,0,this.pageWidth,this.pageHeight),K0.create(this,this.onLoaded))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.tiledMap.mapSprite().cacheAs="bitmap";let e=this.tiledMap.mapSprite();this.box2D.addChild(e)}dispose(){this.tiledMap&&(this.tiledMap.mapSprite().removeChildren(),this.tiledMap.destroy())}};So=o([j0("ZHCDBaLRQ4qv2Sz7XyA3DA")],So);var q0=Laya.Sprite,Z0=Laya.Rectangle,fp=Laya.Point,$0=Laya.Handler,eL=Laya.TiledMap,{regClass:tL,property:WT}=Laya,xo=class extends h{constructor(){super()}onAwake(){super.base(),this.createMap(),this.box2D.on("click",this,this.onStageClick)}createMap(){this.tiledMap=new eL,this.tiledMap.createMap("resources/res/tiledMap/isometric_grass_and_water.json",new Z0(0,0,y.pageWidth,y.pageHeight),$0.create(this,this.mapLoaded),null,new fp(1600,800))}onStageClick(e=null){var t=new fp(0,0);this.layer&&(this.layer.getTilePositionByScreenPos(e.target.mouseX,e.target.mouseY,t),this.layer.getScreenPositionByTilePos(Math.floor(t.x),Math.floor(t.y),t),this.sprite.pos(t.x,t.y))}mapLoaded(e=null){this.layer=this.tiledMap.getLayerByIndex(0);var t=32,a=Math.tan(180/Math.PI*30)*t,i="#FF7F50";this.sprite=new q0,this.sprite.graphics.drawLine(0,0,-t,a,i),this.sprite.graphics.drawLine(0,0,t,a,i),this.sprite.graphics.drawLine(-t,a,0,a*2,i),this.sprite.graphics.drawLine(t,a,0,a*2,i),this.box2D.addChild(this.sprite),this.sprite.zOrder=99999,this.tiledMap.mapSprite().removeSelf();let r=this.tiledMap.mapSprite();r.cacheAs="bitmap",r.x-=(1600-this.pageWidth)/2,this.box2D.addChild(r)}onDestroy(){this.box2D.off("click",this,this.onStageClick),this.tiledMap&&(this.tiledMap.mapSprite().removeChildren(),this.tiledMap.destroy())}};xo=o([tL("NtqJe9SxQwueRg1GQOYHGg")],xo);var aL=Laya.Rectangle,rL=Laya.Handler,iL=Laya.TiledMap,{regClass:oL,property:YT}=Laya,fo=class extends h{constructor(){super()}onAwake(){super.base(),this.createMap()}createMap(){this.tiledMap=new iL,this.tiledMap.createMap("resources/res/tiledMap/perspective_walls.json",new aL(0,0,this.pageWidth,this.pageHeight),rL.create(this,this.onLoaded))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.tiledMap.mapSprite().cacheAs="bitmap",this.box2D.addChild(this.tiledMap.mapSprite())}onDestroy(){this.tiledMap&&(this.tiledMap.mapSprite().removeChildren(),this.tiledMap.destroy())}};fo=o([oL("oyTXtZrbSzSRcBOetvb1Bg")],fo);var ye=Laya.Event,sL=Laya.Rectangle,nL=Laya.Handler,hL=Laya.TiledMap,{regClass:lL,property:jT}=Laya,Do=class extends h{constructor(){super();this.mLastMouseX=0;this.mLastMouseY=0;this.mX=0;this.mY=0}onAwake(){super.base(),this.createMap(),this.box2D.on(ye.MOUSE_DOWN,this,this.mouseDown),this.box2D.on(ye.MOUSE_UP,this,this.mouseUp)}createMap(){this.tiledMap=new hL,this.mX=this.mY=0,this.tiledMap.createMap("resources/res/tiledMap/desert.json",new sL(0,0,this.pageWidth,this.pageHeight),new nL(this,this.completeHandler))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.tiledMap.mapSprite().cacheAs="bitmap",this.box2D.addChild(this.tiledMap.mapSprite())}completeHandler(e=null){this.box2D.on(ye.RESIZE,this,this.resize),this.resize(),this.onLoaded()}mouseDown(e=null){this.mLastMouseX=e.target.mouseX,this.mLastMouseY=e.target.mouseY,this.box2D.on(ye.MOUSE_MOVE,this,this.mouseMove)}mouseMove(e=null){this.tiledMap.moveViewPort(this.mX-(e.target.mouseX-this.mLastMouseX),this.mY-(e.target.mouseY-this.mLastMouseY))}mouseUp(e=null){this.mX=this.mX-(e.target.mouseX-this.mLastMouseX),this.mY=this.mY-(e.target.mouseY-this.mLastMouseY),this.box2D.off(ye.MOUSE_MOVE,this,this.mouseMove)}resize(e=null){this.tiledMap.changeViewPort(this.mX,this.mY,this.pageWidth,this.pageHeight)}dispose(){this.box2D.off(ye.MOUSE_DOWN,this,this.mouseDown),this.box2D.off(ye.MOUSE_UP,this,this.mouseUp),this.box2D.off(ye.RESIZE,this,this.resize),this.box2D.off(ye.MOUSE_MOVE,this,this.mouseMove),this.tiledMap&&this.tiledMap.destroy()}};Do=o([lL("BekL8oCUQE6S708TsR9iuA")],Do);var{regClass:pL,property:e2}=Laya,Mn=Laya.Sprite,dL=Laya.Byte,Dp=Laya.Texture,Cp=Laya.Texture2D,wp=Laya.TextureFormat,Co=class extends h{constructor(){super();this.sp1=new Mn;this.sp2=new Mn;this.sp3=new Mn}onAwake(){super.base(),Laya.loader.fetch("resources/res/test.bin","arraybuffer").then(e=>{let t=e,a=new dL(t);a.writeArrayBuffer(t,4),this.imageArrayBuffer=a.buffer,this.imgBlob=new Blob([this.imageArrayBuffer],{type:"image/png"}),this.showApe1()}),super.addBottomButton(["\u5207\u6362\u65B9\u5F0F","\u5207\u6362\u65B9\u5F0F","\u5207\u6362\u65B9\u5F0F"],this,[this.showApe2,this.showApe3,this.showApe1])}showApe1(){let e=new FileReader;e.readAsDataURL(this.imgBlob),e.onload=t=>{this.sp1.loadImage(t.target.result),this.sp1.x=10,this.owner.addChild(this.sp1),this.sp2.removeSelf(),this.sp3.removeSelf()}}showApe2(){var e=Laya.Browser.window.URL.createObjectURL(this.imgBlob);console.log(e),Laya.loader.fetch(e,"image").then(t=>{var a=new Cp(t.width,t.height,wp.R8G8B8A8,!1,!1,!0);a.setImageData(t,!0,!1);var i=new Dp(a);this.sp2.graphics.drawTexture(i,150,0),this.owner.addChild(this.sp2),this.sp1.removeSelf(),this.sp3.removeSelf()})}showApe3(){let e={};e.blob=this.imgBlob,Laya.loader.fetch("","image",null,e).then(t=>{var a=new Cp(t.width,t.height,wp.R8G8B8A8,!1,!1,!0);a.setImageData(t,!0,!1);var i=new Dp(a);this.sp3.graphics.drawTexture(i,290,0),this.owner.addChild(this.sp3),this.sp1.removeSelf(),this.sp2.removeSelf()})}};Co=o([pL("aDBSHL83Rzu7dZ6DmbvKqw")],Co);var cL=Laya.Sprite,mL=Laya.Text,{regClass:uL,property:i2}=Laya,wo=class extends h{constructor(){super()}onAwake(){super.base(),this.cacheText()}cacheText(){let s=new cL;this.owner.addChild(s);let e;for(let t=0;t<1e3;t++)e=new mL,s.addChild(e),e.fontSize=20,e.text=(Math.random()*100).toFixed(0),e.rotation=Math.random()*360,e.color="#ccc",e.x=Math.random()*this.pageWidth,e.y=Math.random()*this.pageHeight;s.cacheAs="bitmap"}};wo=o([uL("scJ9tr7zTkuSIkKDrNmNUA")],wo);var bp=Laya.Sprite,{regClass:yL,property:h2}=Laya,bo=class extends h{constructor(){super()}onAwake(){super.base(),this.createApes()}createApes(){var e=150,t=Math.PI/2;this.apesCtn=new bp,this.owner.addChild(this.apesCtn);for(var a=0;a<4;a++){var i=new bp;i.loadImage("resources/res/apes/monkey"+a+".png"),i.pivot(55,72),i.pos(Math.cos(t*a)*e,Math.sin(t*a)*e),this.apesCtn.addChild(i)}this.apesCtn.pos(this.pageWidth/2,this.pageHeight/2),Laya.timer.frameLoop(1,this,this.animate)}animate(e){this.apesCtn.rotation+=1}onDestroy(){Laya.timer.clear(this,this.animate)}};bo=o([yL("KBIVfFphTZ6JnJbHxBRg-w")],bo);var{regClass:LL,property:c2}=Laya,Mo=class extends h{constructor(){super()}onAwake(){super.base(),this.showApe()}showApe(){let s="resources/res/apes/monkey1.png",e="resources/res/apes/monkey2.png",t=new Laya.Sprite;this.owner.addChild(t),t.loadImage(s),Laya.loader.load(e).then(()=>{let a=Laya.loader.getRes(e),i=new Laya.Sprite;this.owner.addChild(i),i.graphics.drawTexture(a,100,0)})}};Mo=o([LL("YiqIp2Z-RueEPRZsfQYBiw")],Mo);var gL=Laya.Sprite,{regClass:vL,property:L2}=Laya,To=class extends h{constructor(){super()}onAwake(){super.base(),this.drawPentagram()}drawPentagram(){var s=new gL;this.owner.addChild(s);var e=[];e.push(0,-130),e.push(33,-33),e.push(137,-30),e.push(55,32),e.push(85,130),e.push(0,73),e.push(-85,130),e.push(-55,32),e.push(-137,-30),e.push(-33,-33),s.graphics.drawPoly(this.pageWidth/2,this.pageHeight/2,e,"#FF7F50")}};To=o([vL("keDxFki6RQqIYMZr9xQiHA")],To);var SL=Laya.Sprite,{regClass:xL,property:x2}=Laya,Eo=class extends h{constructor(){super()}onAwake(){super.base(),this.drawSomething()}drawSomething(){this.sp=new SL,this.owner.addChild(this.sp),this.sp.graphics.drawLine(10,58,146,58,"#ff0000",3),this.sp.graphics.drawLines(176,58,[0,0,39,-50,78,0,117,50,156,0],"#ff0000",5),this.sp.graphics.drawCurves(352,58,[0,0,19,-100,39,0,58,100,78,0,97,-100,117,0,136,100,156,0],"#ff0000",5),this.sp.graphics.drawRect(10,166,166,90,"#ffff00"),this.sp.graphics.drawPoly(264,166,[0,0,60,0,78.48,57,30,93.48,-18.48,57],"#ffff00"),this.sp.graphics.drawPoly(400,166,[0,100,50,0,100,100],"#ffff00"),this.sp.graphics.drawCircle(98,332,50,"#00ffff"),this.sp.graphics.drawPie(240,290,100,10,60,"#00ffff"),this.sp.graphics.drawPath(400,310,[["moveTo",5,0],["lineTo",105,0],["arcTo",110,0,110,5,5],["lineTo",110,55],["arcTo",110,60,105,60,5],["lineTo",5,60],["arcTo",0,60,0,55,5],["lineTo",0,5],["arcTo",0,0,5,0,5],["closePath"]],{fillStyle:"#00ffff"})}};Eo=o([xL("izRjiCcvRU-_aAoQh6fyzw")],Eo);var br=Laya.Sprite,{regClass:fL,property:b2}=Laya,Ro=class extends h{constructor(){super();this.guideSteps=[{x:151,y:575,radius:150,tip:"resources/res/guide/help6.png",tipx:200,tipy:250},{x:883,y:620,radius:100,tip:"resources/res/guide/help4.png",tipx:730,tipy:380},{x:1128,y:583,radius:110,tip:"resources/res/guide/help3.png",tipx:900,tipy:300}];this.guideStep=0;this.scaleX=y.pageWidth/1285;this.scaleY=y.pageHeight/727;this.box=new Laya.Box}onAwake(){super.base(),this.createPage(),y.curPage&&this.box.scale(this.scaleX,this.scaleY)}createPage(){this.owner.addChild(this.box),this.gameContainer=new br,this.box.addChild(this.gameContainer),this.gameContainer.loadImage("resources/res/guide/crazy_snowball.png"),this.gameContainer.on(Laya.Event.CLICK,this,this.nextStep),this.guideContainer=new br,this.box.addChild(this.guideContainer),this.guideContainer.cacheAs="bitmap",this.maskArea=new br,this.guideContainer.addChild(this.maskArea),this.maskArea.alpha=.5,this.maskArea.graphics.drawRect(0,0,1285,727,"#000"),this.interactionArea=new br,this.guideContainer.addChild(this.interactionArea),this.interactionArea.blendMode="destination-out",this.hitArea=new Laya.HitArea,this.hitArea.hit.drawRect(0,0,1285,727,"#000"),this.guideContainer.hitArea=this.hitArea,this.guideContainer.mouseEnabled=!0,this.tipContainer=new br,this.box.addChild(this.tipContainer),this.nextStep()}nextStep(){if(this.guideStep===this.guideSteps.length){this.box.removeChild(this.guideContainer),this.box.removeChild(this.tipContainer);return}let e=this.guideSteps[this.guideStep++];this.hitArea.unHit.clear(),this.hitArea.unHit.drawCircle(e.x,e.y,e.radius,"#000000"),this.interactionArea.graphics.clear(),this.interactionArea.graphics.drawCircle(e.x,e.y,e.radius,"#000000"),this.tipContainer.graphics.clear(),this.tipContainer.loadImage(e.tip),this.tipContainer.pos(e.tipx,e.tipy)}};Ro=o([fL("TDGgstoSRkyCG_o-JSHJ7A")],Ro);var Tn=Laya.Sprite,{regClass:DL,property:R2}=Laya,Ao=class extends h{constructor(){super()}onAwake(){super.base(),Laya.loader.load("resources/res/bg2.png").then(()=>{this.setup()})}setup(){var e=new Tn;e.loadImage("resources/res/bg2.png"),this.owner.addChild(e),this.bg2=new Tn,this.bg2.loadImage("resources/res/bg2.png"),this.owner.addChild(this.bg2),this.bg2.scale(3,3),this.maskSp=new Tn,this.maskSp.loadImage("resources/res/mask.png"),this.maskSp.pivot(50,50),this.bg2.mask=this.maskSp,Laya.stage.on("mousemove",this,this.onMouseMove)}onMouseMove(e){this.bg2.x=-e.target.mouseX*2,this.bg2.y=-e.target.mouseY*2,this.maskSp.x=e.target.mouseX,this.maskSp.y=e.target.mouseY}onDestroy(){Laya.stage.off("mousemove",this,this.onMouseMove)}};Ao=o([DL("eB00mDtwQsCZMRnMp908Lg")],Ao);var{regClass:CL,property:_2}=Laya,Bo=class extends h{constructor(){super()}onAwake(){super.base(),this.createApes()}createApes(){let e=Laya.Sprite,t="resources/res/apes/monkey2.png";this.ape1=new e,this.ape2=new e,this.ape1.loadImage(t),this.ape2.loadImage(t),this.ape1.pivot(55,72),this.ape2.pivot(55,72),this.ape1.pos(this.pageWidth/2,this.pageHeight/2),this.ape2.pos(200,0),this.owner.addChild(this.ape1),this.ape1.addChild(this.ape2),Laya.timer.frameLoop(1,this,this.animate)}animate(){this.ape1.rotation+=2,this.ape2.rotation-=4}onDestroy(){Laya.timer.clear(this,this.animate)}};Bo=o([CL("mwsryA5yTSinDt6l04Znng")],Bo);var{regClass:wL,property:I2}=Laya,Vo=class extends h{constructor(){super()}onAwake(){super.base(),this.createApes()}createApes(){let e=Laya.Sprite,t="resources/res/apes/monkey2.png",a=150;this.ape1=new e,this.owner.addChild(this.ape1),this.ape1.loadImage(t),this.ape1.pivot(55,72),this.ape1.pos(this.pageWidth/2-a,this.pageHeight/2),this.ape2=new e,this.owner.addChild(this.ape2),this.ape2.loadImage(t),this.ape2.pos(this.pageWidth/2+a,this.pageHeight/2),Laya.timer.frameLoop(1,this,this.animate)}animate(){this.ape1.rotation+=2,this.ape2.rotation+=2}onDestroy(){Laya.timer.clear(this,this.animate)}};Vo=o([wL("Q9BeOZUPTva8jfS2TDqVxQ")],Vo);var bL=Laya.Sprite,{regClass:ML,property:U2}=Laya,_o=class extends h{constructor(){super();this.scaleDelta=0}onAwake(){super.base(),this.createApe()}createApe(){this.ape=new bL,this.ape.loadImage("resources/res/apes/monkey2.png"),this.owner.addChild(this.ape),this.ape.pivot(55,72),this.ape.x=this.pageWidth/2,this.ape.y=this.pageHeight/2,Laya.timer.frameLoop(1,this,this.animate)}animate(e){this.ape.rotation+=2,this.scaleDelta+=.02;var t=Math.sin(this.scaleDelta);this.ape.scale(t,t)}onDestroy(){Laya.timer.clear(this,this.animate)}};_o=o([ML("yZXAOinyQtmRR1ttPA9QOQ")],_o);var Mp=Laya.Sprite,TL=Laya.Image,EL=Laya.Button,RL=Laya.Event,Tp=Laya.Browser,{regClass:AL,property:X2}=Laya,Po=class extends h{constructor(){super();this.btnArr=["resources/image/img_btn_bg.png","resources/image/img_btn_bg.png","resources/image/img_btn_bg.png"];this.nameArr=["canvas\u622A\u56FE","sprite\u622A\u56FE","\u6E05\u7406"]}onAwake(){super.base(),Laya.loader.load(this.btnArr.concat("resources/res/apes/monkey3.png")).then(()=>{this.onLoaded()})}createButton(e,t,a,i){var r=new EL(e,t);return this.owner.addChild(r),r.on(RL.CLICK,this,a),r.size(120,30),r.labelSize=16,r.sizeGrid="21,83,22,76",r.stateNum=1,r.labelColors="#ffffff",r.name=t,r.right=10,r.top=100+i*(r.height+10),r}onLoaded(){for(let e=0;e<this.btnArr.length;e++)this.createButton(this.btnArr[e],this.nameArr[e],this._onclick,e);this._canvas=window.document.getElementById("layaCanvas"),this.aimSp=new Mp,this.aimSp.size(this.pageWidth/2,this.pageHeight/2),this.owner.addChild(this.aimSp),this.aimSp.graphics.drawRect(0,0,this.aimSp.width,this.aimSp.height,"#333333"),this.monkeyTexture=Laya.loader.getRes("resources/res/apes/monkey3.png"),this.aimSp.graphics.drawTexture(this.monkeyTexture,0,0,this.monkeyTexture.width,this.monkeyTexture.height),this.drawImage=new TL,this.drawImage.size(this.pageWidth/2,this.pageHeight/2),this.owner.addChild(this.drawImage),this.drawImage.bottom=this.drawImage.right=0,this.drawSp=new Mp,this.owner.addChild(this.drawSp),this.drawSp.size(this.pageWidth/2,this.pageHeight/2),this.drawSp.y=this.pageHeight/2,this.drawSp.graphics.drawRect(0,0,this.drawSp.width,this.drawSp.height,"#ff0000")}_onclick(e){switch(e.target.name){case this.nameArr[0]:var t=this._canvas.toDataURL("image/png",1);this.drawImage.skin=t,console.log(t);break;case this.nameArr[1]:var a=Laya.stage.drawToTexture(Tp.clientWidth,Tp.clientHeight,0,0);this.drawSp.graphics.drawTexture(a,0,0,this.drawSp.width,this.drawSp.height);break;case this.nameArr[2]:this.drawImage.skin=null,this.drawSp.graphics.clear(),this.drawSp.graphics.drawRect(0,0,this.drawSp.width,this.drawSp.height,"#ff0000");break}}};Po=o([AL("chWlJbpKScW7kUEM17WkjQ")],Po);var{regClass:BL,property:J2}=Laya,ko=class extends h{constructor(){super();this.monkey1Str="resources/res/apes/monkey1.png";this.monkey2Str="resources/res/apes/monkey2.png"}onAwake(){super.base(),this.flag=!0,Laya.loader.load([this.monkey1Str,this.monkey2Str]).then(()=>{this.onAssetsLoaded()})}onAssetsLoaded(){this.monkey1Res=Laya.loader.getRes(this.monkey1Str),this.monkey2Res=Laya.loader.getRes(this.monkey2Str),this.ape=new Laya.Sprite,this.owner.addChild(this.ape),this.ape.pivot(55,72),this.ape.pos(this.pageWidth/2,this.pageHeight/2),this.switchTexture(),this.ape.on(Laya.Event.CLICK,this,this.switchTexture)}switchTexture(){let e=(this.flag=!this.flag)?this.monkey1Res:this.monkey2Res;this.ape.graphics.clear(),this.ape.graphics.drawTexture(e,0,0),this.ape.size(e.width,e.height)}};ko=o([BL("2sUV5-fpTNGdor4_9e2wUA")],ko);var Fo=Laya.Text,{regClass:VL,property:$2}=Laya,Io=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var s=this.createSampleText();s.overflow=Fo.VISIBLE,s.y=50;var e=this.createSampleText();e.width=100,e.height=70,e.y=180,e.overflow=Fo.HIDDEN;var t=this.createSampleText();t.height=20,t.y=320}createSampleText(){var s=new Fo;return s.overflow=Fo.HIDDEN,s.color="#FFFFFF",s.font="Impact",s.fontSize=20,s.borderColor="#FFFF00",s.x=80,this.box2D.addChild(s),s.text=`A POWERFUL HTML5 ENGINE ON FLASH TECHNICAL
A POWERFUL HTML5 ENGINE ON FLASH TECHNICAL
A POWERFUL HTML5 ENGINE ON FLASH TECHNICAL`,s}};Io=o([VL("djeqMdrZQVq9hwWb4TXATw")],Io);var Ep=Laya.Text,{regClass:_L,property:rE}=Laya,Ho=class extends h{constructor(){super();this.fontName="diyFont"}onAwake(){super.base(),this.loadFont()}loadFont(){Laya.loader.load("resources/res/bitmapFont/test.fnt",Laya.Loader.FONT).then(e=>{this.onFontLoaded(e)})}onFontLoaded(e){Ep.registerBitmapFont(this.fontName,e),this.createText(this.fontName)}createText(e){var t=new Ep;t.width=250,t.wordWrap=!0,t.text="Do one thing at a time, and do well.",t.font=e,t.leading=5,t.x=this.pageWidth-t.width>>1,t.y=this.pageHeight-t.height>>1,this.box2D.addChild(t)}};Ho=o([_L("9OK6zw57TKySeBPOZ_2XUg")],Ho);var PL=Laya.Text,{regClass:kL,property:nE}=Laya,Oo=class extends h{constructor(){super()}onAwake(){super.base(),this.createText()}createText(){var s=new PL;s.text="Layabox\u662F\u6027\u80FD\u6700\u5F3A\u7684HTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411Flash\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01",s.width=400,s.wordWrap=!0,s.align="center",s.fontSize=40,s.font="Microsoft YaHei",s.color="#ff0000",s.bold=!0,s.leading=5,s.stroke=2,s.strokeColor="#ffffff",s.borderColor="#00ff00",s.x=(this.pageWidth-s.textWidth)/2,s.y=(this.pageHeight-s.textHeight)/2,this.box2D.addChild(s)}};Oo=o([kL("B1NNFDOZRSWUUl6mXoq4SA")],Oo);var FL=Laya.Input,{regClass:IL,property:dE}=Laya,No=class extends h{constructor(){super()}onAwake(){super.base(),this.createInput()}createInput(){var s=new FL;s.size(350,100),s.x=this.pageWidth-s.width>>1,s.y=this.pageHeight-s.height>>1,s.text="\u8FD9\u6BB5\u6587\u672C\u4E0D\u53EF\u7F16\u8F91\uFF0C\u4F46\u53EF\u590D\u5236",s.editable=!1,s.bold=!0,s.bgColor="#666666",s.color="#ffffff",s.fontSize=20,this.box2D.addChild(s)}};No=o([IL("N37ZwjnxS-OvZSnwhURRcw")],No);var{regClass:HL,property:yE}=Laya,Uo=class extends h{constructor(){super()}onAwake(){super.base(),this.createParagraph()}createParagraph(){var s=new Laya.Text;s.html=!0,s.fontSize=50,s.zOrder=9e4,s.text="<font color=#e3d26a>\u4F7F\u7528</font><br/>",s.text+="<font color=#409ed7><b>\u6587\u672C\u7684</b>HTML</font><br/>",s.text+="<font color=#10d269><i>\u521B\u5EFA\u7684</i></font><br/>",s.text+="<font color=#dfbfc9><u>HTML\u5BCC\u6587\u672C</u></font>",this.box2D.addChild(s)}};Uo=o([HL("aSBZRjakRGqlOjN6ldKBNQ")],Uo);var OL=Laya.Input,{regClass:NL,property:SE}=Laya,Wo=class extends h{constructor(){super()}onAwake(){super.base(),this.createInput()}createInput(){var s=new OL;s.prompt="Type some word...",s.multiline=!0,s.wordWrap=!0,s.size(350,100),s.x=this.pageWidth-s.width>>1,s.y=this.pageHeight-s.height>>1,s.padding=[2,2,2,2],s.bgColor="#666666",s.color="#ffffff",s.fontSize=20,this.box2D.addChild(s)}};Wo=o([NL("QWCOsI9hQOS7udoDqLJuJA")],Wo);var UL=Laya.Input,{regClass:WL,property:CE}=Laya,Go=class extends h{constructor(){super()}onAwake(){super.base(),this.createInput()}createInput(){var s=new UL;s.size(350,100),s.x=this.pageWidth-s.width>>1,s.y=this.pageHeight-s.height>>1,s.prompt="Type some word...",s.bold=!0,s.bgColor="#666666",s.color="#ffffff",s.fontSize=20,this.box2D.addChild(s)}};Go=o([WL("GA2IRNWnRuaNmw-IKDUySg")],Go);var GL=Laya.Input,{regClass:zL,property:TE}=Laya,zo=class extends h{constructor(){super()}onAwake(){super.base(),this.createInput()}createInput(){var s=new GL;s.size(350,100),s.x=this.pageWidth-s.width>>1,s.y=this.pageHeight-s.height>>1,s.bold=!0,s.bgColor="#666666",s.color="#ffffff",s.fontSize=20,s.maxChars=5,this.box2D.addChild(s)}};zo=o([zL("X8P3-C_KTZKta9NyGxaWaA")],zo);var Xo=Laya.Text,{regClass:XL,property:BE}=Laya,Yo=class extends h{constructor(){super()}onAwake(){super.base(),this.createTexts()}createTexts(){var s=this.createText();s.overflow=Xo.VISIBLE,s.pos(10,10);var e=this.createText();e.overflow=Xo.SCROLL,e.pos(10,110);var t=this.createText();t.overflow=Xo.HIDDEN,t.pos(10,210)}createText(){var s=new Xo;return s.text=`Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01`,s.borderColor="#FFFF00",s.size(300,50),s.fontSize=20,s.color="#ffffff",this.box2D.addChild(s),s}};Yo=o([XL("IOo-T897SfG0JxiUAAcYQw")],Yo);var YL=Laya.Text,KL=Laya.Input,{regClass:QL,property:kE}=Laya,Ko=class extends h{constructor(){super()}onAwake(){super.base(),this.createTexts()}createTexts(){this.createLabel("\u53EA\u5141\u8BB8\u8F93\u5165\u6570\u5B57\uFF1A").pos(50,20);var s=this.createInput();s.pos(50,50),s.restrict="0-9",this.createLabel("\u53EA\u5141\u8BB8\u8F93\u5165\u5B57\u6BCD\uFF1A").pos(50,100),s=this.createInput(),s.pos(50,130),s.restrict="a-zA-Z",this.createLabel("\u53EA\u5141\u8BB8\u8F93\u5165\u4E2D\u6587\u5B57\u7B26\uFF1A").pos(50,180),s=this.createInput(),s.pos(50,210),s.restrict="\u4E00-\u9FA5"}createLabel(s){var e=new YL;return e.text=s,e.color="white",e.fontSize=20,this.box2D.addChild(e),e}createInput(){var s=new KL;return s.size(200,30),s.borderColor="#FFFF00",s.bold=!0,s.fontSize=20,s.color="#FFFFFF",s.padding=[0,4,0,4],this.box2D.addChild(s),s}};Ko=o([QL("ORBgKZ6mRgeUL2jW4Q5OXA")],Ko);var Mr=Laya.Event,Rp=Laya.Text,{regClass:JL,property:OE}=Laya,Qo=class extends h{constructor(){super();this.prevX=0;this.prevY=0}onAwake(){super.base(),this.createText()}createText(){this.txt=new Rp,this.txt.overflow=Rp.SCROLL,this.txt.text=`Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01
Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01`,this.txt.size(200,100),this.txt.x=this.pageWidth-this.txt.width>>1,this.txt.y=this.pageHeight-this.txt.height>>1,this.txt.borderColor="#FFFF00",this.txt.fontSize=20,this.txt.color="#ffffff",this.box2D.addChild(this.txt),this.txt.on(Mr.MOUSE_DOWN,this,this.startScrollText)}startScrollText(e){this.prevX=this.txt.mouseX,this.prevY=this.txt.mouseY,this.box2D.on(Mr.MOUSE_MOVE,this,this.scrollText),this.box2D.on(Mr.MOUSE_UP,this,this.finishScrollText)}finishScrollText(e){this.box2D.off(Mr.MOUSE_MOVE,this,this.scrollText),this.box2D.off(Mr.MOUSE_UP,this,this.finishScrollText)}scrollText(e){var t=this.txt.mouseX,a=this.txt.mouseY;this.txt.scrollX+=this.prevX-t,this.txt.scrollY+=this.prevY-a,this.prevX=t,this.prevY=a}};Qo=o([JL("ZL9uIoGzQsGiXGRpZuB6kg")],Qo);var{regClass:jL,property:GE}=Laya,Jo=class extends h{constructor(){super()}onAwake(){super.base(),this.createParagraph()}createParagraph(){var s=new Laya.Text;s.ubb=!0,s.fontSize=50,s.zOrder=9e4,s.text="[color=#e3d26a]\u4F7F\u7528[/color]<br/>",s.text+="[color=#0bbd71]U[/color][color=#ff133c][u]B[/u][color][color=#409ed7][b]B[/b][/color]<br/>",s.text+="[color=#6ad2e3]\u521B\u5EFA\u7684[/color]<br/>",s.text+="[color=#d26ae3]UBB\u6587\u672C[/color]<br/>",this.box2D.addChild(s)}};Jo=o([jL("zebVtgUYQUymP5PWWYXq0g")],Jo);var qL=Laya.Text,{regClass:ZL,property:KE}=Laya,jo=class extends h{constructor(){super()}onAwake(){super.base(),this.createTexts()}createTexts(){this.createText("left",1,null,100,10),this.createText("center",2,"#00BFFF",155,150),this.createText("right",3,"#FF7F50",210,290)}createText(s,e,t,a,i){var r=new qL;return r.text=`Layabox
\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546
\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546
\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848`,r.size(300,50),r.fontSize=20,r.color="#ffffff",r.align=s,r.underline=!0,r.underlineColor=t,r.pos(a,i),this.box2D.addChild(r),r}};jo=o([ZL("Y8OBOQ_vS8a0gzKixzWqDQ")],jo);var $L=Laya.Text,{regClass:eg,property:qE}=Laya,qo=class extends h{constructor(){super()}onAwake(){super.base(),this.createText()}createText(){var s=new $L;s.text="Layabox\u662FHTML5\u5F15\u64CE\u6280\u672F\u63D0\u4F9B\u5546\u4E0E\u4F18\u79C0\u7684\u6E38\u620F\u53D1\u884C\u5546\uFF0C\u9762\u5411AS/JS/TS\u5F00\u53D1\u8005\u63D0\u4F9BHTML5\u5F00\u53D1\u6280\u672F\u65B9\u6848\uFF01",s.width=300,s.fontSize=40,s.color="#ffffff",s.wordWrap=!0,s.x=this.pageWidth-s.width>>1,s.y=this.pageHeight-s.height>>1,this.box2D.addChild(s)}};qo=o([eg("6yH8-U-bRLmGk6HG2Z1Vxg")],qo);var tg=Laya.Text,{regClass:ag,property:tR}=Laya,Zo=class extends h{constructor(){super()}onAwake(){super.base(),this.demonstrate()}demonstrate(){for(var s=0;s<10;s++)Laya.timer.callLater(this,this.onCallLater)}onCallLater(s=null){console.log("onCallLater triggered");var e=new tg;e.font="SimHei",e.fontSize=30,e.color="#FFFFFF",e.text="\u6253\u5F00\u63A7\u5236\u53F0\u53EF\u89C1\u8BE5\u51FD\u6570\u4EC5\u89E6\u53D1\u4E86\u4E00\u6B21",e.size(this.pageWidth,this.pageHeight),e.wordWrap=!0,e.valign="middle",e.align="center",this.box2D.addChild(e)}};Zo=o([ag("gBXuRKbFQMKaoVwcKsG_KA")],Zo);var rg=Laya.Sprite,$o=Laya.Event,{regClass:ig,property:oR}=Laya,es=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var e=100;this.button1=this.createButton("\u70B9\u62113\u79D2\u4E4B\u540E alpha - 0.5"),this.button1.x=(this.pageWidth-this.button1.width)/2,this.button1.y=(this.pageHeight-this.button1.height-e)/2,this.box2D.addChild(this.button1),this.button1.on($o.CLICK,this,this.onDecreaseAlpha1),this.button2=this.createButton("\u70B9\u621160\u5E27\u4E4B\u540E alpha - 0.5"),this.button2.pos(this.button1.x,this.button1.y+e),this.box2D.addChild(this.button2),this.button2.on($o.CLICK,this,this.onDecreaseAlpha2)}createButton(e){var t=300,a=60,i=new rg;return i.graphics.drawRect(0,0,t,a,"#FF7F50"),i.size(t,a),i.graphics.fillText(e,t/2,17,"20px simHei","#ffffff","center"),i}onDecreaseAlpha1(e=null){this.button1.off($o.CLICK,this,this.onDecreaseAlpha1),Laya.timer.once(3e3,this,this.onComplete1)}onDecreaseAlpha2(e=null){this.button2.off($o.CLICK,this,this.onDecreaseAlpha2),Laya.timer.frameOnce(60,this,this.onComplete2)}onComplete1(){this.button1.alpha-=.5}onComplete2(){this.button2.alpha-=.5}onDestroy(){Laya.timer.clearAll(this)}};es=o([ig("2TjHWJ6DQ0u0Tdc4Qx7BDg")],es);var og=Laya.Text,{regClass:sg,property:lR}=Laya,ts=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var e=200;this.rotateTimeBasedText=this.createText("\u57FA\u4E8E\u65F6\u95F4\u65CB\u8F6C",this.pageWidth/2,(this.pageHeight-e)/2),this.rotateFrameRateBasedText=this.createText("\u57FA\u4E8E\u5E27\u9891\u65CB\u8F6C",this.rotateTimeBasedText.x,this.rotateTimeBasedText.y+e),Laya.timer.loop(200,this,this.animateTimeBased),Laya.timer.frameLoop(2,this,this.animateFrameRateBased)}createText(e,t,a){var i=new og;return i.text=e,i.fontSize=30,i.color="white",i.bold=!0,i.pivot(i.width/2,i.height/2),i.pos(t,a),this.box2D.addChild(i),i}animateTimeBased(){this.rotateTimeBasedText.rotation+=1}animateFrameRateBased(){this.rotateFrameRateBasedText.rotation+=1}onDestroy(){Laya.timer.clear(this,this.animateTimeBased),Laya.timer.clear(this,this.animateFrameRateBased)}};ts=o([sg("T0FWp4VERJ657Qlwve2I2A")],ts);var ng=Laya.Label,hg=Laya.Sprite,lg=Laya.Event,pg=Laya.Input,dg=Laya.List,Ap=Laya.Handler,cg=Laya.Tween,mg=Laya.Box,ug=Laya.Text,{regClass:yg,property:mR}=Laya,as=class extends h{constructor(){super();this.duration=2e3}onAwake(){super.base(),this.setup()}setup(){this.createCharacter(),this.createEaseFunctionList(),this.createDurationCrontroller()}createCharacter(){this.character=new hg,this.character.loadImage("resources/res/cartoonCharacters/1.png"),this.character.pos(100,50),this.box2D.addChild(this.character)}createEaseFunctionList(){var e=new dg;e.itemRender=En,e.pos(5,5),e.repeatX=1,e.repeatY=20,e.vScrollBarSkin="",e.selectEnable=!0,e.selectHandler=new Ap(this,this.onEaseFunctionChange,[e]),e.renderHandler=new Ap(this,this.renderList),this.box2D.addChild(e);var t=[];t.push("backIn","backOut","backInOut"),t.push("bounceIn","bounceOut","bounceInOut"),t.push("circIn","circOut","circInOut"),t.push("cubicIn","cubicOut","cubicInOut"),t.push("elasticIn","elasticOut","elasticInOut"),t.push("expoIn","expoOut","expoInOut"),t.push("linearIn","linearOut","linearInOut"),t.push("linearNone"),t.push("QuadIn","QuadOut","QuadInOut"),t.push("quartIn","quartOut","quartInOut"),t.push("quintIn","quintOut","quintInOut"),t.push("sineIn","sineOut","sineInOut"),t.push("strongIn","strongOut","strongInOut"),e.array=t}renderList(e,t=null){e.setLabel(e.dataSource)}onEaseFunctionChange(e,t=null){this.character.pos(100,50),this.tween&&this.tween.clear(),this.tween=cg.to(this.character,{x:350,y:250},this.duration,Laya.Ease[e.selectedItem])}createDurationCrontroller(){var e=this.createInputWidthLabel("Duration:","2000",400,10);e.on(lg.INPUT,this,()=>{this.duration=parseInt(e.text)})}createInputWidthLabel(e,t,a,i){var r=new ug;r.text=e,r.color="white",this.box2D.addChild(r),r.pos(a,i);var n=new pg;return n.size(50,20),n.text=t,n.align="center",this.box2D.addChild(n),n.color="#FFFFFF",n.borderColor="#FFFFFF",n.pos(r.x+r.width+10,r.y-3),n}onDestroy(){this.tween&&this.tween.clear()}};as=o([yg("De0huMrtRZqFL283d4kKeQ")],as);var En=class extends mg{constructor(){super();this.size(100,20),this.label=new ng,this.label.fontSize=12,this.label.color="#FFFFFF",this.addChild(this.label)}setLabel(e){this.label.text=e}};var Lg=Laya.Ease,gg=Laya.Tween,vg=Laya.Text,{regClass:Sg,property:gR}=Laya,rs=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){for(var s=400,e=this.pageWidth-s>>1,t=this.pageHeight/2-50,a="LayaBox",i=0,r=a.length;i<r;++i){var n=this.createLetter(a.charAt(i));n.x=s/r*i+e,gg.to(n,{y:t},1e3,Lg.elasticOut,null,i*1e3)}}createLetter(s){var e=new vg;return e.text=s,e.color="#FFFFFF",e.font="Impact",e.fontSize=110,this.box2D.addChild(e),e}};rs=o([Sg("pS7yG9-WQ46fU3Zd6c525g")],rs);var xg=Laya.Sprite,Bp=Laya.Tween,{regClass:fg,property:fR}=Laya,is=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var s=200,e=this.createCharacter("resources/res/cartoonCharacters/1.png");e.pivot(46.5,50),e.y=100;var t=this.createCharacter("resources/res/cartoonCharacters/2.png");t.pivot(34,50),t.y=250,this.box2D.graphics.drawLine(s,0,s,this.pageHeight,"#FFFFFF"),Bp.to(e,{x:s},1e3),t.x=s,Bp.from(t,{x:0},1e3)}createCharacter(s){var e=new xg;return e.loadImage(s),this.box2D.addChild(e),e}onDestroy(){this.box2D.graphics.clear()}};is=o([fg("w4pRCe7oR4G0UlyVTSVULg")],is);var Dg=Laya.Sprite,Ut=Laya.Event,Cg=Laya.TimeLine,Wt=Laya.Keyboard,{regClass:wg,property:bR}=Laya,os=class extends h{constructor(){super();this.timeLine=new Cg}onAwake(){super.base(),this.setup()}setup(){this.createApe(),this.createTimerLine(),this.box2D.on(Ut.KEY_DOWN,this,this.keyDown)}createApe(){this.target=new Dg,this.target.loadImage("resources/res/apes/monkey2.png"),this.box2D.addChild(this.target),this.target.pivot(55,72),this.target.pos(100,100)}createTimerLine(){this.timeLine.addLabel("turnRight",0).to(this.target,{x:450,y:100,scaleX:.5,scaleY:.5},2e3,null,0).addLabel("turnDown",0).to(this.target,{x:450,y:300,scaleX:.2,scaleY:1,alpha:1},2e3,null,0).addLabel("turnLeft",0).to(this.target,{x:100,y:300,scaleX:1,scaleY:.2,alpha:.1},2e3,null,0).addLabel("turnUp",0).to(this.target,{x:100,y:100,scaleX:1,scaleY:1,alpha:1},2e3,null,0),this.timeLine.play(0,!0),this.timeLine.on(Ut.COMPLETE,this,this.onComplete),this.timeLine.on(Ut.LABEL,this,this.onLabel)}onComplete(){console.log("timeLine complete!!!!")}onLabel(e){console.log("LabelName:"+e)}keyDown(e){switch(e.keyCode){case Wt.LEFT:this.timeLine.play("turnLeft");break;case Wt.RIGHT:this.timeLine.play("turnRight");break;case Wt.UP:this.timeLine.play("turnUp");break;case Wt.DOWN:this.timeLine.play("turnDown");break;case Wt.P:this.timeLine.pause();break;case Wt.R:this.timeLine.resume();break}}onDestroy(){this.box2D.off(Ut.KEY_DOWN,this,this.keyDown),this.timeLine&&(this.timeLine.on(Ut.COMPLETE,this,this.onComplete),this.timeLine.on(Ut.LABEL,this,this.onLabel),this.timeLine.destroy(),this.timeLine=null)}};os=o([wg("0XaNsDq2RwqWdfDyuD3G-w")],os);var bg=Laya.Sprite3D,Rn=Laya.Vector3,Mg=Laya.Animator,Gt=Laya.AnimatorState,ss=Laya.Text,Vp=Laya.Button,_p=Laya.Event,{regClass:Tg,property:An}=Laya,Ge=class extends h{constructor(){super();this._PlayStopIndex=0;this._curStateIndex=0;this._text=new ss;this._textName=new ss;this._curActionName=null}onAwake(){super.base(this.camera),this.camera.transform.position=new Rn(0,3,5),this.camera.transform.rotate(new Rn(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1);var e=this.directionLight.transform.worldMatrix;e.setForward(new Rn(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,Laya.loader.load("resources/res/threeDimen/skinModel/BoneLinkScene/PangZi.lh").then(t=>{this.onLoadFinish(t)})}onLoadFinish(e){var t=this.scene.addChild(new bg),a=t.addChild(e.create());this._animator=a.getChildAt(0).getComponent(Mg);var i=new Gt;i.name="hello",i.clipStart=296/581,i.clipEnd=346/581,i.clip=this._animator.getDefaultState().clip,i.clip.islooping=!0,i.addScript(Te),this._animator.getControllerLayer(0).addState(i);var r=new Gt;r.name="ride",r.clipStart=0/581,r.clipEnd=33/581,r.clip=this._animator.getDefaultState().clip,r.clip.islooping=!0,r.addScript(Te),this._animator.getControllerLayer(0).addState(r),this._animator.speed=0;var n=new Gt;n.name="\u52A8\u4F5C\u72B6\u6001\u4E09",n.clipStart=34/581,n.clipEnd=100/581,n.clip=this._animator.getDefaultState().clip,n.clip.islooping=!0,n.addScript(Te),this._animator.getControllerLayer(0).addState(n),this._animator.speed=0;var l=new Gt;l.name="\u52A8\u4F5C\u72B6\u6001\u56DB",l.clipStart=101/581,l.clipEnd=200/581,l.clip=this._animator.getDefaultState().clip,l.clip.islooping=!0,l.addScript(Te),this._animator.getControllerLayer(0).addState(l),this._animator.speed=0;var d=new Gt;d.name="\u52A8\u4F5C\u72B6\u6001\u4E94",d.clipStart=201/581,d.clipEnd=295/581,d.clip=this._animator.getDefaultState().clip,d.clip.islooping=!0,d.addScript(Te),this._animator.getControllerLayer(0).addState(d),this._animator.speed=0;var c=new Gt;c.name="\u52A8\u4F5C\u72B6\u6001\u516D",c.clipStart=345/581,c.clipEnd=581/581,c.clip=this._animator.getDefaultState().clip,c.clip.islooping=!0,c.addScript(Te),this._animator.getControllerLayer(0).addState(c),this._animator.speed=0,this.loadUI(),this._textName.width=300,this._textName.align="center",this._textName.x=(this.pageWidth-this._textName.width)/2,this._textName.y=10,this._textName.overflow=ss.HIDDEN,this._textName.color="#FFFFFF",this._textName.fontSize=16,this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A",this.owner.addChild(this._textName),this._text.width=300,this._text.align="center",this._text.x=(this.pageWidth-this._text.width)/2,this._text.y=50,this._text.overflow=ss.HIDDEN,this._text.color="#FFFFFF",this._text.fontSize=16,this._text.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u8FDB\u5EA6\uFF1A",this.owner.addChild(this._text),Laya.timer.frameLoop(1,this,this.onFrame),this._curActionName="hello",this._animator.play(this._curActionName)}loadUI(){this._changeActionButton=this.owner.addChild(new Vp("resources/image/img_btn_bg.png","\u64AD\u653E\u52A8\u753B")),this._changeActionButton.size(150,40),this._changeActionButton.labelSize=16,this._changeActionButton.sizeGrid="21,83,22,76",this._changeActionButton.stateNum=1,this._changeActionButton.labelColors="#ffffff",this._changeActionButton.pos(this.pageWidth/2-this._changeActionButton.width-10,this.pageHeight-50),this._changeActionButton.on(_p.CLICK,this,this.stypeFun0),this._changeActionButton2=this.owner.addChild(new Vp("resources/image/img_btn_bg.png","\u5207\u6362\u52A8\u4F5C\u72B6\u6001")),this._changeActionButton2.size(150,40),this._changeActionButton2.labelSize=16,this._changeActionButton2.sizeGrid="21,83,22,76",this._changeActionButton2.stateNum=1,this._changeActionButton2.labelColors="#ffffff",this._changeActionButton2.pos(this.pageWidth/2+10,this.pageHeight-50),this._changeActionButton2.on(_p.CLICK,this,this.stypeFun1)}stypeFun0(e="\u64AD\u653E\u52A8\u753B"){this._PlayStopIndex++,this._PlayStopIndex%3==0?(this._changeActionButton.label="\u64AD\u653E\u52A8\u753B",this._animator.speed=0):this._PlayStopIndex%3==1?(this._changeActionButton.label="\u52A8\u753B\u878D\u5408",this._animator.play(this._curActionName),this._animator.speed=1):this._PlayStopIndex%3==2&&(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.crossFade(this._curActionName,.5),this._animator.speed=1),e=this._changeActionButton.label}stypeFun1(e=0){this._curStateIndex++,this._curStateIndex%6==0?(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("hello"),this._curActionName="hello",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1Ahello",this._animator.speed=1):this._curStateIndex%6==1?(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("ride"),this._curActionName="ride",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1Aride",this._animator.speed=1):this._curStateIndex%6==2?(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("\u52A8\u4F5C\u72B6\u6001\u4E09"),this._curActionName="\u52A8\u4F5C\u72B6\u6001\u4E09",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A\u52A8\u4F5C\u72B6\u6001\u4E09",this._animator.speed=1):this._curStateIndex%6==3?(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("\u52A8\u4F5C\u72B6\u6001\u56DB"),this._curActionName="\u52A8\u4F5C\u72B6\u6001\u56DB",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A\u52A8\u4F5C\u72B6\u6001\u56DB",this._animator.speed=1):this._curStateIndex%6==4?(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("\u52A8\u4F5C\u72B6\u6001\u4E94"),this._curActionName="\u52A8\u4F5C\u72B6\u6001\u4E94",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A\u52A8\u4F5C\u72B6\u6001\u4E94",this._animator.speed=1):this._curStateIndex%6==5&&(this._changeActionButton.label="\u6682\u505C\u52A8\u753B",this._animator.speed=0,this._animator.play("\u52A8\u4F5C\u72B6\u6001\u516D"),this._curActionName="\u52A8\u4F5C\u72B6\u6001\u516D",this._textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A\u52A8\u4F5C\u72B6\u6001\u516D",this._animator.speed=1),e=this._curStateIndex}onFrame(){if(this._animator.speed>0){var e=this._animator.getControllerLayer(0).getCurrentPlayState().normalizedTime.toFixed(2);this._text.text="\u5F53\u524D\u52A8\u753B\u72B6\u6001\u8FDB\u5EA6\uFF1A"+e}}};o([An(Laya.Camera)],Ge.prototype,"camera",2),o([An(Laya.Scene3D)],Ge.prototype,"scene",2),o([An(Laya.Sprite3D)],Ge.prototype,"directionLight",2),Ge=o([Tg("nuIOBTqeSVuHHYonPX61Ug")],Ge);var Te=class extends Laya.AnimatorStateScript{constructor(){super()}onStateEnter(){console.log("\u52A8\u753B\u5F00\u59CB\u64AD\u653E\u4E86")}onStateUpdate(s){console.log("\u52A8\u753B\u72B6\u6001\u66F4\u65B0\u4E86")}onStateExit(){console.log("\u52A8\u753B\u9000\u51FA\u4E86")}};var Eg=Laya.Sprite3D,Bn=Laya.Vector3,Rg=Laya.Animator,Vn=Laya.AnimatorState,ns=Laya.Text,Ag=Laya.AnimatorStateScript,{regClass:Bg,property:_n}=Laya,ze=class extends h{constructor(){super();this.curStateIndex=0;this.text=new ns;this.textName=new ns;this.curActionName=null}onAwake(){super.base(this.camera),this.camera.transform.position=new Bn(0,3,5),this.camera.transform.rotate(new Bn(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1);var e=this.directionLight.transform.worldMatrix;e.setForward(new Bn(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,Laya.loader.load("resources/res/threeDimen/skinModel/BoneLinkScene/PangZi.lh").then(t=>{this.onLoadFinish(t)})}onLoadFinish(e){var t=this.scene.addChild(new Eg),a=t.addChild(e.create());this.animator=a.getChildAt(0).getComponent(Rg);var i=new Vn;i.name="hello",i.clipStart=296/581,i.clipEnd=346/581,i.clip=this.animator.getDefaultState().clip,i.clip.islooping=!0;var r=i.addScript(Tr);r.text=this.text,this.animator.speed=0,this.animator.getControllerLayer(0).addState(i);var n=new Vn;n.name="ride",n.clipStart=0/581,n.clipEnd=33/581,n.clip=this.animator.getDefaultState().clip,n.clip.islooping=!0;var l=n.addScript(Tr);l.text=this.text,this.animator.getControllerLayer(0).addState(n);var d=new Vn;d.name="\u52A8\u4F5C\u72B6\u6001\u4E09",d.clipStart=34/581,d.clipEnd=100/581,d.clip=this.animator.getDefaultState().clip,d.clip.islooping=!0,this.animator.speed=0;var c=d.addScript(Tr);c.text=this.text,this.animator.getControllerLayer(0).addState(d),this.textName.width=300,this.textName.align="center",this.textName.x=(this.pageWidth-this.textName.width)/2,this.textName.y=10,this.textName.overflow=ns.HIDDEN,this.textName.color="#FFFFFF",this.textName.fontSize=16,this.textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A",this.box2D.addChild(this.textName),this.text.width=300,this.text.align="center",this.text.x=(this.pageWidth-this.text.width)/2,this.text.y=50,this.text.overflow=ns.HIDDEN,this.text.color="#FFFFFF",this.text.fontSize=16,this.text.text="\u52A8\u753B\u72B6\u6001\uFF1A",this.box2D.addChild(this.text),super.addBottomButton(["\u5207\u6362\u52A8\u4F5C\u72B6\u6001","\u5207\u6362\u52A8\u4F5C\u72B6\u6001","\u5207\u6362\u52A8\u4F5C\u72B6\u6001"],this,[this.change,this.change,this.change])}change(){this.curStateIndex++,this.curStateIndex%3==0?(this.animator.speed=0,this.animator.play("hello"),this.textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1Ahello",this.animator.speed=1):this.curStateIndex%3==1?(this.animator.speed=0,this.animator.play("ride"),this.textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1Aride",this.animator.speed=1):this.curStateIndex%3==2&&(this.animator.speed=0,this.animator.play("\u52A8\u4F5C\u72B6\u6001\u4E09"),this.textName.text="\u5F53\u524D\u52A8\u4F5C\u72B6\u6001\u540D\u79F0\uFF1A\u52A8\u4F5C\u72B6\u6001\u4E09",this.animator.speed=1)}};o([_n(Laya.Camera)],ze.prototype,"camera",2),o([_n(Laya.Scene3D)],ze.prototype,"scene",2),o([_n(Laya.Sprite3D)],ze.prototype,"directionLight",2),ze=o([Bg("D1wUKonZQrSAK55LM_Wgdw")],ze);var Tr=class extends Ag{constructor(){super();this._text=null}get text(){return this._text}set text(e){this._text=e}onStateEnter(){console.log("\u52A8\u753B\u5F00\u59CB\u64AD\u653E\u4E86"),this._text.text="\u52A8\u753B\u72B6\u6001\uFF1A\u52A8\u753B\u5F00\u59CB\u64AD\u653E"}onStateUpdate(e){console.log("\u52A8\u753B\u72B6\u6001\u66F4\u65B0\u4E86"),this._text.text="\u52A8\u753B\u72B6\u6001\uFF1A\u52A8\u753B\u66F4\u65B0\u4E2D"}onStateExit(){console.log("\u52A8\u753B\u9000\u51FA\u4E86"),this._text.text="\u52A8\u753B\u72B6\u6001\uFF1A\u52A8\u753B\u5F00\u59CB\u9000\u51FA"}};var Vg=Laya.Animator,_g=Laya.AnimatorState,{regClass:Pg,property:kg}=Laya,Er=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this._animator=this.camera.getComponent(Vg),this._animatorState=this._animator.getControllerLayer(0).getAnimatorState("a1"),this._animatorClip=this._animatorState.clip,console.log(this._animatorClip),super.addBottomButton(["\u5207\u6362\u52A8\u753B","\u5207\u6362\u52A8\u753B"],this,[this.changeAnimation2,this.changeAnimation1]),Laya.loader.load("resources/res/threeDimen/scene/cameraDonghua/Conventional/Assets/a2.lani").then(e=>{let t=e;var a=new _g;a.name="a2",a.clip=t,a.clip.islooping=!0,this._animator.getControllerLayer(0).addState(a)})}changeAnimation2(){this._animator.play("a2")}changeAnimation1(){this._animator.play("a1")}};o([kg(Laya.Camera)],Er.prototype,"camera",2),Er=o([Pg("UMTxFgK1QXmDYMjFi1ApUg")],Er);var Fg=Laya.Animator,{regClass:Ig,property:Pp}=Laya,zt=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.getChildByName("Cube");this._animator=e.getComponent(Fg),this._animatorState=this._animator.getControllerLayer(0).getAnimatorState("Color"),this._animatorClip=this._animatorState.clip,console.log(this._animatorClip)}};o([Pp(Laya.Camera)],zt.prototype,"camera",2),o([Pp(Laya.Scene3D)],zt.prototype,"scene",2),zt=o([Ig("8hcBBcLGQ3-GVBjRftqBoQ")],zt);var Hg=Laya.Animator,Og=Laya.AnimatorState,{regClass:Ng,property:kp}=Laya,Xt=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.getChildByName("Cube");this._animator=e.getComponent(Hg),this._animatorState=this._animator.getControllerLayer(0).getAnimatorState("a1"),this._animatorClip=this._animatorState.clip,console.log(this._animatorClip),super.addBottomButton(["\u5207\u6362\u52A8\u753B","\u5207\u6362\u52A8\u753B"],this,[this.changeAnimation2,this.changeAnimation1]),Laya.loader.load("resources/res/threeDimen/scene/LayaScene_RigidbodyAnimation/Conventional/Assets/LayaAir3D/a2.lani").then(t=>{let a=t;var i=new Og;i.name="a2",i.clip=a,i.clip.islooping=!0,this._animator.getControllerLayer(0).addState(i)})}changeAnimation2(){this._animator.play("a2")}changeAnimation1(){this._animator.play("a1")}};o([kp(Laya.Camera)],Xt.prototype,"camera",2),o([kp(Laya.Scene3D)],Xt.prototype,"scene",2),Xt=o([Ng("KJyG1HWNR4KNdxu072BoKQ")],Xt);var hs=Laya.Vector3,Ug=Laya.Animator,Fp=Laya.Loader,{regClass:Wg,property:Pn}=Laya,Xe=class extends h{constructor(){super();this.animatorName=[["PickUp","PotionDrink","BattleWalkRight","VictoryStart","DefendStart","Die","Interact","VictoryMaintain"],["DefendHit_SwordAndShield","SwordAndShiled2","Defend_SwordAndShield","SwordAndShiled","Attack04_Start_SwordAndShield","Attack04_SwordAndShiled"]];this.widthNums=20;this.step=2.5}onAwake(){super.base(this.camera),this.camera.transform.position=new hs(-16.4,2.96,24.3),this.camera.transform.localRotationEuler=new hs(-7.5,-30,0),this.directionLight.getComponent(Laya.DirectionLightCom).intensity=.5;var e=["resources/res/threeDimen/texAnimation/Attack01/Attack01.lh","resources/res/threeDimen/texAnimation/role/role.lh"];Laya.loader.load(e).then(()=>{this.oriSprite3D=Fp.createNodes(e[0]),this.sceneBuild(0),this.oriSprite3D=Fp.createNodes(e[1]),this.sceneBuild(1)})}cloneSprite(e,t,a){var i=this.oriSprite3D.clone();this.scene.addChild(i);var r=i.getComponent(Ug),n=Math.round(Math.random()*5);r.play(this.animatorName[a][n],0,Math.random()),i.transform.position=e,i.transform.rotationEuler=t}sceneBuild(e){for(var t=-.5*this.step*this.widthNums,a=-1*t,i=t;i<a;i+=this.step)for(var r=t;r<a;r+=this.step){var n=(Math.random()-.5)*5,l=(Math.random()-.5)*5,d=new hs(0,Math.random()*180,0);this.cloneSprite(new hs(i+n,0,r+l),d,e)}}};o([Pn(Laya.Camera)],Xe.prototype,"camera",2),o([Pn(Laya.Scene3D)],Xe.prototype,"scene",2),o([Pn(Laya.Sprite3D)],Xe.prototype,"directionLight",2),Xe=o([Wg("BAD-7dYzRqqpZMLVWKU-hA")],Xe);var Gg=Laya.Scene3D,ls=Laya.Text,zg=Laya.Handler,kn=Laya.Event,{regClass:Xg,property:Ip}=Laya,Yt=class extends h{constructor(){super();this.fontName="fontClip"}onAwake(){super.base(this.camera),this.loadFont(),Gg.load("resources/res/threeDimen/LayaScene_MaskModelTest/Conventional/MaskModelTest.ls",zg.create(this,e=>{this.scene.addChild(e)}))}loadFont(){Laya.loader.load("resources/res/threeDimen/LayaScene_MaskModelTest/font/fontClip.fnt",Laya.Loader.FONT).then(e=>{this.onFontLoaded(e)})}onFontLoaded(e){ls.registerBitmapFont(this.fontName,e),this.createText(this.fontName),this.createText1(this.fontName),this.createText2(this.fontName)}createText(e){var t=new ls;t.width=250,t.wordWrap=!0,t.text="\u5E26\u6709\u9AA8\u9ABC\u906E\u7F69\u7684\u52A8\u753B",t.color="#FFFFFFFF",t.size(200,300),t.leading=5,t.fontSize=15,t.zOrder=999999999,t.pos(this.box2D.width/2-50,this.box2D.height/2),this.box2D.on(kn.RESIZE,t,()=>{t.pos(this.box2D.width/2-50,this.box2D.height/2)}),this.box2D.addChild(t)}createText1(e){var t=new ls;t.width=250,t.wordWrap=!0,t.text="\u6B63\u5E38\u52A8\u753B\u4E00",t.color="#FFFFFFFF",t.size(200,300),t.leading=5,t.fontSize=15,t.zOrder=999999999,t.pos(this.box2D.width/2-240,this.box2D.height/2),this.box2D.on(kn.RESIZE,t,()=>{t.pos(this.box2D.width/2-240,this.box2D.height/2)}),this.box2D.addChild(t)}createText2(e){var t=new ls;t.width=250,t.wordWrap=!0,t.text="\u6B63\u5E38\u52A8\u753B\u4E8C",t.color="#FFFFFFFF",t.size(200,300),t.leading=5,t.zOrder=999999999,t.fontSize=15,t.pos(this.box2D.width/2+140,this.box2D.height/2),this.box2D.on(kn.RESIZE,t,()=>{t.pos(this.box2D.width/2+140,this.box2D.height/2)}),this.box2D.addChild(t)}};o([Ip(Laya.Camera)],Yt.prototype,"camera",2),o([Ip(Laya.Scene3D)],Yt.prototype,"scene",2),Yt=o([Xg("LO4NU51pSQCSRRh6VLToAQ")],Yt);var Yg=Laya.Button,{regClass:Kg,property:jR}=Laya,ps=class extends h{constructor(){super();this.COLUMNS=2;this.BUTTON_WIDTH=147;this.BUTTON_HEIGHT=165/3;this.HORIZONTAL_SPACING=200;this.VERTICAL_SPACING=100}onAwake(){super.base(),this.skins=["resources/res/ui/button-1.png","resources/res/ui/button-2.png","resources/res/ui/button-3.png","resources/res/ui/button-4.png","resources/res/ui/button-5.png","resources/res/ui/button-6.png"],this.xOffset=(this.pageWidth-this.HORIZONTAL_SPACING*(this.COLUMNS-1)-this.BUTTON_WIDTH)/2,this.yOffset=(this.pageHeight-this.VERTICAL_SPACING*(this.skins.length/this.COLUMNS-1)-this.BUTTON_HEIGHT)/2,Laya.loader.load(this.skins).then(()=>{this.onUIAssetsLoaded()})}onUIAssetsLoaded(e=null){for(var t=0,a=this.skins.length;t<a;++t){var i=this.createButton(this.skins[t]),r=t%this.COLUMNS*this.HORIZONTAL_SPACING+this.xOffset,n=(t/this.COLUMNS|0)*this.VERTICAL_SPACING+this.yOffset;i.pos(r,n),console.log(r,n)}}createButton(e){var t=new Yg(e);return this.box2D.addChild(t),t}};ps=o([Kg("C0bqhnhsTFqf1gYjM2STIQ")],ps);var Qg=Laya.CheckBox,{regClass:Jg,property:eA}=Laya,ds=class extends h{constructor(){super();this.COL_AMOUNT=2;this.ROW_AMOUNT=3;this.HORIZONTAL_SPACING=200;this.VERTICAL_SPACING=100;this.X_OFFSET=100;this.Y_OFFSET=50}onAwake(){super.base(),this.skins=["resources/res/ui/checkbox (1).png","resources/res/ui/checkbox (2).png","resources/res/ui/checkbox (3).png","resources/res/ui/checkbox (4).png","resources/res/ui/checkbox (5).png","resources/res/ui/checkbox (6).png"],Laya.loader.load(this.skins).then(()=>{this.onCheckBoxSkinLoaded()})}onCheckBoxSkinLoaded(e=null){for(var t,a=0;a<this.COL_AMOUNT;++a)for(var i=0;i<this.ROW_AMOUNT;++i)t=this.createCheckBox(this.skins[a*this.ROW_AMOUNT+i]),t.selected=!0,t.x=this.HORIZONTAL_SPACING*a+this.X_OFFSET,t.y+=this.VERTICAL_SPACING*i+this.Y_OFFSET,a==0&&(t.y+=20,t.on("change",this,this.updateLabel,[t]),this.updateLabel(t))}createCheckBox(e){var t=new Qg(e);return this.box2D.addChild(t),t.labelColors="white",t.labelSize=20,t.labelFont="Microsoft YaHei",t.labelPadding="3,0,0,5",t}updateLabel(e){e.label=e.selected?"\u5DF2\u9009\u4E2D":"\u672A\u9009\u4E2D"}};ds=o([Jg("5PZMi_gUSVii_7oaA2PC_A")],ds);var jg=Laya.Image,qg=Laya.Button,Hp=Laya.Clip,{regClass:Zg,property:iA}=Laya,cs=class extends h{constructor(){super();this.buttonSkin="resources/res/ui/button-7.png";this.clipSkin="resources/res/ui/num0-9.png";this.bgSkin="resources/res/ui/coutDown.png"}onAwake(){super.base(),Laya.loader.load([this.buttonSkin,this.clipSkin,this.bgSkin]).then(()=>{this.onSkinLoaded()})}onSkinLoaded(e=null){this.showBg(),this.createTimerAnimation(),this.showTotalSeconds(),this.createController()}showBg(){var e=new jg(this.bgSkin);e.size(224,302),e.pos(this.pageWidth-e.width>>1,this.pageHeight-e.height>>1),this.box2D.addChild(e)}createTimerAnimation(){this.counter=new Hp(this.clipSkin,10,1),this.counter.autoPlay=!0,this.counter.interval=1e3,this.counter.x=(this.pageWidth-this.counter.width)/2-35,this.counter.y=(this.pageHeight-this.counter.height)/2-40,this.box2D.addChild(this.counter)}showTotalSeconds(){var e=new Hp(this.clipSkin,10,1);e.index=e.clipX-1,e.pos(this.counter.x+60,this.counter.y),this.box2D.addChild(e)}createController(){this.controller=new qg(this.buttonSkin,"\u6682\u505C"),this.controller.labelBold=!0,this.controller.labelColors="#FFFFFF,#FFFFFF,#FFFFFF,#FFFFFF",this.controller.size(84,30),this.controller.on("click",this,this.onClipSwitchState),this.controller.x=(this.pageWidth-this.controller.width)/2,this.controller.y=(this.pageHeight-this.controller.height)/2+110,this.box2D.addChild(this.controller)}onClipSwitchState(e=null){this.counter.isPlaying?(this.counter.stop(),this.currFrame=this.counter.index,this.controller.label="\u64AD\u653E"):(this.counter.play(),this.counter.index=this.currFrame,this.controller.label="\u6682\u505C")}};cs=o([Zg("UDnyhMhiSt-8KQ2r9zTLqA")],cs);var $g=Laya.ColorPicker,ev=Laya.Handler,{regClass:tv,property:hA}=Laya,ms=class extends h{constructor(){super();this.skin="resources/res/ui/colorPicker.png"}onAwake(){super.base(),Laya.loader.load(this.skin).then(()=>{this.onColorPickerSkinLoaded()})}onColorPickerSkinLoaded(e=null){var t=new $g;t.selectedColor="#ff0033",t.skin=this.skin,t.pos(100,100),t.changeHandler=new ev(this,this.onChangeColor,[t]),this.box2D.addChild(t),this.onChangeColor(t)}onChangeColor(e,t=null){console.log(e.selectedColor)}};ms=o([tv("Jq8UKOAVSvSSd7sZjIbk1A")],ms);var av=Laya.ComboBox,rv=Laya.Handler,{regClass:iv,property:cA}=Laya,us=class extends h{constructor(){super();this.skin="resources/res/ui/combobox.png"}onAwake(){super.base(),Laya.loader.load(this.skin).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){var t=this.createComboBox(this.skin);t.autoSize=!0,t.pos((this.pageWidth-t.width)/2,100),t.autoSize=!1}createComboBox(e){var t=new av(e,"item0,item1,item2,item3,item4,item5");return t.labelSize=30,t.itemSize=25,t.selectHandler=new rv(this,this.onSelect,[t]),this.box2D.addChild(t),t}onSelect(e,t=null){console.log("\u9009\u4E2D\u4E86\uFF1A "+e.selectedLabel)}};us=o([iv("bnnjPwoDTN6a3w4G7LZZyQ")],us);var Op=Laya.Dialog,ov=Laya.Image,sv=Laya.Button,{regClass:nv,property:LA}=Laya,ys=class extends h{constructor(){super();this.DIALOG_WIDTH=220;this.DIALOG_HEIGHT=275;this.CLOSE_BTN_WIDTH=43;this.CLOSE_BTN_PADDING=5}onAwake(){super.base(),this.assets=["resources/res/ui/dialog (1).png","resources/res/ui/close.png"],Laya.loader.load(this.assets).then(()=>{this.onSkinLoadComplete()})}onSkinLoadComplete(e=null){this.dialog=new Op;var t=new ov(this.assets[0]);this.dialog.addChild(t);var a=new sv(this.assets[1]);a.name=Op.CLOSE,a.pos(this.DIALOG_WIDTH-this.CLOSE_BTN_WIDTH-this.CLOSE_BTN_PADDING,this.CLOSE_BTN_PADDING),this.dialog.addChild(a),this.dialog.dragArea="0,0,"+this.DIALOG_WIDTH+","+this.DIALOG_HEIGHT,this.dialog.show()}onDestroy(){this.dialog&&this.dialog.close()}};ys=o([nv("brJ4nU-PRJugVAV-CrZRyg")],ys);var Rr=Laya.FontClip,{regClass:hv,property:xA}=Laya,Ls=class extends h{constructor(){super();this.TestClipNum="resources/res/ui/fontClip_num.png";this._ClipNum="resources/res/ui/fontClip_num.png";this._ClipNum1="resources/res/ui/fontClip_num.png";this.TestFontClip="resources/res/ui/fontClip.png";this._FontClip="resources/res/ui/fontClip.png"}onAwake(){super.base(),Laya.loader.load([this.TestClipNum,this.TestFontClip,this._ClipNum,this._FontClip,this._ClipNum1]).then(()=>{this.ShowContent()})}ShowContent(){var e=new Rr(this._ClipNum),t=new Rr(this._FontClip),a=new Rr(this.TestFontClip),i=new Rr(this.TestClipNum),r=new Rr(this._ClipNum1);e.pos(240,400),e.size(250,50),e.sheet="0123456789",e.value="114499",e.spaceY=10,i.pos(200,300),i.sheet="0123456789",i.value="0123456789",r.pos(150,100),r.direction="vertical",r.sheet="0123456789",r.value="223388",t.pos(240,200),t.sheet="\u9F20\u725B\u864E\u5154\u9F99\u86C7\u9A6C\u7F8A \u7334\u9E21\u72D7\u732A\u5E74\u5FEB\u4E50",t.value="\u732A\u5E74\u5FEB\u4E50",t.spaceY=10,a.pos(200,100),a.sheet="\u9F20\u725B\u864E\u5154\u9F99\u86C7\u9A6C\u7F8A\u7334\u9E21\u72D7\u732A\u5E74\u5FEB\u4E50",a.value="\u9F20\u725B\u864E\u5154\u9F99\u86C7\u9A6C\u7F8A\u7334\u9E21\u72D7\u732A\u5E74\u5FEB\u4E50",a.spaceY=10,this.box2D.addChild(e),this.box2D.addChild(t),this.box2D.addChild(a),this.box2D.addChild(i),this.box2D.addChild(r)}};Ls=o([hv("FHCUwBwVRsGYpLCdH--sLA")],Ls);var lv=Laya.Image,{regClass:pv,property:wA}=Laya,gs=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var s=new lv("resources/res/ui/dialog (3).png");s.pos(165,62.5),this.box2D.addChild(s)}};gs=o([pv("-75LazDfR2iCBqTf5bS6xQ")],gs);var dv=Laya.TextInput,{regClass:cv,property:EA}=Laya,vs=class extends h{constructor(){super();this.SPACING=100;this.INPUT_WIDTH=300;this.INPUT_HEIGHT=50;this.Y_OFFSET=50}onAwake(){super.base(),this.skins=["resources/res/ui/input (1).png","resources/res/ui/input (2).png","resources/res/ui/input (3).png","resources/res/ui/input (4).png"],Laya.loader.load(this.skins).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){for(var t=0;t<this.skins.length;++t){var a=this.createInput(this.skins[t]);a.prompt="Type:",a.x=(this.pageWidth-a.width)/2,a.y=t*this.SPACING+this.Y_OFFSET}}createInput(e){var t=new dv;return t.skin=e,t.size(300,50),t.sizeGrid="0,40,0,40",t.font="Arial",t.fontSize=30,t.bold=!0,t.color="#606368",this.box2D.addChild(t),t}};vs=o([cv("OncikTGgSkey7MxcqMoRRg")],vs);var mv=Laya.Label,{regClass:uv,property:VA}=Laya,Ss=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){this.createLabel("#FFFFFF",null).pos(30,50),this.createLabel("#00FFFF",null).pos(290,50),this.createLabel("#FFFF00","#FFFFFF").pos(30,100),this.createLabel("#000000","#FFFFFF").pos(290,100),this.createLabel("#FFFFFF","#00FFFF").pos(30,150),this.createLabel("#0080FF","#00FFFF").pos(290,150)}createLabel(s,e){var a=new mv;return a.font="Microsoft YaHei",a.text="SAMPLE DEMO",a.fontSize=30,a.color=s,e&&(a.stroke=4,a.strokeColor=e),this.box2D.addChild(a),a}};Ss=o([uv("_25IvzciTRSki8LyKVQk9g")],Ss);var yv=Laya.List,{regClass:Lv,property:FA}=Laya,xs=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var e=new yv;e.itemRender=Ar,e.repeatX=1,e.repeatY=4,e.x=(this.pageWidth-Ar.WID)/2,e.y=(this.pageHeight-Ar.HEI*e.repeatY)/2,e.scrollType=Laya.ScrollType.Vertical,e.vScrollBarSkin="",e.elasticEnabled=!0,e.scrollBar.elasticBackTime=300,e.scrollBar.elasticDistance=50,e.selectEnable=!0,e.selectHandler=new Laya.Handler(this,this.onSelect),e.renderHandler=new Laya.Handler(this,this.updateItem),this.box2D.addChild(e);for(var t=[],a=0;a<10;++a)t.push("resources/res/ui/listskins/1.jpg"),t.push("resources/res/ui/listskins/2.jpg"),t.push("resources/res/ui/listskins/3.jpg"),t.push("resources/res/ui/listskins/4.jpg"),t.push("resources/res/ui/listskins/5.jpg");e.array=t,this._list=e}onMuseHandler(e,t){console.log("type:"+e.type+"ddd--"+this._list.scrollBar.value+"---index:"+t);var a,i;if(e.type=="mousedown"){this._oldY=Laya.stage.mouseY;let d=this._list.getCell(t);this._itemHeight=d.height}else if(e.type=="mouseout"){i=Laya.stage.mouseY;var r=Math.abs(i-this._oldY),n=Math.ceil(r/this._itemHeight);console.log("----------tempIndex:"+n+"---_itemHeight:"+this._itemHeight+"---chazhiY:"+r);var l}}updateItem(e,t){e.setImg(e.dataSource)}onSelect(e){console.log("\u5F53\u524D\u9009\u62E9\u7684\u7D22\u5F15\uFF1A"+e)}};xs=o([Lv("bddoqEOXTYKBSCLQC_S67A")],xs);var Kt=class Kt extends Laya.Box{constructor(){super();this.size(Kt.WID,Kt.HEI),this.img=new Laya.Image,this.addChild(this.img)}setImg(e){this.img.skin=e}};Kt.WID=373,Kt.HEI=85;var Ar=Kt;var gv=Laya.Panel,vv=Laya.Image,{regClass:Sv,property:NA}=Laya,fs=class extends h{constructor(){super()}onAwake(){super.base(),this.setup()}setup(){var s=new gv;s.hScrollBarSkin="resources/res/ui/hscroll.png",s.hScrollBar.hide=!0,s.size(600,275),s.x=(this.pageWidth-s.width)/2,s.y=(this.pageHeight-s.height)/2,this.box2D.addChild(s);for(var e,t=0;t<4;t++)e=new vv("resources/res/ui/dialog (1).png"),e.x=t*250,s.addChild(e)}};fs=o([Sv("0rE_28qdTIiXKByoZcn5tg")],fs);var xv=Laya.ProgressBar,fv=Laya.Handler,{regClass:Dv,property:zA}=Laya,Ds=class extends h{constructor(){super()}onAwake(){super.base(),Laya.loader.load(["resources/res/ui/progressBar.png","resources/res/ui/progressBar$bar.png"]).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){this.progressBar=new xv("resources/res/ui/progressBar.png"),this.progressBar.width=400,this.progressBar.x=(this.pageWidth-this.progressBar.width)/2,this.progressBar.y=this.pageHeight/2,this.progressBar.sizeGrid="5,5,5,5",this.progressBar.changeHandler=new fv(this,this.onChange),this.box2D.addChild(this.progressBar),Laya.timer.loop(100,this,this.changeValue)}changeValue(){this.progressBar.value>=1&&(this.progressBar.value=0),this.progressBar.value+=.05}onChange(e){console.log("\u8FDB\u5EA6\uFF1A"+Math.floor(e*100)+"%")}};Ds=o([Dv("whqJ7uvWSeGhGmMHcAAg7g")],Ds);var Cv=Laya.RadioGroup,{regClass:wv,property:QA}=Laya,Cs=class extends h{constructor(){super();this.SPACING=150;this.X_OFFSET=200;this.Y_OFFSET=80}onAwake(){super.base(),this.skins=["resources/res/ui/radioButton (1).png","resources/res/ui/radioButton (2).png","resources/res/ui/radioButton (3).png"],Laya.loader.load(this.skins).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){for(var t=0;t<this.skins.length;++t){var a=this.createRadioGroup(this.skins[t]);a.selectedIndex=t,a.x=t*this.SPACING+this.X_OFFSET,a.y=this.Y_OFFSET}}createRadioGroup(e){var t=new Cv;return t.skin=e,t.space=70,t.direction="v",t.labels="Item1, Item2, Item3",t.labelColors="#787878,#d3d3d3,#FFFFFF",t.labelSize=20,t.labelBold=!0,t.labelPadding="5,0,0,5",t.selectHandler=new Laya.Handler(this,this.onSelectChange),this.box2D.addChild(t),t}onSelectChange(e){console.log("\u4F60\u9009\u62E9\u4E86\u7B2C "+(e+1)+" \u9879")}};Cs=o([wv("pmKi7EJ8ScqG0XO-J7I9iA")],Cs);var bv=Laya.HScrollBar,Mv=Laya.VScrollBar,Np=Laya.Handler,{regClass:Tv,property:ZA}=Laya,ws=class extends h{constructor(){super()}onAwake(){super.base();var s=[];s.push("resources/res/ui/hscroll.png","resources/res/ui/hscroll$bar.png","resources/res/ui/hscroll$down.png","resources/res/ui/hscroll$up.png"),s.push("resources/res/ui/vscroll.png","resources/res/ui/vscroll$bar.png","resources/res/ui/vscroll$down.png","resources/res/ui/vscroll$up.png"),Laya.loader.load(s).then(()=>{this.onLoadComplete()})}onLoadComplete(s=null){this.placeHScroller(),this.placeVScroller()}placeHScroller(){var s=new bv;s.skin="resources/res/ui/hscroll.png",s.width=300,s.pos(50,170),s.min=0,s.max=100,s.changeHandler=new Np(this,this.onChange),this.box2D.addChild(s)}placeVScroller(){var s=new Mv;s.skin="resources/res/ui/vscroll.png",s.height=300,s.pos(400,50),s.min=0,s.max=100,s.changeHandler=new Np(this,this.onChange),this.box2D.addChild(s)}onChange(s){console.log("\u6EDA\u52A8\u6761\u7684\u4F4D\u7F6E\uFF1A value="+s)}};ws=o([Tv("HR_w46iyRZW4_NT6ay07Sg")],ws);var Ev=Laya.HSlider,Rv=Laya.VSlider,Fn=Laya.Handler,{regClass:Av,property:aB}=Laya,bs=class extends h{constructor(){super()}onAwake(){super.base();var s=[];s.push("resources/res/ui/hslider.png","resources/res/ui/hslider$bar.png"),s.push("resources/res/ui/vslider.png","resources/res/ui/vslider$bar.png"),Laya.loader.load(s,Fn.create(this,this.onLoadComplete))}onLoadComplete(s=null){this.placeHSlider(),this.placeVSlider()}placeHSlider(){var s=new Ev;s.skin="resources/res/ui/hslider.png",s.width=300,s.pos(50,170),s.min=0,s.max=100,s.value=50,s.tick=1,s.changeHandler=new Fn(this,this.onChange),this.box2D.addChild(s)}placeVSlider(){var s=new Rv;s.skin="resources/res/ui/vslider.png",s.height=300,s.pos(400,50),s.min=0,s.max=100,s.value=50,s.tick=1,s.changeHandler=new Fn(this,this.onChange),this.box2D.addChild(s)}onChange(s){console.log("\u6ED1\u5757\u7684\u4F4D\u7F6E\uFF1A"+s)}};bs=o([Av("ZankRI9VQLikHwrUQY6rfQ")],bs);var Bv=Laya.Tab,Vv=Laya.Handler,{regClass:_v,property:sB}=Laya,Ms=class extends h{constructor(){super();this.skins=["resources/res/ui/tab1.png","resources/res/ui/tab2.png"]}onAwake(){super.base(),Laya.loader.load(this.skins).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){var t=this.createTab(this.skins[0]);t.pos(40,120),t.labelColors="#000000,#d3d3d3,#333333";var a=this.createTab(this.skins[1]);a.pos(40,220),a.labelColors="#FFFFFF,#8FB299,#FFFFFF"}createTab(e){var t=new Bv;return t.skin=e,t.labelBold=!0,t.labelSize=20,t.labelStrokeColor="#000000",t.labels="Tab Control 1,Tab Control 2,Tab Control 3",t.labelPadding="0,0,0,0",t.selectedIndex=1,this.onSelect(t.selectedIndex),t.selectHandler=new Vv(this,this.onSelect),this.box2D.addChild(t),t}onSelect(e){console.log("\u5F53\u524D\u9009\u62E9\u7684\u6807\u7B7E\u9875\u7D22\u5F15\u4E3A "+e)}};Ms=o([_v("0Jc72s1zRvGZcJJFGol5pg")],Ms);var Pv=Laya.TextArea,{regClass:kv,property:pB}=Laya,Ts=class extends h{constructor(){super();this.skin="resources/res/ui/textarea.png"}onAwake(){super.base(),Laya.loader.load(this.skin).then(()=>{this.onLoadComplete()})}onLoadComplete(e=null){let t=new Pv("");t.skin=this.skin,t.font="Arial",t.fontSize=18,t.bold=!0,t.color="#3d3d3d",t.pos(100,15),t.size(375,355),t.padding="70,8,8,8",this.owner.addChild(t)}};Ts=o([kv("ByhEvmTZSXyRPt2FPm1jOg")],Ts);var Fv=Laya.Label,Iv=Laya.Tree,Hv=Laya.Box,In=Laya.Clip,{regClass:Ov,property:uB}=Laya,Es=class extends h{constructor(){super()}onAwake(){super.base();var s=["resources/res/ui/vscroll.png","resources/res/ui/vscroll$bar.png","resources/res/ui/vscroll$down.png","resources/res/ui/vscroll$up.png","resources/res/ui/tree/clip_selectBox.png","resources/res/ui/tree/clip_tree_folder.png","resources/res/ui/tree/clip_tree_arrow.png"];Laya.loader.load(s).then(()=>{this.onLoadComplete()})}onLoadComplete(s=null){for(var e="<data>",t=0;t<5;++t){e+="<item label='Directory "+(t+1)+"' isOpen='true'>";for(var a=0;a<5;++a)e+="<leaf label='File "+(a+1)+"'/>";e+="</item>"}e+="</data>";var i=new Laya.XML(e),r=new Iv;r.scrollBarSkin="resources/res/ui/vscroll.png",r.itemRender=Hn,r.xml=i,r.size(300,300),r.x=(this.pageWidth-r.width)/2,r.y=(this.pageHeight-r.height)/2,this.box2D.addChild(r)}};Es=o([Ov("0793pAoeRsyQSB-JiuDHRw")],Es);var Hn=class extends Hv{constructor(){super(),this.right=0,this.left=0;var s=new In("resources/res/ui/tree/clip_selectBox.png",1,2);s.name="selectBox",s.height=32,s.x=13,s.left=12,this.addChild(s);var e=new In("resources/res/ui/tree/clip_tree_folder.png",1,3);e.name="folder",e.x=14,e.y=4,this.addChild(e);var t=new Fv("treeItem");t.name="label",t.fontSize=20,t.color="#FFFFFF",t.padding="6,0,0,13",t.width=150,t.height=30,t.x=33,t.y=1,t.left=33,t.right=0,this.addChild(t);var a=new In("resources/res/ui/tree/clip_tree_arrow.png",1,2);a.name="arrow",a.x=0,a.y=5,this.addChild(a)}};var Up=`#define SHADER_NAME GlassShaderVS\r
#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
#include "VertexCommon.glsl";\r
varying vec2 v_Texcoord0;\r
varying vec4 v_ScreenTexcoord;\r
\r
void main() {\r
	Vertex vertex;\r
	getVertexParams(vertex);\r
	mat4 worldMat = getWorldMatrix();\r
	vec3 positionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
	gl_Position = getPositionCS(positionWS);\r
	gl_Position = remapPositionZ(gl_Position);\r
	v_Texcoord0= transformUV(a_Texcoord0, u_TilingOffset);\r
	//v_ScreenTexcoord =vec2((gl_Position.x/gl_Position.w+1.0)*0.5, (gl_Position.y/gl_Position.w+1.0)*0.5);\r
	v_ScreenTexcoord = gl_Position*0.5;\r
	v_ScreenTexcoord.xy = vec2(v_ScreenTexcoord.x,v_ScreenTexcoord.y)+v_ScreenTexcoord.w;\r
	v_ScreenTexcoord.zw = gl_Position.zw;\r
	\r
}`;var Wp=`#define SHADER_NAME GlassShaderFS\r
\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
varying vec4 v_ScreenTexcoord;\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_screenTexture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
\r
#ifdef Gamma_u_screenTexture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_tintTexure\r
    return mainSampler;\r
}\r
void main()\r
{\r
	vec4 color;\r
	vec4 screenTexColor = sampleMainTex(u_screenTexture,v_ScreenTexcoord.xy/v_ScreenTexcoord.w);\r
	vec4 tintTexColor = sampleMainTex(u_tintTexure, v_Texcoord0);\r
	color = mix(screenTexColor, tintTexColor,0.5);\r
	gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}\r
\r
`;var Br=class p extends Laya.Material{static init(){var s={a_Position:[Laya.VertexMesh.MESH_POSITION0,Laya.ShaderDataType.Vector4],a_Normal:[Laya.VertexMesh.MESH_NORMAL0,Laya.ShaderDataType.Vector3],a_Texcoord0:[Laya.VertexMesh.MESH_TEXTURECOORDINATE0,Laya.ShaderDataType.Vector2],a_Tangent0:[Laya.VertexMesh.MESH_TANGENT0,Laya.ShaderDataType.Vector4]},e={u_tintTexure:Laya.ShaderDataType.Texture2D,u_screenTexture:Laya.ShaderDataType.Texture2D,u_normalTexture:Laya.ShaderDataType.Texture2D,u_TilingOffset:Laya.ShaderDataType.Vector4,u_tintAmount:Laya.ShaderDataType.Color},t=Laya.Shader3D.add("GlassShader",!1),a=new Laya.SubShader(s,e);t.addSubShader(a),a.addShaderPass(Up,Wp),p.TINTTEXTURE=Laya.Shader3D.propertyNameToID("u_tintTexure"),p.NORMALTEXTURE=Laya.Shader3D.propertyNameToID("u_normalTexture"),p.TILINGOFFSET=Laya.Shader3D.propertyNameToID("u_TilingOffset"),p.ALBEDOCOLOR=Laya.Shader3D.propertyNameToID("u_tintAmount")}constructor(s){super(),this.setShaderName("GlassShader"),this.renderModeSet(),this._shaderValues.setVector(p.TILINGOFFSET,new Laya.Vector4(1,1,0,0)),this._shaderValues.setTexture(p.TINTTEXTURE,s)}renderModeSet(){this.alphaTest=!1,this.renderQueue=Laya.Material.RENDERQUEUE_TRANSPARENT,this.depthWrite=!0,this.cull=Laya.RenderState.CULL_BACK,this.blend=Laya.RenderState.BLEND_DISABLE,this.depthTest=Laya.RenderState.DEPTHTEST_LESS}};var Vr=`#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}`;var Gp=`#define SHADER_NAME BlurHorizontal\r
varying vec2 v_Texcoord0;\r
#include "Color.glsl";\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    vec2 uv = v_Texcoord0;\r
    vec2 uvOffset = vec2(1.0,0.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\r
    uv = uv - uvOffset*3.0;\r
    //\u9AD8\u65AF\u53C2\u6570\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.324*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
\r
    gl_FragColor = color;\r
    gl_FragColor = outputTransform(gl_FragColor);\r
\r
    \r
}`;var zp=`#define SHADER_NAME BlurVertical\r
varying vec2 v_Texcoord0;\r
#include "Color.glsl";\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    vec2 uv = v_Texcoord0;\r
    vec2 uvOffset = vec2(0.0,1.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\r
    uv = uv - uvOffset*3.0;\r
    //\u9AD8\u65AF\u53C2\u6570\r
    color+=0.0205*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.324*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*texture2D(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0205*texture2D(u_MainTex,uv);\r
\r
    gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
    \r
\r
    \r
}`;var Xp=`#define SHADER_NAME BlurDownSample\r
varying vec2 v_Texcoord0;\r
#include "Color.glsl";\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(1.0,0.0));\r
	color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(-1.0,0.0));\r
	color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,-1.0));\r
    color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,1.0));\r
    gl_FragColor = color/4.0;\r
    gl_FragColor = outputTransform(gl_FragColor);\r
\r
}`;var Yp=`#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}`;var Kp=`#define SHADER_NAME EdgeAdd\r
varying vec2 v_Texcoord0;\r
#include "Color.glsl";\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
\r
#ifdef Gamma_u_sourceTexture0\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_sourceTexture0\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec2 uv = v_Texcoord0;\r
    vec4 mainColor = sampleMainTex(u_MainTex,uv);\r
    vec4 sourceColor = sampleMainTex(u_sourceTexture0,uv);\r
    float factor = step(sourceColor.x+sourceColor.y+sourceColor.z,0.001);\r
    vec4 color = mix(sourceColor,mainColor,factor);\r
    gl_FragColor =color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Qp=`#define SHADER_NAME EdgeSub\r
varying vec2 v_Texcoord0;\r
#include "Color.glsl";\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_sourceTexture0\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_sourceTexture0\r
\r
#ifdef Gamma_u_sourceTexture1\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_sourceTexture1\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec2 uv = v_Texcoord0;\r
    vec4 blurColor = sampleMainTex(u_sourceTexture0,uv);\r
    vec4 clearColor = sampleMainTex(u_sourceTexture1,uv);\r
    float factor = step(clearColor.x+clearColor.y+clearColor.z,0.001);\r
    vec4 color = blurColor*factor;\r
    color = (1.0-step(color.x+color.y+color.z,0.15))*vec4(1.0,0.0,0.0,1.0);\r
    gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Le=class Le extends Laya.PostProcessEffect{constructor(){super();this._shader=null;this._shaderData=Laya.LayaGL.renderOBJCreate.createShaderData(null);this._downSampleNum=1;this._blurSpreadSize=1;this._blurIterations=2;this._texSize=new Laya.Vector4(1,1,1,1);this._shader=Laya.Shader3D.find("blurEffect"),this._tempRenderTexture=new Array(13)}static init(){Le.SHADERVALUE_MAINTEX=Laya.Shader3D.propertyNameToID("u_MainTex"),Le.SHADERVALUE_TEXELSIZE=Laya.Shader3D.propertyNameToID("u_MainTex_TexelSize"),Le.SHADERVALUE_DOWNSAMPLEVALUE=Laya.Shader3D.propertyNameToID("u_DownSampleValue");let e={a_PositionTexcoord:[Laya.VertexMesh.MESH_POSITION0,Laya.ShaderDataType.Vector4]},t={u_MainTex:Laya.ShaderDataType.Texture2D,u_sourceTexture0:Laya.ShaderDataType.Texture2D,u_sourceTexture1:Laya.ShaderDataType.Texture2D,u_MainTex_TexelSize:Laya.ShaderDataType.Vector4,u_DownSampleValue:Laya.ShaderDataType.Float};var a=Laya.Shader3D.add("blurEffect"),i=new Laya.SubShader(e,t);a.addSubShader(i);var r=i.addShaderPass(Yp,Xp),n=r.renderState;n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(e,t),a.addSubShader(i),r=i.addShaderPass(Vr,zp),n=r.renderState,n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(e,t),a.addSubShader(i),r=i.addShaderPass(Vr,Gp),n=r.renderState,n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(e,t),a.addSubShader(i),r=i.addShaderPass(Vr,Qp),n=r.renderState,n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(e,t),a.addSubShader(i),r=i.addShaderPass(Vr,Kp),n=r.renderState,n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE}get downSampleNum(){return this._downSampleNum}set downSampleNum(e){this._downSampleNum=Math.min(6,Math.max(e,0))}get blurSpreadSize(){return this._blurSpreadSize}set blurSpreadSize(e){this._blurSpreadSize=Math.min(10,Math.max(e,1))}get blurIterations(){return this._blurIterations}set blurIterations(e){this._blurIterations=Math.min(Math.max(e,0),6)}render(e){var t=e.command,a=e.camera.viewport,i=1/(1<<Math.floor(this._downSampleNum)),r=Math.floor(a.width*i),n=Math.floor(a.height*i);this._texSize.setValue(1/r,1/n,r,n),this._shaderData.setNumber(Le.SHADERVALUE_DOWNSAMPLEVALUE,this.blurSpreadSize),this._shaderData.setVector(Le.SHADERVALUE_TEXELSIZE,this._texSize);var l=Laya.RenderTexture.createFromPool(r,n,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1);l.filterMode=Laya.FilterMode.Bilinear,this._tempRenderTexture[0]=l;var d=e.source;t.blitScreenTriangle(d,l,null,this._shader,this._shaderData,0),d=l;for(var c=0;c<this._blurIterations;c++){var u=Laya.RenderTexture.createFromPool(r,n,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1);u.filterMode=Laya.FilterMode.Bilinear,t.blitScreenTriangle(d,u,null,this._shader,this._shaderData,1),d=u,this._tempRenderTexture[c*2+1]=u,u=Laya.RenderTexture.createFromPool(r,n,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1),u.filterMode=Laya.FilterMode.Bilinear,t.blitScreenTriangle(d,u,null,this._shader,this._shaderData,2),d=u,this._tempRenderTexture[c*2+2]=u}e.source=d,t.blitScreenTriangle(e.source,e.destination);var m=this._blurIterations*2+1;for(c=0;c<m;c++)Laya.RenderTexture.recoverToPool(this._tempRenderTexture[c]);e.deferredReleaseTextures.push(d)}};Le.BLUR_TYPE_GaussianBlur=0,Le.BLUR_TYPE_Simple=1;var Ee=Le,Ye=class p extends Laya.Material{static __init__(){p.SHADERVALUE_MAINTEX=Laya.Shader3D.propertyNameToID("u_MainTex"),p.SHADERVALUE_TEXELSIZE=Laya.Shader3D.propertyNameToID("u_MainTex_TexelSize"),p.SHADERVALUE_DOWNSAMPLEVALUE=Laya.Shader3D.propertyNameToID("u_DownSampleValue"),p.SHADERVALUE_SOURCETEXTURE0=Laya.Shader3D.propertyNameToID("u_sourceTexture0"),p.ShADERVALUE_SOURCETEXTURE1=Laya.Shader3D.propertyNameToID("u_sourceTexture1")}constructor(s,e){super(),p.__init__(),this.setShaderName("blurEffect"),this.setIntByIndex(p.SHADERVALUE_DOWNSAMPLEVALUE,e),this.setVector4ByIndex(p.SHADERVALUE_TEXELSIZE,s)}sourceTexture(s,e){this.setTextureByIndex(p.SHADERVALUE_SOURCETEXTURE0,s),this.setTextureByIndex(p.ShADERVALUE_SOURCETEXTURE1,e)}};var Jv=Laya.Vector4,{regClass:jv,property:Jp}=Laya,Qt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),Ee.init(),Br.init();var e=this.scene,t=this.camera,a=e.getChildByName("glass01"),i=e.getChildByName("glass02"),r=a.getComponent(Laya.MeshRenderer).sharedMaterial,n=new Br(r.albedoTexture);a.getComponent(Laya.MeshRenderer).sharedMaterial=n,i.getComponent(Laya.MeshRenderer).sharedMaterial=n,this.mat=n,this.createCommandBuffer(t)}createCommandBuffer(e){e.enableBuiltInRenderTexture=!0;var t=new Laya.CommandBuffer,a=e.viewport,i=Laya.RenderTexture.createFromPool(a.width,a.height,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1);this.texture=i,t.blitScreenTriangle(null,i);var r=Laya.Shader3D.find("blurEffect"),n=Laya.LayaGL.renderOBJCreate.createShaderData(null),l=4,d=a.width/l,c=a.height/l,u=new Jv(1/a.width,1/a.height,a.width,c);n.setNumber(Ee.SHADERVALUE_DOWNSAMPLEVALUE,1),n.setVector(Ee.SHADERVALUE_TEXELSIZE,u);var m=Laya.RenderTexture.createFromPool(d,c,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1);t.blitScreenTriangle(i,m,null,r,n,0);var L=Laya.RenderTexture.createFromPool(d,c,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.None,!1,1);L.filterMode=Laya.FilterMode.Bilinear,t.blitScreenTriangle(m,L,null,r,n,1),t.blitScreenTriangle(L,m,null,r,n,2),t.blitScreenTriangle(m,L,null,r,n,1),t.blitScreenTriangle(L,m,null,r,n,2);var g=Laya.Shader3D.propertyNameToID("u_screenTexture");t.setGlobalTexture(g,m),e.addCommandBuffer(Laya.CameraEventFlags.BeforeTransparent,t),Laya.RenderTexture.recoverToPool(m),Laya.RenderTexture.recoverToPool(L)}};o([Jp(Laya.Camera)],Qt.prototype,"camera",2),o([Jp(Laya.Scene3D)],Qt.prototype,"scene",2),Qt=o([jv("anvFt6x4QNGXWhm30g4Oew")],Qt);var jp=`#define SHADER_NAME DepthTextureTestVS\r
\r
#include "Color.glsl";\r
\r
#include "Scene.glsl";\r
#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
\r
#include "VertexCommon.glsl";\r
\r
varying vec2 v_Texcoord0;\r
void main() {\r
    Vertex vertex;\r
    getVertexParams(vertex);\r
\r
    v_Texcoord0 = vertex.texCoord0;\r
    mat4 worldMat = getWorldMatrix();\r
    vec3 PositionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
\r
    gl_Position = getPositionCS(PositionWS);\r
    gl_Position=remapPositionZ(gl_Position);\r
}`;var qp=`#define SHADER_NAME DepthTextureTestFS\r
#include "Color.glsl";\r
#include "Camera.glsl";\r
#include "DepthNormalUtil.glsl";\r
\r
\r
varying vec2 v_Texcoord0;\r
\r
void main(){\r
    vec4 col;\r
    vec2 uv = vec2(v_Texcoord0.x,v_Texcoord0.y);\r
    float depth = SAMPLE_DEPTH_TEXTURE(u_CameraDepthTexture, uv);\r
    depth =Linear01Depth(depth,u_ZBufferParams);\r
    col = vec4(depth,depth,depth,1.0);\r
    gl_FragColor = col;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var _r=class extends Laya.Material{static init(){var s=Laya.Shader3D.add("DepthShader"),e=new Laya.SubShader(Laya.SubShader.DefaultAttributeMap);s.addSubShader(e),e.addShaderPass(jp,qp,"Forward")}constructor(){super(),this.setShaderName("DepthShader"),this.renderModeSet()}renderModeSet(){this.alphaTest=!1,this.renderQueue=Laya.Material.RENDERQUEUE_OPAQUE,this.depthWrite=!0,this.cull=Laya.RenderState.CULL_BACK,this.blend=Laya.RenderState.BLEND_DISABLE,this.depthTest=Laya.RenderState.DEPTHTEST_LESS}};var Zp=`#define SHADER_NAME DepthNormalTextureTestVS\r
#include "Lighting.glsl";\r
#include "Color.glsl";\r
\r
#include "Scene.glsl";\r
#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
\r
#include "VertexCommon.glsl";\r
\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
   Vertex vertex;\r
    getVertexParams(vertex);\r
\r
    v_Texcoord0 = vertex.texCoord0;\r
    mat4 worldMat = getWorldMatrix();\r
    vec3 PositionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
\r
    gl_Position = getPositionCS(PositionWS);\r
    gl_Position=remapPositionZ(gl_Position);\r
}`;var $p=`#define SHADER_NAME DepthNormalTextureTestFS\r
#include "Color.glsl";\r
#include "Camera.glsl";\r
#include "DepthNormalUtil.glsl";\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_CameraDepthNormalsTexture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
varying vec2 v_Texcoord0;\r
\r
void main(){\r
    vec2 uv = vec2(v_Texcoord0.x,v_Texcoord0.y);\r
    vec4 col = sampleMainTex(u_CameraDepthNormalsTexture,uv);\r
    vec3 normals;\r
    float depth;\r
    DecodeDepthNormal(col,depth,normals);\r
    col = vec4(normals,1.0);\r
    gl_FragColor = col;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Pr=class extends Laya.Material{static init(){var s=Laya.Shader3D.add("DepthNormalShader",!1,!1),e=new Laya.SubShader(Laya.SubShader.DefaultAttributeMap);s.addSubShader(e),e.addShaderPass(Zp,$p,"Forward")}constructor(){super(),this.setShaderName("DepthNormalShader"),this.renderModeSet()}renderModeSet(){this.alphaTest=!1,this.renderQueue=Laya.Material.RENDERQUEUE_OPAQUE,this.depthWrite=!0,this.cull=Laya.RenderState.CULL_BACK,this.blend=Laya.RenderState.BLEND_DISABLE,this.depthTest=Laya.RenderState.DEPTHTEST_LESS}};var On=Laya.Vector3,{regClass:tS,property:ed}=Laya,Jt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),_r.init(),Pr.init(),this.scene.ambientColor=new Laya.Color(.858,.858,.858),this.depthNormalPlane=this.scene.getChildByName("depthNormalPlane"),this.depthPlane=this.scene.getChildByName("depthNormalPlane1"),this.depthPlane.transform.position=new On(-11.12226,11.76791,11.90175),this.depthNormalPlane.transform.position=new On(-6.32228,11.76791,11.90175);var e=this.camera;e.transform.position=new On(-13.6097,8.84349,3.01193),e.depthTextureMode|=Laya.DepthTextureMode.Depth,this.depthPlane.getComponent(Laya.MeshRenderer).sharedMaterial=new _r,e.depthTextureMode|=Laya.DepthTextureMode.DepthNormals,this.depthNormalPlane.getComponent(Laya.MeshRenderer).sharedMaterial=new Pr}};o([ed(Laya.Camera)],Jt.prototype,"camera",2),o([ed(Laya.Scene3D)],Jt.prototype,"scene",2),Jt=o([tS("1vyVGaenSNeEMVCvgBLDhA")],Jt);var td=Laya.Event,{regClass:aS,property:Nn}=Laya,Ke=class extends h{constructor(){super()}onAwake(){super.base(this.camera,!1),this.keyboard=new Laya.Box,this.joystick=new Laya.Box,this.isQuaternion=!0,this.isEuler=!1,this.isMatrix=!1,Laya.loader.load("resources/res/threeDimen/scene/CourtyardScene/Courtyard.ls").then(e=>{this.onComplete(e)})}onComplete(e){var t=e.create();this.scene.addChild(t),this.camera.transform.position=new Laya.Vector3(57,2.5,58),this.camera.transform.rotationEuler=new Laya.Vector3(-10,150,0),this.camera.addComponent(ve),this.camera.addComponent(ge),this.camera.addComponent(Se),this.camera.getComponent(ve).enabled=this.isQuaternion,this.camera.getComponent(ge).enabled=this.isEuler,this.camera.getComponent(Se).enabled=this.isMatrix,this.directionLight.getComponent(Laya.DirectionLightCom).color=new Laya.Color(.6,.6,.6),this.directionLight.transform.worldMatrix.setForward(new Laya.Vector3(1,-1,0)),this.keyboard.addComponent(Un),this.keyboard.width=400,this.keyboard.height=300,this.keyboard.left=20,this.keyboard.bottom=20,this.keyboard.scale(.5,.5);var a=new Laya.Sprite,i=new Laya.Sprite,r=new Laya.Sprite,n=new Laya.Sprite,l=new Laya.Sprite,d=new Laya.Sprite;this.keyboard.addChild(a),this.keyboard.addChild(i),this.keyboard.addChild(r),this.keyboard.addChild(n),this.keyboard.addChild(l),this.keyboard.addChild(d),a.loadImage("resources/res/threeDimen/CameraInteraction/q.png"),a.pos(0,30),a.name="q",i.loadImage("resources/res/threeDimen/CameraInteraction/w.png"),i.pos(110,30),i.name="w",r.loadImage("resources/res/threeDimen/CameraInteraction/e.png"),r.pos(220,30),r.name="e",n.loadImage("resources/res/threeDimen/CameraInteraction/a.png"),n.pos(0,140),n.name="a",l.loadImage("resources/res/threeDimen/CameraInteraction/s.png"),l.pos(110,140),l.name="s",d.loadImage("resources/res/threeDimen/CameraInteraction/d.png"),d.pos(220,140),d.name="d",this.owner.addChild(this.keyboard),this.joystick.left=0,this.joystick.right=0,this.joystick.top=0,this.joystick.bottom=0,this.leftJoyStick=new Laya.Box,this.joystick.addChild(this.leftJoyStick),this.leftJoyStick.name="leftJoyStick",this.leftJoyStick.addComponent(Z),this.leftJoyStick.width=215,this.leftJoyStick.height=215,this.leftJoyStick.left=50,this.leftJoyStick.bottom=50;var c=new Laya.Sprite;this.leftJoyStick.addChild(c),c.loadImage("resources/res/threeDimen/CameraInteraction/joystick_bg.png"),c.width=215,c.height=215,c.name="bg";var u=new Laya.Sprite;this.leftJoyStick.addChild(u),u.loadImage("resources/res/threeDimen/CameraInteraction/joystick_axis.png"),u.width=78,u.height=78,u.name="axis",u.pos(70,70),this.rightJoyStick=new Laya.Box,this.joystick.addChild(this.rightJoyStick),this.rightJoyStick.name="rightJoyStick",this.rightJoyStick.addComponent(Z),this.rightJoyStick.width=215,this.rightJoyStick.height=215,this.rightJoyStick.right=50,this.rightJoyStick.bottom=50;var c=new Laya.Sprite;this.rightJoyStick.addChild(c),c.loadImage("resources/res/threeDimen/CameraInteraction/joystick_bg.png"),c.width=215,c.height=215,c.name="bg";var u=new Laya.Sprite;if(this.rightJoyStick.addChild(u),u.loadImage("resources/res/threeDimen/CameraInteraction/joystick_axis.png"),u.width=78,u.height=78,u.name="axis",u.pos(70,70),this.owner.addChild(this.joystick),this.camera.getComponent(ve).moveRocker=this.leftJoyStick.getComponent(Z),this.camera.getComponent(ve).rotationRocker=this.rightJoyStick.getComponent(Z),this.camera.getComponent(ge).moveRocker=this.leftJoyStick.getComponent(Z),this.camera.getComponent(ge).rotationRocker=this.rightJoyStick.getComponent(Z),this.camera.getComponent(Se).moveRocker=this.leftJoyStick.getComponent(Z),this.camera.getComponent(Se).rotationRocker=this.rightJoyStick.getComponent(Z),this.switchBtn=this.owner.addChild(new Laya.Button("resources/image/img_btn_bg.png","\u5207\u6362\u5230\u6B27\u62C9\u89D2\u53D8\u6362\u6A21\u5F0F")),this.switchBtn.size(300,30),this.switchBtn.labelSize=16,this.switchBtn.sizeGrid="21,83,22,76",this.switchBtn.stateNum=1,this.switchBtn.labelColors="#ffffff",this.switchBtn.pos(this.pageWidth/2-this.switchBtn.width/2,10),this.switchBtn.on(Laya.Event.CLICK,this,this.switchScript),Laya.Browser.onPC){this.keyboard.visible=!0,this.joystick.visible=!1;var m=new Laya.Label;m.pos(this.pageWidth/2-this.switchBtn.width/2,60),m.overflow=Laya.Text.HIDDEN,m.color="#ea4335",m.font="Impact",m.fontSize=20,m.borderColor="#ea4335",m.text="\u6447\u6746\u6A21\u5F0F\u8BF7\u626B\u4E8C\u7EF4\u7801\u9884\u89C8\uFF01",this.owner.addChild(m)}else this.keyboard.visible=!1,this.joystick.visible=!0}switchScript(){this.isQuaternion?(this.isEuler=!0,this.isQuaternion=!1,this.isMatrix=!1,this.camera.getComponent(ve).enabled=this.isQuaternion,this.camera.getComponent(ge).enabled=this.isEuler,this.camera.getComponent(Se).enabled=this.isMatrix,this.switchBtn.label="\u5207\u6362\u5230\u77E9\u9635\u53D8\u6362\u6A21\u5F0F"):this.isEuler?(this.isEuler=!1,this.isQuaternion=!1,this.isMatrix=!0,this.camera.getComponent(ve).enabled=this.isQuaternion,this.camera.getComponent(ge).enabled=this.isEuler,this.camera.getComponent(Se).enabled=this.isMatrix,this.switchBtn.label="\u5207\u6362\u5230\u56DB\u5143\u6570\u53D8\u6362\u6A21\u5F0F"):this.isMatrix&&(this.isEuler=!1,this.isQuaternion=!0,this.isMatrix=!1,this.camera.getComponent(ve).enabled=this.isQuaternion,this.camera.getComponent(ge).enabled=this.isEuler,this.camera.getComponent(Se).enabled=this.isMatrix,this.switchBtn.label="\u5207\u6362\u5230\u6B27\u62C9\u89D2\u53D8\u6362\u6A21\u5F0F")}};o([Nn(Laya.Camera)],Ke.prototype,"camera",2),o([Nn(Laya.Scene3D)],Ke.prototype,"scene",2),o([Nn(Laya.Sprite3D)],Ke.prototype,"directionLight",2),Ke=o([aS("eiGRrFkNSjSqn3cU7q18Yg")],Ke);var Un=class extends Laya.Script{constructor(){super()}onEnable(){this.w=this.owner.getChildByName("w"),this.a=this.owner.getChildByName("a"),this.s=this.owner.getChildByName("s"),this.d=this.owner.getChildByName("d"),this.q=this.owner.getChildByName("q"),this.e=this.owner.getChildByName("e"),Laya.stage.on(td.KEY_DOWN,this,this.onKeyDown),Laya.stage.on(td.KEY_UP,this,this.onKeyUp)}onKeyDown(e){switch(e.keyCode){case 87:case 38:this.w.visible=!1;break;case 65:case 37:this.a.visible=!1;break;case 69:this.e.visible=!1;break;case 81:this.q.visible=!1;break;case 83:case 40:this.s.visible=!1;break;case 68:case 39:this.d.visible=!1;break}}onKeyUp(){this.w.visible=!0,this.a.visible=!0,this.s.visible=!0,this.d.visible=!0,this.q.visible=!0,this.e.visible=!0}onDisable(){}},Z=class extends Laya.Script{constructor(){super();this.centerX=0;this.centerY=0;this.isMoving=!1;this.touchId=0;this.angle=-1;this.radians=-1;this.maxDistance=0;this.maxDistanceSpr=0;this.deltaX=0;this.deltaY=0;this.tempV2_1=new Laya.Point(0,0);this.tempV2_2=new Laya.Point(0,0)}onAwake(){this.RockerPad=this.owner,this.Rocker=this.RockerPad.getChildByName("axis"),this.centerX=this.Rocker.x,this.centerY=this.Rocker.y,!this.maxDistance&&(this.maxDistance=(this.RockerPad.width-this.Rocker.width)/2),this.maxDistanceSpr=this.maxDistance*this.maxDistance}onEnable(){this.owner.parent.on(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this.owner.parent.on(Laya.Event.MOUSE_UP,this,this.MouseUp),this.owner.parent.on(Laya.Event.MOUSE_MOVE,this,this.MouseMove)}MouseDown(e){e.stopPropagation(),e.target.mouseX>this.RockerPad.x&&e.target.mouseX<this.RockerPad.x+this.RockerPad.width&&e.target.mouseY>this.RockerPad.y&&e.target.mouseY<this.RockerPad.y+this.RockerPad.height&&(this.isMoving=!0,this.touchId=e.touchId)}MouseUp(e){e.stopPropagation(),e.touchId==this.touchId&&(this.isMoving=!1,this.Rocker.pos(this.centerX,this.centerY),this.radians=this.angle=-1)}MouseMove(e){if(e.stopPropagation(),e.touchId==this.touchId&&this.isMoving){this.tempV2_1.x=e.target.mouseX,this.tempV2_1.y=e.target.mouseY,this.tempV2_2=this.RockerPad.globalToLocal(this.tempV2_1,!1),this.deltaX=this.tempV2_2.x-this.centerX,this.deltaY=this.tempV2_2.y-this.centerY,this.angle=Math.atan2(this.deltaX,this.deltaY)*180/Math.PI,this.angle<0&&(this.angle+=360),this.angle=Math.round(this.angle),this.radians=Math.PI/180*this.angle;var t=this.getDistanceSqr(this.centerX,this.centerY,this.tempV2_2.x,this.tempV2_2.y);if(t>this.maxDistanceSpr){var a=Math.floor(Math.sin(this.radians)*this.maxDistance+this.centerX),i=Math.floor(Math.cos(this.radians)*this.maxDistance+this.centerY);this.Rocker.pos(a,i)}else this.Rocker.pos(this.tempV2_2.x,this.tempV2_2.y)}}onDisable(){this.owner.parent.off(Laya.Event.MOUSE_DOWN,this,this.MouseDown),this.owner.parent.off(Laya.Event.MOUSE_UP,this,this.MouseUp),this.owner.parent.off(Laya.Event.MOUSE_MOVE,this,this.MouseMove)}getDistanceSqr(e,t,a,i){var r=e-a,n=t-i,l=r*r+n*n;return l}},ge=class extends Laya.Script{constructor(){super();this._tempVector3=new Laya.Vector3;this.yawPitchRoll=new Laya.Vector3;this.rotaionSpeed=.004;this.rockerRotationSpeed=5e-4;this.moveSpeed=.0025;this.lastMouseX=0;this.lastMouseY=0;this.isMouseDown=!1}onEnable(){Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp),this.camera=this.owner}onDisable(){console.log("camera euler script is disable :"+this.enabled),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.mouseUp)}onUpdate(){var e=Laya.timer.delta;if(Laya.Browser.onPC){if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&(Laya.InputManager.hasKeyDown(87)&&this.moveForward(-.01*e),Laya.InputManager.hasKeyDown(83)&&this.moveForward(.01*e),Laya.InputManager.hasKeyDown(65)&&this.moveRight(-.01*e),Laya.InputManager.hasKeyDown(68)&&this.moveRight(.01*e),Laya.InputManager.hasKeyDown(81)&&this.moveVertical(.01*e),Laya.InputManager.hasKeyDown(69)&&this.moveVertical(-.01*e),this.isMouseDown)){var t=Laya.stage.mouseX-this.lastMouseX,a=Laya.stage.mouseY-this.lastMouseY;this.camera.transform.localRotationEulerX-=a*this.rotaionSpeed*e,this.camera.transform.localRotationEulerY-=t*this.rotaionSpeed*e,console.log("Use Euler Script!")}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY}else{if(this.moveRocker.angle!=-1){var i=Math.sin(this.moveRocker.radians)*this.moveSpeed*e,r=Math.cos(this.moveRocker.radians)*this.moveSpeed*e;this._tempVector3.setValue(i,0,r),this.camera.transform.translate(this._tempVector3,!0)}if(this.rotationRocker.angle!=-1){var t=this.rotationRocker.deltaX,a=this.rotationRocker.deltaY;this.camera.transform.localRotationEulerX-=a*this.rockerRotationSpeed*e,this.camera.transform.localRotationEulerY-=t*this.rockerRotationSpeed*e,console.log("Use Euler Script!")}}}mouseDown(e){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0}mouseUp(e){this.isMouseDown=!1}moveForward(e){this._tempVector3.x=0,this._tempVector3.y=0,this._tempVector3.z=e,this.camera.transform.translate(this._tempVector3,!0)}moveRight(e){this._tempVector3.y=0,this._tempVector3.z=0,this._tempVector3.x=e,this.camera.transform.translate(this._tempVector3,!0)}moveVertical(e){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=e,this.camera.transform.translate(this._tempVector3,!1)}},ve=class extends Laya.Script{constructor(){super();this._tempVector3=new Laya.Vector3;this.yawPitchRoll=new Laya.Vector3;this.tempRotationZ=new Laya.Quaternion;this.rotaionSpeed=12e-5;this.rockerRotationSpeed=1e-5;this.moveSpeed=.0025;this.lastMouseX=0;this.lastMouseY=0;this.isMouseDown=!1}onEnable(){Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp),this.camera=this.owner}onDisable(){console.log("camera quaternion script is disable :"+this.enabled),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.mouseUp)}onUpdate(){var e=Laya.timer.delta;if(Laya.Browser.onPC){if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&(Laya.InputManager.hasKeyDown(87)&&this.moveForward(-.01*e),Laya.InputManager.hasKeyDown(83)&&this.moveForward(.01*e),Laya.InputManager.hasKeyDown(65)&&this.moveRight(-.01*e),Laya.InputManager.hasKeyDown(68)&&this.moveRight(.01*e),Laya.InputManager.hasKeyDown(81)&&this.moveVertical(.01*e),Laya.InputManager.hasKeyDown(69)&&this.moveVertical(-.01*e),this.isMouseDown)){var t=Laya.stage.mouseX-this.lastMouseX,a=Laya.stage.mouseY-this.lastMouseY,i=this.yawPitchRoll;i.x-=t*this.rotaionSpeed*e,i.y-=a*this.rotaionSpeed*e,this.updateRotation(),console.log("Use Quaternion Script!")}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY}else{if(this.moveRocker.angle!=-1){var r=Math.sin(this.moveRocker.radians)*this.moveSpeed*e,n=Math.cos(this.moveRocker.radians)*this.moveSpeed*e;this._tempVector3.setValue(r,0,n),this.camera.transform.translate(this._tempVector3,!0)}if(this.rotationRocker.angle!=-1){var t=this.rotationRocker.deltaX,a=this.rotationRocker.deltaY,i=this.yawPitchRoll;i.x-=t*this.rockerRotationSpeed*e,i.y-=a*this.rockerRotationSpeed*e,this.updateRotation(),console.log("Use Quaternion Script!")}}}mouseDown(e){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0}mouseUp(e){this.isMouseDown=!1}moveForward(e){this._tempVector3.x=0,this._tempVector3.y=0,this._tempVector3.z=e,this.camera.transform.translate(this._tempVector3,!0)}moveRight(e){this._tempVector3.y=0,this._tempVector3.z=0,this._tempVector3.x=e,this.camera.transform.translate(this._tempVector3,!0)}moveVertical(e){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=e,this.camera.transform.translate(this._tempVector3,!1)}updateRotation(){Math.abs(this.yawPitchRoll.y)<1.5&&(Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x,this.yawPitchRoll.y,this.yawPitchRoll.z,this.tempRotationZ),this.tempRotationZ.cloneTo(this.camera.transform.localRotation),this.camera.transform.localRotation=this.camera.transform.localRotation)}},Se=class extends Laya.Script{constructor(){super();this._tempVector3=new Laya.Vector3;this.yawPitchRoll=new Laya.Vector3;this.rotateMatrix=new Laya.Matrix4x4;this.rotaionSpeed=12e-5;this.rockerRotationSpeed=1e-5;this.moveSpeed=.0025;this.lastMouseX=0;this.lastMouseY=0;this.isMouseDown=!1}onEnable(){Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp),this.camera=this.owner}onDisable(){console.log("camera matrix script is disable :"+this.enabled),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.mouseUp)}onUpdate(){var e=Laya.timer.delta;if(Laya.Browser.onPC){if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&(Laya.InputManager.hasKeyDown(87)&&this.moveForward(-.01*e),Laya.InputManager.hasKeyDown(83)&&this.moveForward(.01*e),Laya.InputManager.hasKeyDown(65)&&this.moveRight(-.01*e),Laya.InputManager.hasKeyDown(68)&&this.moveRight(.01*e),Laya.InputManager.hasKeyDown(81)&&this.moveVertical(.01*e),Laya.InputManager.hasKeyDown(69)&&this.moveVertical(-.01*e),this.isMouseDown)){var t=Laya.stage.mouseX-this.lastMouseX,a=Laya.stage.mouseY-this.lastMouseY,i=this.yawPitchRoll;i.x-=t*this.rotaionSpeed*e,i.y-=a*this.rotaionSpeed*e,Laya.Matrix4x4.createRotationYawPitchRoll(i.x,i.y,i.z,this.rotateMatrix);var r=new Laya.Matrix4x4;Laya.Matrix4x4.createTranslate(new Laya.Vector3(this.camera.transform.position.x,this.camera.transform.position.y,this.camera.transform.position.z),r),Laya.Matrix4x4.multiply(r,this.rotateMatrix,this.rotateMatrix),this.camera.transform.localMatrix=this.rotateMatrix,console.log("Use Matrix Script!")}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY}else{if(this.moveRocker.angle!=-1){var n=Math.sin(this.moveRocker.radians)*this.moveSpeed*e,l=Math.cos(this.moveRocker.radians)*this.moveSpeed*e;this._tempVector3.setValue(n,0,l),this.camera.transform.translate(this._tempVector3,!0)}if(this.rotationRocker.angle!=-1){var t=this.rotationRocker.deltaX,a=this.rotationRocker.deltaY,i=this.yawPitchRoll;i.x-=t*this.rockerRotationSpeed*e,i.y-=a*this.rockerRotationSpeed*e,Laya.Matrix4x4.createRotationYawPitchRoll(i.x,i.y,i.z,this.rotateMatrix);var r=new Laya.Matrix4x4;Laya.Matrix4x4.createTranslate(new Laya.Vector3(this.camera.transform.position.x,this.camera.transform.position.y,this.camera.transform.position.z),r),Laya.Matrix4x4.multiply(r,this.rotateMatrix,this.rotateMatrix),this.camera.transform.localMatrix=this.rotateMatrix,console.log("Use Matrix Script!")}}}mouseDown(e){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0}mouseUp(e){this.isMouseDown=!1}moveForward(e){this._tempVector3.x=0,this._tempVector3.y=0,this._tempVector3.z=e,this.camera.transform.translate(this._tempVector3)}moveRight(e){this._tempVector3.y=0,this._tempVector3.z=0,this._tempVector3.x=e,this.camera.transform.translate(this._tempVector3)}moveVertical(e){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=e,this.camera.transform.translate(this._tempVector3,!1)}};var ad=`#define SHADER_NAME CustomInstanceVS\r
#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
\r
#include "VertexCommon.glsl";\r
#include "Color.glsl";\r
varying vec4 v_Color;\r
void main() {\r
	Vertex vertex;\r
	getVertexParams(vertex);\r
	mat4 worldMat = getWorldMatrix();\r
	vec3 positionWS = (worldMat *vec4(vertex.positionOS, 1.0)).xyz; \r
	gl_Position = getPositionCS(positionWS);\r
	\r
    #ifdef GPU_INSTANCE\r
		v_Color = gammaToLinear(a_InstanceColor);\r
	#else\r
		v_Color = gammaToLinear(vec4(1.0,1.0,1.0,1.0));\r
	#endif\r
	v_Color = vec4(vertex.positionOS, 1.0);\r
	gl_Position=remapPositionZ(gl_Position);\r
}`;var rd=`#define SHADER_NAME CustomInstanceFS\r
#include "Color.glsl";\r
#include "Scene.glsl"\r
\r
varying vec4 v_Color;\r
\r
void main()\r
{\r
	vec4 color =  v_Color;\r
	gl_FragColor.rgb = color.rgb;\r
	gl_FragColor = vec4(sin(u_Time), cos(u_Time), 0.0, 1.0);\r
}\r
\r
`;var kr=class extends Laya.Material{static init(){var s={a_Position:[Laya.VertexMesh.MESH_POSITION0,Laya.ShaderDataType.Vector4],a_Normal:[Laya.VertexMesh.MESH_NORMAL0,Laya.ShaderDataType.Vector3],a_Texcoord0:[Laya.VertexMesh.MESH_TEXTURECOORDINATE0,Laya.ShaderDataType.Vector2],a_Tangent0:[Laya.VertexMesh.MESH_TANGENT0,Laya.ShaderDataType.Vector4],a_WorldMat:[Laya.VertexMesh.MESH_WORLDMATRIX_ROW0,Laya.ShaderDataType.Matrix4x4],a_InstanceColor:[Laya.VertexMesh.MESH_CUSTOME0,Laya.ShaderDataType.Color]},e={},t=Laya.Shader3D.add("CustomInstanceMat",!1),a=new Laya.SubShader(s,e);t.addSubShader(a),a.addShaderPass(ad,rd,"Forward")}constructor(){super(),this.setShaderName("CustomInstanceMat"),this.renderModeSet()}renderModeSet(){this.alphaTest=!0,this.renderQueue=Laya.Material.RENDERQUEUE_OPAQUE,this.depthWrite=!0,this.cull=Laya.RenderState.CULL_BACK,this.blend=Laya.RenderState.BLEND_DISABLE,this.depthTest=Laya.RenderState.DEPTHTEST_LESS}};var Rs=Laya.Vector3,oS=Laya.Quaternion,Wn=Laya.Vector4,{regClass:sS,property:Gn}=Laya,Qe=class extends h{constructor(){super();this.matrixs=[];this.matrixs1=[];this.colors=[];this.colors1=[];this.currentColor=[];this.currentMatrix=[];this.timer=0;this.delta=.01}onAwake(){super.base(this.camera),kr.init();var e=this.scene,t=this.camera;t.transform.position=new Rs(14.85,17.08,35.89),t.transform.rotation=new oS(0,0,0,1),t.clearColor=new Laya.Color(.8,.4,.2,1),this.mat=new kr,this.directionLight.getComponent(Laya.DirectionLightCom).color=new Laya.Color(1,1,1,0);let a=this.directionLight.transform.worldMatrix;a.setForward(new Rs(-1,-1,-1)),this.directionLight.transform.worldMatrix=a,this.createCommandBuffer(t),Laya.timer.frameLoop(1,this,this.changetwoon)}createCommandBuffer(e){let t=new Laya.CommandBuffer;this.createMatrixArray(),this.materialBlock=new Laya.MaterialInstancePropertyBlock,this.materialBlock.setVectorArray("a_InstanceColor",this.colors1,Laya.InstanceLocation.CUSTOME0),this.instanceCMD=t.drawMeshInstance(Laya.PrimitiveMesh.createSphere(.5),0,this.matrixs1,this.mat,0,this.materialBlock,900),e.addCommandBuffer(Laya.CameraEventFlags.BeforeTransparent,t)}createMatrixArray(){for(let e=0;e<30;e++)for(let t=0;t<30;t++){let a=t*30+e;if(a>1023)break;this.matrixs[a]=new Laya.Matrix4x4,this.matrixs1[a]=new Laya.Matrix4x4,this.currentMatrix[a]=new Laya.Matrix4x4,Laya.Matrix4x4.createTranslate(new Rs(e,t,0),this.matrixs[a]),Laya.Matrix4x4.createTranslate(new Rs(a%10+10,Math.floor(a/100)+10,Math.floor(a/10)%10-5),this.matrixs1[a]),this.colors[a]=new Wn(1-e/30,1-t/30,1,1),this.colors1[a]=new Wn(1-e/30,1-t/30,0,1),this.currentColor[a]=new Wn}return null}changePositionColor(e,t,a,i,r){var n=r,l=1-r;for(let m=0;m<30;m++)for(let L=0;L<30;L++){let g=L*30+m;this.currentColor[g].setValue(e[g].x*n+a[g].x*l,e[g].y*n+a[g].y*l,e[g].z*n+a[g].z*l,1);var d=this.currentMatrix[g].elements,c=t[g].elements,u=i[g].elements;d[12]=c[12]*n+u[12]*l,d[13]=c[13]*n+u[13]*l,d[14]=c[14]*n+u[14]*l}}changetwoon(){if(this.timer+=this.delta,this.timer<0||this.timer>1){this.timer=Math.round(this.timer);return}this.changePositionColor(this.colors,this.matrixs,this.colors1,this.matrixs1,this.timer),this.instanceCMD.setWorldMatrix(this.currentMatrix),this.materialBlock.setVectorArray("a_InstanceColor",this.currentColor,Laya.InstanceLocation.CUSTOME0)}};o([Gn(Laya.Camera)],Qe.prototype,"camera",2),o([Gn(Laya.Scene3D)],Qe.prototype,"scene",2),o([Gn(Laya.Sprite3D)],Qe.prototype,"directionLight",2),Qe=o([sS("MJ_UDCJTSFCwZnw0-tm-CQ")],Qe);var nS=Laya.Vector4,{regClass:hS,property:id}=Laya,jt=class extends h{constructor(){super();this.cameraEventFlag=Laya.CameraEventFlags.BeforeImageEffect;this.enableCommandBuffer=!1}onAwake(){super.base(this.camera);var e=this.scene,t=this.camera;Ee.init();var a=new Laya.UnlitMaterial;a.albedoColor=new Laya.Color(255,0,0,255);var i=new Laya.ShurikenParticleMaterial;i.color=new Laya.Color(255,0,0,255);var r=[],n=[];r.push(e.getChildByName("Cube").getComponent(Laya.MeshRenderer)),n.push(a),r.push(e.getChildByName("Particle").getComponent(Laya.ShurikenParticleRenderer)),n.push(i),r.push(e.getChildByName("LayaMonkey").getChildByName("LayaMonkey").getComponent(Laya.SkinnedMeshRenderer)),n.push(a),this.commandBuffer=this.createDrawMeshCommandBuffer(t,r,n),t.addCommandBuffer(this.cameraEventFlag,this.commandBuffer)}createDrawMeshCommandBuffer(e,t,a){var i=new Laya.CommandBuffer;e.enableBuiltInRenderTexture=!0;var r=e.viewport,n=Laya.RenderTexture.createFromPool(r.width,r.height,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.STENCIL_8);i.setRenderTarget(n),i.clearRenderTarget(!0,!1,new Laya.Color(0,0,0,0));for(var l=0,d=t.length;l<d;l++)i.drawRender(t[l],a[l],0);var c=Laya.RenderTexture.createFromPool(r.width,r.height,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.STENCIL_8);i.blitScreenQuad(n,c);var u=2,m=r.width/u,L=r.height/u,g=new nS(1/r.width,1/r.height,r.width,L),x=new Ye(g,1),S=Laya.RenderTexture.createFromPool(m,L,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.STENCIL_8);i.blitScreenQuadByMaterial(n,S,null,x,0);var T=Laya.RenderTexture.createFromPool(m,L,Laya.RenderTargetFormat.R8G8B8,Laya.RenderTargetFormat.STENCIL_8);return T.filterMode=Laya.FilterMode.Bilinear,i.blitScreenQuadByMaterial(S,T,null,x,1),i.blitScreenQuadByMaterial(T,S,null,x,2),i.blitScreenQuadByMaterial(S,T,null,x,1),i.blitScreenQuadByMaterial(T,S,null,x,2),i.setShaderDataTexture(x._shaderValues,Ye.SHADERVALUE_SOURCETEXTURE0,S),i.setShaderDataTexture(x._shaderValues,Ye.ShADERVALUE_SOURCETEXTURE1,c),i.blitScreenQuadByMaterial(T,n,null,x,3),i.setShaderDataTexture(x._shaderValues,Ye.SHADERVALUE_SOURCETEXTURE0,n),i.blitScreenQuadByMaterial(null,c,null,x,4),i.blitScreenQuadByMaterial(c,null),i}};o([id(Laya.Camera)],jt.prototype,"camera",2),o([id(Laya.Scene3D)],jt.prototype,"scene",2),jt=o([hS("x7npe9q3TUmZdGcitbo57g")],jt);var As=class{constructor(s,e,t){this.privotPos=new Laya.Vector3;this.grassHight=5;this.posArray=new Float32Array(s*3),this.size=e,this.privotPos=t,this.updateGrassPos(),this.bound=new Laya.BoundBox(new Laya.Vector3(this.privotPos.x-this.size/2,this.privotPos.y,this.privotPos.z-this.size/2),new Laya.Vector3(this.privotPos.x+this.size/2,this.privotPos.y+this.grassHight,this.privotPos.z+this.size/2))}updateGrassPos(){let s=this.posArray,e=this.privotPos.x,t=this.privotPos.y,a=this.privotPos.z,i=this.size/2;for(let l=0,d=this.posArray.length/3;l<d;l+=3){var r=(Math.random()*2-1)*i,n=(Math.random()*2-1)*i;s[l]=r+e,s[l+1]=t,s[l+2]=n+a}}setDrawLevel(s){this.drawlevelRatio=Math.max(1-s,0)}setGrassCellData(s,e){let t=Math.floor(this.posArray.length/3*this.drawlevelRatio)*3;return s.set(this.posArray,e),t+e}};var od=`#define SHADER_NAME GRASSVS\r
\r
    // include\r
    #include "Color.glsl";\r
    #include "Camera.glsl";\r
    #include "VertexCommon.glsl";\r
    #include "Scene.glsl";\r
    #include "SceneFogInput.glsl";    \r
\r
    // varying\r
    varying vec4 v_Color;\r
    vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
    {\r
        vec4 mainSampler = texture2D(tex, uv);\r
    #ifdef Gamma_u_albedoTexture\r
        mainSampler = gammaToLinear(mainSampler);\r
    #endif // Gamma_u_MainTex\r
        return mainSampler;\r
    }\r
    // main\r
    void main() {\r
        // Vertex vertex;\r
        // getVertexParams(vertex);\r
        \r
        // uniform\r
        vec3 baseColor = vec3(0.1, 0.5, 0.1);\r
        float boundSize = 70.71067811865476;\r
\r
        // const\r
        float minHeight = 2.0;\r
        float maxHeight = 5.0;\r
\r
\r
        vec4 aposition = getVertexPosition();\r
        vec3 perGrassPivotPosWS = a_privotPosition;\r
        float perGrassHeight = mix(minHeight, maxHeight, (sin(perGrassPivotPosWS.x * 23.4643 + perGrassPivotPosWS.z) * 0.45 + 0.55)) * u_grassHeight;\r
\r
\r
        vec3 cameraUpWS = normalize(u_CameraUp);\r
        vec3 cameraForwardWS = normalize(u_CameraDirection);\r
        vec3 cameraRightWS = normalize(cross(cameraForwardWS, cameraUpWS));\r
\r
        //BlillBoard x\r
        vec3 positionOS = aposition.x * cameraRightWS * u_grassWidth * (sin(perGrassPivotPosWS.x * 95.4643 + perGrassPivotPosWS.z) * 0.45 + 0.55);\r
        //BillBoard y\r
        positionOS += aposition.y * cameraUpWS;\r
\r
        // \u6BCF\u6839\u8349 \u9AD8\u5EA6\r
        positionOS.y *= perGrassHeight;\r
\r
\r
        float wind = 0.0;\r
        wind += (sin(u_Time * u_WindAFrequency + perGrassPivotPosWS.x * u_WindATiling.x + perGrassPivotPosWS.z * u_WindATiling.y)*u_WindAWrap.x+u_WindAWrap.y) * u_WindAIntensity; //windA\r
        wind += (sin(u_Time * u_WindBFrequency + perGrassPivotPosWS.x * u_WindBTiling.x + perGrassPivotPosWS.z * u_WindBTiling.y)*u_WindBWrap.x+u_WindBWrap.y) * u_WindBIntensity; //windB\r
        wind += (sin(u_Time * u_WindCFrequency + perGrassPivotPosWS.x * u_WindCTiling.x + perGrassPivotPosWS.z * u_WindCTiling.y)*u_WindCWrap.x+u_WindCWrap.y) * u_WindCIntensity; //windC\r
        wind *= a_Position.y; //wind only affect top region, don't affect root region\r
        vec3 windOffset = cameraRightWS * wind; //swing using billboard left right direction\r
        //\u98CE\u7684\u5F71\u54CD\r
        positionOS += windOffset;\r
\r
\r
        vec3 viewWS = u_CameraPos - perGrassPivotPosWS;\r
        float viewWSLength = length(viewWS);\r
        positionOS += cameraRightWS * aposition.x * max(0.0, viewWSLength * 0.02225);\r
\r
        vec3 positionWS = positionOS + perGrassPivotPosWS;\r
        vec4 position = u_ViewProjection * vec4(positionWS, 1.0);\r
\r
\r
        //reset Texture \r
        vec2 uv = (positionWS.xz-u_BoundSize.xy)/u_BoundSize.zw;\r
        baseColor = sampleMainTex(u_albedoTexture, uv).rgb;\r
        vec3 albedo = mix(u_GroundColor.xyz, baseColor, a_Position.y);\r
        v_Color = vec4(albedo, 1.0);\r
\r
        gl_Position = position;\r
        gl_Position=remapPositionZ(gl_Position);\r
    #ifdef FOG\r
        FogHandle(gl_Position.z);\r
    #endif\r
    }`;var sd=`#if defined(GL_FRAGMENT_PRECISION_HIGH)//\xA0\u539F\u6765\u7684\u5199\u6CD5\u4F1A\u88AB\u6211\u4EEC\u81EA\u5DF1\u7684\u89E3\u6790\u6D41\u7A0B\u5904\u7406\uFF0C\u800C\u6211\u4EEC\u7684\u89E3\u6790\u662F\u4E0D\u8BA4\u5185\u7F6E\u5B8F\u7684\uFF0C\u5BFC\u81F4\u88AB\u5220\u6389\uFF0C\u6240\u4EE5\u6539\u6210\xA0if\xA0defined\xA0\u4E86\r
	precision highp float;\r
#else\r
	precision mediump float;\r
#endif\r
#include "Color.glsl";\r
#include "Scene.glsl"\r
#include "SceneFog.glsl"\r
\r
varying vec4 v_Color;\r
\r
void main() {\r
\r
    vec4 color = v_Color;\r
	#ifdef FOG\r
		// float lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\r
		// gl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor.rgb,lerpFact);\r
		color.rgb = scenUnlitFog(color.rgb);\r
	#endif\r
	gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var M=class M extends Laya.Material{static __init__(){M.WINDAINTENSITY=Laya.Shader3D.propertyNameToID("u_WindAIntensity"),M.WINDAFREQUECY=Laya.Shader3D.propertyNameToID("u_WindAFrequency"),M.WINDATILING=Laya.Shader3D.propertyNameToID("u_WindATiling"),M.WINDAWRAP=Laya.Shader3D.propertyNameToID("u_WindAWrap"),M.WINDBINTENSITY=Laya.Shader3D.propertyNameToID("u_WindBIntensity"),M.WINDBFREQUECY=Laya.Shader3D.propertyNameToID("u_WindBFrequency"),M.WINDBTILING=Laya.Shader3D.propertyNameToID("u_WindBTiling"),M.WINDBWRAP=Laya.Shader3D.propertyNameToID("u_WindBWrap"),M.WINDCINTENSITY=Laya.Shader3D.propertyNameToID("u_WindCIntensity"),M.WINDCFREQUECY=Laya.Shader3D.propertyNameToID("u_WindCFrequency"),M.WINDCTILING=Laya.Shader3D.propertyNameToID("u_WindCTiling"),M.WINDCWRAP=Laya.Shader3D.propertyNameToID("u_WindCWrap"),M.GRASSHEIGHT=Laya.Shader3D.propertyNameToID("u_grassHeight"),M.GRASSWIDTH=Laya.Shader3D.propertyNameToID("u_grassWidth"),M.GRASSBOUND=Laya.Shader3D.propertyNameToID("u_BoundSize"),M.GROUNDCOLOR=Laya.Shader3D.propertyNameToID("u_GroundColor"),M.ALBEDOTEXTURE=Laya.Shader3D.propertyNameToID("u_albedoTexture");var s={a_Position:[Laya.VertexMesh.MESH_POSITION0,Laya.ShaderDataType.Vector4],a_Normal:[Laya.VertexMesh.MESH_NORMAL0,Laya.ShaderDataType.Vector3],a_privotPosition:[Laya.VertexMesh.MESH_CUSTOME0,Laya.ShaderDataType.Vector3]},e={u_WindAIntensity:Laya.ShaderDataType.Float,u_WindAFrequency:Laya.ShaderDataType.Float,u_WindATiling:Laya.ShaderDataType.Vector2,u_WindAWrap:Laya.ShaderDataType.Vector2,u_WindBIntensity:Laya.ShaderDataType.Float,u_WindBFrequency:Laya.ShaderDataType.Float,u_WindBTiling:Laya.ShaderDataType.Vector2,u_WindBWrap:Laya.ShaderDataType.Vector2,u_WindCIntensity:Laya.ShaderDataType.Float,u_WindCFrequency:Laya.ShaderDataType.Float,u_WindCTiling:Laya.ShaderDataType.Vector2,u_WindCWrap:Laya.ShaderDataType.Vector2,u_grassHeight:Laya.ShaderDataType.Float,u_grassWidth:Laya.ShaderDataType.Float,u_BoundSize:Laya.ShaderDataType.Vector4,u_GroundColor:Laya.ShaderDataType.Vector3,u_albedoTexture:Laya.ShaderDataType.Texture2D},t=Laya.Shader3D.add("GrassShader",!1,!1),a=new Laya.SubShader(s,e);t.addSubShader(a);var i=a.addShaderPass(od,sd,"Forward");i.renderState.cull=Laya.RenderState.CULL_BACK}constructor(){M.hasInited||(M.__init__(),M.hasInited=!0),super(),this.setShaderName("GrassShader"),this.alphaTest=!1,this.renderQueue=Laya.Material.RENDERQUEUE_OPAQUE,this.depthWrite=!0,this.cull=Laya.RenderState.CULL_BACK,this.blend=Laya.RenderState.BLEND_DISABLE,this.depthTest=Laya.RenderState.DEPTHTEST_LESS,this.setWindA(1.77,4,new Laya.Vector2(.1,.1),new Laya.Vector2(.5,.5)),this.setWindB(.25,7.7,new Laya.Vector2(.37,3),new Laya.Vector2(.5,.5)),this.setWindC(.125,11.7,new Laya.Vector2(.77,3),new Laya.Vector2(.5,.5)),this.grassHight=1,this.grassWidth=1,this.grassGroundColor=new Laya.Vector3(.25,.49,.23),this.grassBoundSize=new Laya.Vector4(-105,-105,210,210),Laya.loader.load("resources/res/InstancedIndirectGrassVertexColor.jpg",{srgb:!0,type:Laya.Loader.TEXTURE2D}).then(s=>{this.albedoTexture=s,console.log(s)})}setWindA(s,e,t,a){this._shaderValues.setNumber(M.WINDAINTENSITY,s),this._shaderValues.setNumber(M.WINDAFREQUECY,e),this._shaderValues.setVector2(M.WINDATILING,t),this._shaderValues.setVector2(M.WINDAWRAP,a)}setWindB(s,e,t,a){this._shaderValues.setNumber(M.WINDBINTENSITY,s),this._shaderValues.setNumber(M.WINDBFREQUECY,e),this._shaderValues.setVector2(M.WINDBTILING,t),this._shaderValues.setVector2(M.WINDBWRAP,a)}setWindC(s,e,t,a){this._shaderValues.setNumber(M.WINDCINTENSITY,s),this._shaderValues.setNumber(M.WINDCFREQUECY,e),this._shaderValues.setVector2(M.WINDCTILING,t),this._shaderValues.setVector2(M.WINDCWRAP,a)}set grassHight(s){this._shaderValues.setNumber(M.GRASSHEIGHT,s)}set grassWidth(s){this._shaderValues.setNumber(M.GRASSWIDTH,s)}set grassGroundColor(s){this._shaderValues.setVector3(M.GROUNDCOLOR,s)}set grassBoundSize(s){this._shaderValues.setVector(M.GRASSBOUND,s)}set albedoTexture(s){this._shaderValues.setTexture(M.ALBEDOTEXTURE,s)}};M.hasInited=!1;var Bs=M;var Vs=class{constructor(s,e){this.grassManager=s,this.createCommandBuffer(),this.camera=e}creatGrassMesh(){var s=new Float32Array(9);s[0]=-.25,s[3]=.25,s[7]=1;var e=new Uint16Array([2,1,0]),t=Laya.VertexMesh.getVertexDeclaration("POSITION"),a=Laya.PrimitiveMesh._createMesh(t,s,e);return a}createMaterial(){var s=new Bs;return this.grassMaterial=s,s}createCommandBuffer(){Laya.DrawMeshInstancedCMD.maxInstanceCount=1e6,this.buf=new Laya.CommandBuffer,this.materialBlock=new Laya.MaterialInstancePropertyBlock,this.materialBlock.setVector3Array("a_privotPosition",this.grassManager.dataArrayBuffer,Laya.InstanceLocation.CUSTOME0),this.instanceCMD=this.buf.drawMeshInstance(this.creatGrassMesh(),0,null,this.createMaterial(),0,this.materialBlock,this.grassManager.drawArrayLength)}removeCommandBuffer(){this.camera.removeCommandBuffer(Laya.CameraEventFlags.BeforeTransparent,this.buf)}addCommandBuffer(){this.camera.addCommandBuffer(Laya.CameraEventFlags.BeforeTransparent,this.buf)}changeDrawNums(){this.materialBlock.setVector3Array("a_privotPosition",this.grassManager.dataArrayBuffer,Laya.InstanceLocation.CUSTOME0),this.instanceCMD.setDrawNums(this.grassManager.drawArrayLength)}};var _s=class{constructor(s){this.instanceCount=1e6;this.grassCellsize=10;this.cellMaxGrassNum=1e3;this.cellMipmapByDistance=10;this.DrawDistance=150;this.enableLevelDraw=!0;this.subGrassByLevel=.1;this.grassMap=[];this.drawArrayLength=0;this.drawGrassCellLeverlArray=[],this.drawGrassCellLeverlArray.length=this.cellMipmapByDistance;for(let e=0;e<this.cellMipmapByDistance;e++)this.drawGrassCellLeverlArray[e]=[];this.drawGrassLevelNums=[],this.drawGrassLevelNums.length=this.cellMipmapByDistance,this.dataArrayBuffer=new Float32Array(this.instanceCount*3),this.glassRender=new Vs(this,s)}set enable(s){s?this.glassRender.addCommandBuffer():this.glassRender.removeCommandBuffer()}frustumCulling(s){for(let r=0;r<this.drawGrassLevelNums.length;r++)this.drawGrassLevelNums[r]=0;this.drawGrassCellNums=0;let e=this.DrawDistance,t=this.DrawDistance/this.cellMipmapByDistance,a=s.boundFrustum,i=s.transform.position;for(let r=0,n=this.grassMap.length;r<n;r++){let l=this.grassMap[r],d=Laya.Vector3.distance(l.privotPos,i);if(d<e&&a.intersects(l.bound)){if(this.enableLevelDraw){let c=Math.floor(d/t);l.setDrawLevel(c*this.subGrassByLevel),this.drawGrassCellLeverlArray[c]||(this.drawGrassCellLeverlArray[c]={}),this.drawGrassCellLeverlArray[c][this.drawGrassLevelNums[c]]=r,this.drawGrassLevelNums[c]+=1}else l.setDrawLevel(0),this.drawGrassCellLeverlArray[0][this.drawGrassLevelNums[0]]=r,this.drawGrassLevelNums[0]+=1;this.drawGrassCellNums++}}}addGrassCell(s){let e=new As(this.cellMaxGrassNum,this.grassCellsize,s);this.grassMap.push(e)}removeGrassCell(s){let e=this.grassMap.indexOf(s),t=this.grassMap.length-1;this.grassMap[e]=this.grassMap[t],this.grassMap.length=t}update(s){this.frustumCulling(s);let e=0;for(let i=0,r=this.drawGrassLevelNums.length;i<r;i++){let n=this.drawGrassLevelNums[i];for(var t=this.drawGrassCellLeverlArray[i],a=0;a<n;a++)e=this.grassMap[t[a]].setGrassCellData(this.dataArrayBuffer,e)}this.drawArrayLength=e/3,this.glassRender.changeDrawNums()}};var zn=Laya.Vector3,{regClass:dS,property:Xn}=Laya,Je=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.initScene(),this.grassManager=new _s(this.camera);var e=this.grassManager.grassCellsize;for(let t=-100;t<100;t+=e)for(let a=-100;a<100;a+=e)this.grassManager.addGrassCell(new zn(t,0,a));this.grassManager.enable=!0,Laya.timer.loop(1,this,this.update,[this.camera])}update(e){this.grassManager.update(e)}initScene(){this.camera.clearColor=new Laya.Color(.5,1,.5),this.camera.transform.position=new zn(-45.56605299366802,7.79715240971953,9.329663960933718);var e=this.directionLight.transform.worldMatrix;e.setForward(new zn(-1,-1,-1)),this.directionLight.transform.worldMatrix=e}};o([Xn(Laya.Camera)],Je.prototype,"camera",2),o([Xn(Laya.Scene3D)],Je.prototype,"scene",2),o([Xn(Laya.Sprite3D)],Je.prototype,"directionLight",2),Je=o([dS("1SMd7-AGSMOSVcU6nZji2w")],Je);var nd=Laya.Vector3,cS=Laya.SpriteUtils,{regClass:mS,property:Yn}=Laya,je=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.div=document.createElement("div"),this.div.innerHTML="<h1 style='color: red;'>\u6B64\u5185\u5BB9\u6765\u6E90\u4E8EHTML\u7F51\u9875, \u53EF\u76F4\u63A5\u5728html\u4EE3\u7801\u4E2D\u4E66\u5199 - h1\u6807\u7B7E</h1>",this.div.style="position:absolute;z-order:99",document.body.appendChild(this.div),y.curPage&&cS.fitDOMElementInArea(this.div,this.box2D,y.pagePos.x,y.pagePos.y,this.pageWidth,this.pageHeight),this.camera.transform.position=new nd(0,.5,1),this.camera.transform.rotationEuler=new nd(-15,0,0),this.directionLight.color=new Laya.Color(1,1,1,1),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(e=>{this.scene.addChild(e.create())})}onDestroy(){document.body.removeChild(this.div)}};o([Yn(Laya.Camera)],je.prototype,"camera",2),o([Yn(Laya.Scene3D)],je.prototype,"scene",2),o([Yn(Laya.DirectionLightCom)],je.prototype,"directionLight",2),je=o([mS("8KXCS_akQnKnoq2OpN2M3w")],je);var{regClass:uS,property:hd}=Laya,qt=class extends h{constructor(){super()}onAwake(){super.base(this.camera)}};o([hd(Laya.Camera)],qt.prototype,"camera",2),o([hd(Laya.Scene3D)],qt.prototype,"scene",2),qt=o([uS("njjzVB7aTgaP-ebMby57Ag")],qt);var yS=Laya.Camera,ld=Laya.Sprite3D,xe=Laya.Vector3,Ps=Laya.InputManager,LS=Laya.Image,gS=Laya.Handler,vS=Laya.Color,pd=Laya.Sprite,SS=Laya.RenderTexture,dd=Laya.RenderTargetFormat,xS=Laya.Texture,ks=Laya.Keyboard,fS=Laya.Label,{regClass:DS,property:cd}=Laya,Zt=class extends h{constructor(){super();this.orthographicPos=new xe(0,0,0);this._rotation=new xe(0,0,0);this.rotationW=new xe(0,0,0);this.rotationS=new xe(0,180,0);this.rotationA=new xe(0,90,0);this.rotationD=new xe(0,-90,0);this.sp3Role=new ld;this.spRole=new pd;this.spTrail=new pd;this.turnLeft=!0}onAwake(){super.base(this.camera),this.create2D(),Laya.timer.frameOnce(5,this,()=>{this.sp3ToTexture("resources/res/threeDimen/skinModel/dude/dude.lh",this.spRole,2,!0),this.spRole.pos(285,50),this.sp3ToTexture("resources/res/threeDimen/trail/Cube.lh",this.spTrail,3),this.spTrail.pos(100,100)}),Laya.timer.frameLoop(1,this,this.onKeyDown)}create2D(){let e=new LS("resources/res/threeDimen/secne.jpg");e.scale(.5,.5),this.owner.addChild(e),e.addChild(this.spRole),e.addChild(this.spTrail);let t=new fS;this.owner.addChild(t),t.text="\u70B9\u51FB\u5C4F\u5E55\u540E\uFF0C\u4F7F\u7528\u952E\u76D8 WSAD \u53EF\u4EE5\u63A7\u5236\u524D\u540E\u5DE6\u53F3\u79FB\u52A8",t.font="SimHei",t.fontSize=25,t.color="#FFFFFF",t.top=10,t.align="center",t.x=300}sp3ToTexture(e,t,a,i=!1){ld.load(e,gS.create(this,r=>{this.scene.addChild(r);var n=new yS(0,.1,1e3);this.scene.addChild(n),n.transform.rotationEuler=new xe(-45,0,0),n.orthographic=!0,n.orthographicVerticalSize=10,n.clearColor=new vS(0,0,0,0),n.convertScreenCoordToOrthographicCoord(new xe(800,500,0),this.orthographicPos),r.transform.position=this.orthographicPos,console.log(r.transform.position),r.transform.localScale=new xe(1,1,1),n.removeAllLayers(),n.addLayer(a),r.getChildAt(0).getChildAt(0).layer=a,n.renderTarget=new SS(512,512,dd.R16G16B16A16,dd.DEPTHSTENCIL_24_8,!1,4),t.texture=new xS(n.renderTarget),i&&(this.sp3Role=r)}))}onKeyDown(){this.spTrail.x<20&&this.turnLeft?this.turnLeft=!1:this.spTrail.x>this.pageWidth-300&&!this.turnLeft&&(this.turnLeft=!0),this.turnLeft?this.spTrail.x-=1:this.spTrail.x+=1,Ps.hasKeyDown(ks.W)?(this.spRole.y-=1,this.rotateRole(this.rotationW)):Ps.hasKeyDown(ks.S)?(this.spRole.y+=1,this.rotateRole(this.rotationS)):Ps.hasKeyDown(ks.A)?(this.spRole.x-=1,this.rotateRole(this.rotationA)):Ps.hasKeyDown(ks.D)&&(this.spRole.x+=1,this.rotateRole(this.rotationD))}rotateRole(e){e!==this._rotation&&(this.sp3Role.transform.rotationEuler=e,this._rotation=e)}};o([cd(Laya.Camera)],Zt.prototype,"camera",2),o([cd(Laya.Scene3D)],Zt.prototype,"scene",2),Zt=o([DS("saitX0-USp6kWQbVIKwJ8w")],Zt);var{regClass:CS,property:md}=Laya,$t=class extends h{constructor(){super();this._position=new Laya.Vector3;this._outPos=new Laya.Vector4;this.scaleDelta=0;this.clientScaleX=0;this.clientScaleY=0}onAwake(){super.base(this.camera),this.clientScaleY=Laya.stage.clientScaleX,this.clientScaleX=Laya.stage.clientScaleY,this.camera.transform.position=new Laya.Vector3(0,.75,1.2),this.camera.transform.rotationEuler=new Laya.Vector3(-30,0,0),Laya.loader.load("resources/res/threeDimen/staticModel/grid/plane.lh").then(e=>{this.onComplete(e)})}onComplete(e){var t=this.scene.addChild(e.create());this.layaMonkey2D=this.owner.addChild(new Laya.Image("resources/res/threeDimen/monkey.png")),this.layaMonkey2D.anchorX=.5,this.layaMonkey2D.scale(.5,.5),Laya.timer.frameLoop(1,this,this.animate)}animate(){this._position.x=Math.sin(this.scaleDelta+=.01),this.camera.viewport.project(this._position,this.camera.projectionViewMatrix,this._outPos);let e=0,t=0;y.curPage&&Laya.Browser.onPC?(e=this._outPos.x*y.pageWidth/Laya.Browser.clientWidth,t=this._outPos.y*y.pageHeight/Laya.Browser.clientHeight):(e=this._outPos.x/this.clientScaleX,t=this._outPos.y/this.clientScaleY),this.layaMonkey2D.pos(e,t)}};o([md(Laya.Camera)],$t.prototype,"camera",2),o([md(Laya.Scene3D)],$t.prototype,"scene",2),$t=o([CS("SYClKHysSwSLUuJ2-Y1Nwg")],$t);var ud=`#define SHADER_NAME SeparableSSSGasFS\r
const int StepRange = 3;\r
const int SamplerNum = 17;\r
uniform vec4 u_kernel[SamplerNum];\r
#include "Color.glsl";\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_MainTex\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
//uv\r
varying vec2 v_Texcoord0;\r
\r
vec4 Sample17Nums(vec2 finalStep,vec4 colorBlurred,float depthM,vec4 colorM){\r
      for (int i = 1; i < SamplerNum; i++) {\r
        // Fetch color and depth for current sample:\r
        vec2 offset = v_Texcoord0 + u_kernel[i].a * finalStep;\r
        vec4 color = sampleMainTex(u_MainTex, offset);\r
\r
            // // If the difference in depth is huge, we lerp color back to "colorM"://\u6DF1\u5EA6\u5DEE\u5F02\u8FC7\u5927 \u6211\u4EEC\u628A\u989C\u8272\u8FD8\u539F\u4E3A\u539F\u8272\r
        float depth = texture2D(u_depthTex, offset).r;\r
    #ifdef Gamma_u_depthTex\r
        depth = gammaToLinear(depth);\r
    #endif // Gamma_u_depthTex\r
             float s = clamp(300.0 * abs(depthM - depth),0.0,1.0);\r
            color.rgb = mix(color.rgb, colorM.rgb, s);\r
\r
        // Accumulate:\r
        colorBlurred.rgb += u_kernel[i].rgb * color.rgb;\r
       \r
    }\r
     return colorBlurred;\r
}\r
\r
\r
void main()\r
{\r
    vec4 colorM = texture2D(u_MainTex,v_Texcoord0);\r
#ifdef Gamma_u_depthTex\r
    colorM = gammaToLinear(colorM);\r
#endif // Gamma_u_MainTex\r
    //   if (initStencil) // (Checked in compile time, it's optimized away)\u5982\u679C\u6A21\u5177\u7F13\u51B2\u533A\u4E0D\u53EF\u7528\uFF0C\u8BF7\u521D\u59CB\u5316\u8BE5\u7F13\u51B2\u533A\uFF1A\r
    //     if (SSSS_STREGTH_SOURCE == 0.0) discard;\r
\r
    float depthM = texture2D(u_depthTex,v_Texcoord0).r;\r
    #ifdef Gamma_u_depthTex\r
        depthM = gammaToLinear(depthM);\r
    #endif // Gamma_u_depthTex\r
    //\u8BA1\u7B97\u968F\u7740depth\u7684\u53D8\u5316ssswidth\u7684\u6BD4\u4F8B\r
    float scale = u_distanceToProjectionWindow/depthM;\r
    //\u8BA1\u7B97\u50CF\u7D20\u91C7\u6837\u6B65\u957F\r
    vec2 finalStep = u_sssWidth *scale* u_blurDir;\r
    finalStep *=colorM.a* 0.2;\r
\r
    vec4 colorBlurred = colorM;\r
\r
    colorBlurred.rgb*=u_kernel[0].rgb;\r
    colorBlurred = Sample17Nums(finalStep,colorBlurred,depthM,colorM);\r
    //\u7D2F\u8BA1\u5176\u4ED6\u91C7\u6837\r
    //   for (int i = 1; i < SSSS_N_SAMPLES; i++) {\r
    //     // Fetch color and depth for current sample:\r
    //     float2 offset = texcoord + kernel[i].a * finalStep;\r
    //     float4 color = SSSSSample(colorTex, offset);\r
\r
    //     #if SSSS_FOLLOW_SURFACE == 1\r
    //     // If the difference in depth is huge, we lerp color back to "colorM":\r
    //     float depth = SSSSSample(depthTex, offset).r;\r
    //     float s = SSSSSaturate(300.0f * distanceToProjectionWindow *\r
    //                            sssWidth * abs(depthM - depth));\r
    //     color.rgb = SSSSLerp(color.rgb, colorM.rgb, s);\r
    //     #endif\r
\r
    //     // Accumulate:\r
    //     colorBlurred.rgb += kernel[i].rgb * color.rgb;\r
    // }\r
    gl_FragColor = colorBlurred;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}\r
\r
`;var yd=`#define SHADER_NAME SeparableSSSGasVS\r
#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {	\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}`;var MS=Laya.Material,ea=Laya.ShaderDataType,P=Laya.Vector3,qe=Laya.Shader3D,Kn=Laya.RenderState,TS=Laya.SubShader,ES=Laya.VertexMesh,RS=Laya.Vector4,AS=Laya.MathUtils3D,Re=class p extends MS{constructor(){super();this.setShaderName("SeparableSSS"),this._fallOff=new P(1,.37,.3),this._strength=new P(.48,.41,.28),this._nSampler=17,this.sssWidth=.0012,this.kenel=this.calculateKernel(this._nSampler,this._strength,this._fallOff)}static init(){p.SHADERVALUE_COLORTEX=qe.propertyNameToID("u_MainTex"),p.SHADERVALUE_DEPTHTEX=qe.propertyNameToID("u_depthTex"),p.SHADERVALUE_BLURDIR=qe.propertyNameToID("u_blurDir"),p.SHADERVALUE_SSSWIDTH=qe.propertyNameToID("u_sssWidth"),p.SHADERVALUE_DISTANCETOPROJECTIONWINDOW=qe.propertyNameToID("u_distanceToProjectionWindow"),p.SHADERVALUE_KENEL=qe.propertyNameToID("u_kernel");var e={a_PositionTexcoord:[ES.MESH_POSITION0,ea.Vector4]},t={u_MainTex:ea.Texture2D,u_depthTex:ea.Texture2D,u_blurDir:ea.Vector2,u_sssWidth:ea.Float,u_distanceToProjectionWindow:ea.Float},a=qe.add("SeparableSSS",!0,!0),i=new TS(e,t);a.addSubShader(i);var r=i.addShaderPass(yd,ud),n=r.renderState;n=r.renderState,n.depthTest=Kn.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Kn.CULL_NONE,n.blend=Kn.BLEND_DISABLE}set colorTex(e){this.shaderData.setTexture(p.SHADERVALUE_COLORTEX,e)}set blurDir(e){this.shaderData.setVector2(p.SHADERVALUE_BLURDIR,e)}set depthTex(e){this.shaderData.setTexture(p.SHADERVALUE_DEPTHTEX,e)}set sssWidth(e){e=Math.max(e,0),e=Math.min(e,.025),this.shaderData.setNumber(p.SHADERVALUE_SSSWIDTH,e)}set kenel(e){let t=new Float32Array(e.length*4);for(let a=0,i=e.length;a<i;a++){let r=a*4;t[r]=e[a].x,t[r+1]=e[a].y,t[r+2]=e[a].z,t[r+3]=e[a].w}this.shaderData.setBuffer(p.SHADERVALUE_KENEL,t)}set falloff(e){P.max(e,P.ZERO,e),P.min(e,P.ONE,e),this._fallOff=e,this.kenel=this.calculateKernel(this._nSampler,this._fallOff,this._strength)}set strength(e){P.max(e,P.ZERO,e),P.min(e,P.ONE,e),this._strength=e,this.kenel=this.calculateKernel(this._nSampler,this._fallOff,this._strength)}set nSamples(e){this._nSampler=e,this.kenel=this.calculateKernel(this._nSampler,this._fallOff,this._strength)}set cameraFiledOfView(e){let t=1/Math.tan(.5*e*AS.Deg2Rad);this._shaderValues.setNumber(p.SHADERVALUE_DISTANCETOPROJECTIONWINDOW,t)}calculateKernel(e,t,a){let i=e>20?3:2,r=2,n=new Array(e),l=2*i/(e-1);for(let m=0;m<e;m++){let L=-i+m*l,g=L<0?-1:1;n[m]=new RS,n[m].w=i*g*Math.abs(Math.pow(L,r))/Math.pow(i,r)}for(let m=0;m<e;m++){let L=m>0?Math.abs(n[m].w-n[m-1].w):0,g=m<e-1?Math.abs(n[m].w-n[m+1].w):0,x=(L+g)/2,S=this.prefile(n[m].w,a);P.scale(S,x,S),n[m].x=S.x,n[m].y=S.y,n[m].z=S.z}let d=n[Math.floor(e/2)];for(var c=Math.floor(e/2);c>0;c--)n[c]=n[c-1];n[0]=d;let u=new P(0,0,0);for(let m=0;m<e;m++)u.x+=n[m].x,u.y+=n[m].y,u.z+=n[m].z;for(let m=0;m<e;m++)n[m].x/=u.x,n[m].y/=u.y,n[m].z/=u.z;n[0].x=1-t.x+t.x*n[0].x,n[0].y=1-t.y+t.y*n[0].y,n[0].z=1-t.z+t.z*n[0].z;for(let m=1;m<e;m++)n[m].x*=t.x,n[m].y*=t.y,n[m].z*=t.z;return n}prefile(e,t){let a=[t.x,t.y,t.z],i=this.gaussian(.0484,e,a);P.scale(i,.1,i);let r=this.gaussian(.187,e,a);P.scale(r,.118,r);let n=this.gaussian(.567,e,a);P.scale(n,.113,n);let l=this.gaussian(1.99,e,a);P.scale(l,.358,l);let d=this.gaussian(7.41,e,a);return P.scale(d,.078,d),new P(i.x+r.x+n.x+l.x+d.x,i.y+r.y+n.y+l.y+d.y,i.z+r.z+n.z+l.z+d.z)}gaussian(e,t,a){let i=new P,r=new Array;for(let n=0;n<3;n++){let l=t/(a[n]+.001);r[n]=Math.exp(-(l*l)/(2*e))/(2*3.14*e)}return i.setValue(r[0],r[1],r[2]),i}};var Ld=`#define SHADER_NAME SeparableSSSRenderVS\r
#include "Camera.glsl";\r
#include "VertexCommon.glsl";\r
#include "Sprite3DVertex.glsl";\r
\r
varying vec2 v_Texcoord0;\r
varying vec4 v_ScreenTexcoord;\r
\r
void main() {\r
	Vertex vertex;\r
	getVertexParams(vertex);\r
	mat4 worldMat = getWorldMatrix();\r
	vec3 positionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
	gl_Position = getPositionCS(positionWS);\r
	gl_Position= remapPositionZ(gl_Position);\r
	v_Texcoord0= transformUV(a_Texcoord0, u_TilingOffset);\r
	//v_ScreenTexcoord =vec2((gl_Position.x/gl_Position.w+1.0)*0.5, (gl_Position.y/gl_Position.w+1.0)*0.5);\r
	v_ScreenTexcoord = gl_Position*0.5;\r
	v_ScreenTexcoord.xy = vec2(v_ScreenTexcoord.x,v_ScreenTexcoord.y)+v_ScreenTexcoord.w;\r
	v_ScreenTexcoord.zw = gl_Position.zw;\r
}`;var gd=`#define SHADER_NAME SeparableSSSRenderFS\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
varying vec4 v_ScreenTexcoord;\r
\r
void main()\r
{\r
	vec4 color;\r
	color = texture2D(sssssDiffuseTexture,v_ScreenTexcoord.xy/v_ScreenTexcoord.w);\r
#ifdef Gamma_sssssDiffuseTexture\r
    color = gammaToLinear(color);\r
#endif // Gamma_Gamma_sssssDiffuseTexture\r
    vec4 temp = texture2D(sssssSpecularTexture, v_ScreenTexcoord.xy/v_ScreenTexcoord.w);\r
#ifdef Gamma_sssssDiffuseTexture\r
    temp = gammaToLinear(temp);\r
#endif // Gamma_sssssSpecularTexture\r
    color += temp;\r
	gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}\r
\r
`;var vd=Laya.Material,Ae=Laya.ShaderDataType,Fs=Laya.Shader3D,Qn=Laya.RenderState,_S=Laya.SubShader,Is=Laya.VertexMesh,PS=Laya.Vector4,Fr=class p extends vd{static init(){p.SSSSDIFUSETEX=Fs.propertyNameToID("sssssDiffuseTexture"),p.SSSSSPECULARTEX=Fs.propertyNameToID("sssssSpecularTexture"),p.TILINGOFFSET=Fs.propertyNameToID("u_TilingOffset");var s=Fs.add("SeparableRender",!1,!0),e={a_Position:[Is.MESH_POSITION0,Ae.Vector4],a_Normal:[Is.MESH_NORMAL0,Ae.Vector3],a_Texcoord0:[Is.MESH_TEXTURECOORDINATE0,Ae.Vector2],a_Tangent0:[Is.MESH_TANGENT0,Ae.Vector4]},t={sssssDiffuseTexture:Ae.Texture2D,sssssSpecularTexture:Ae.Texture2D,u_TilingOffset:Ae.Vector4,u_MvpMatrix:Ae.Matrix4x4},a=new _S(e,t);s.addSubShader(a),a.addShaderPass(Ld,gd,"Forward")}constructor(){super(),this.setShaderName("SeparableRender"),this.renderModeSet(),this._shaderValues.setVector(p.TILINGOFFSET,new PS(1,1,0,0))}renderModeSet(){this.alphaTest=!1,this.renderQueue=vd.RENDERQUEUE_TRANSPARENT,this.depthWrite=!0,this.cull=Qn.CULL_BACK,this.blend=Qn.BLEND_DISABLE,this.depthTest=Qn.DEPTHTEST_LESS}};var kS=Laya.CameraEventFlags,Jn=Laya.Shader3D,Hs=Laya.BlinnPhongMaterial,Sd=Laya.Vector4,xd=Laya.MeshRenderer,FS=Laya.MeshFilter,IS=Laya.CommandBuffer,Os=Laya.RenderTexture,Be=Laya.RenderTargetFormat,fd=Laya.Vector2,Dd=Laya.FilterMode,Ir=Laya.Color,HS=Laya.DepthTextureMode,{regClass:OS,property:Cd}=Laya,ta=class extends h{constructor(){super()}onAwake(){super.base(this.camera),Jn.debugMode=!0,this.camera.depthTextureMode=HS.Depth,Re.init(),Fr.init(),this.sssssBlitMaterail=new Re,this.sssssRenderMaterial=new Fr,Laya.loader.load("resources/res/threeDimen/LayaScene_separable-sss/Conventional/HeadBlinnphong.lh").then(e=>{this.onPreLoadFinish(e)})}onPreLoadFinish(e){this.blinnphongCharacter=e.create(),this.characterBlinnphongMaterial=this.blinnphongCharacter.getComponent(xd).sharedMaterial.clone();let t=this.createCommandBuffer(this.camera,this.blinnphongCharacter.getComponent(FS).sharedMesh);this.camera.addCommandBuffer(kS.BeforeForwardOpaque,t),this.sssssBlitMaterail.cameraFiledOfView=this.camera.fieldOfView,this.SSSSSCharacter=this.blinnphongCharacter.clone(),this.SSSSSCharacter.getComponent(xd).sharedMaterial=this.sssssRenderMaterial,this.scene.addChild(this.SSSSSCharacter),this.scene.addChild(this.blinnphongCharacter),this.blinnphongCharacter.active=!0,this.SSSSSCharacter.active=!1}createCommandBuffer(e,t){let a=this.characterBlinnphongMaterial.albedoColor,i=this.characterBlinnphongMaterial.specularColor,r=new IS,n=e.viewport,l=Os.createFromPool(n.width,n.height,Be.R8G8B8A8,Be.DEPTH_16,!1,1,!0,!0);r.setRenderTarget(l),r.clearRenderTarget(!0,!0,new Ir(.5,.5,.5,1)),r.drawMesh(t,this.blinnphongCharacter.transform.worldMatrix,this.characterBlinnphongMaterial,0,0),l=l.depthStencilTexture;let d=Os.createFromPool(n.width,n.height,Be.R8G8B8A8,Be.DEPTH_16,!1,1,!0,!0);r.setRenderTarget(d),r.clearRenderTarget(!0,!0,new Ir(.5,.5,.5,1)),r.setShaderDataColor(this.characterBlinnphongMaterial.shaderData,Hs.ALBEDOCOLOR,a),r.setShaderDataColor(this.characterBlinnphongMaterial.shaderData,Hs.MATERIALSPECULAR,new Ir(0,0,0,0)),r.drawMesh(t,this.blinnphongCharacter.transform.worldMatrix,this.characterBlinnphongMaterial,0,0);let c=Os.createFromPool(n.width,n.height,Be.R8G8B8A8,Be.DEPTH_16,!1,1,!0,!0);r.setRenderTarget(c),r.clearRenderTarget(!0,!0,new Ir(1,0,0,0)),r.setShaderDataColor(this.characterBlinnphongMaterial.shaderData,Hs.MATERIALSPECULAR,i),r.setShaderDataColor(this.characterBlinnphongMaterial.shaderData,Hs.ALBEDOCOLOR,new Ir(0,0,0,0)),r.drawMesh(t,this.blinnphongCharacter.transform.worldMatrix,this.characterBlinnphongMaterial,0,0),r.setShaderDataTexture(this.sssssBlitMaterail.shaderData,Re.SHADERVALUE_DEPTHTEX,l);let u=Os.createFromPool(n.width,n.height,Be.R8G8B8A8,Be.None,!1,1,!1,!0);return r.setShaderDataVector2(this.sssssBlitMaterail.shaderData,Re.SHADERVALUE_BLURDIR,new fd(10,0)),r.blitScreenQuadByMaterial(d,u,new Sd(0,0,1,1),this.sssssBlitMaterail,0),r.setShaderDataVector2(this.sssssBlitMaterail.shaderData,Re.SHADERVALUE_BLURDIR,new fd(0,10)),r.blitScreenQuadByMaterial(u,d,new Sd(0,0,0,0),this.sssssBlitMaterail,0),r.setGlobalTexture(Jn.propertyNameToID("sssssDiffuseTexture"),d),this.sssssRenderMaterial.shaderData.setTexture(Jn.propertyNameToID("sssssSpecularTexture"),c),d.filterMode=Dd.Point,c.filterMode=Dd.Point,r}};o([Cd(Laya.Camera)],ta.prototype,"camera",2),o([Cd(Laya.Scene3D)],ta.prototype,"scene",2),ta=o([OS("PJvIZimlS-ylEVjvKxjBVg")],ta);var Ns=Laya.Vector3,{regClass:NS,property:wd}=Laya,aa=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene,t=this.camera;t.transform.position=new Ns(0,0,15),t.transform.rotate(new Ns(0,0,0),!0,!1),t.clearColor=new Laya.Color(.2,.2,.2,1),this.plane=new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(10,10)),this.plane.transform.rotate(new Ns(-90,0,0),!0,!1),e.addChild(this.plane),this.mat=new Laya.UnlitMaterial,this.plane.meshRenderer.sharedMaterial=this.mat,this.cav=Laya.Browser.createElement("canvas");var a=this.cav.getContext("2d");this.cav.width=256,this.cav.height=256,a.fillStyle="rgb(132,240,109)",a.font="bold 50px \u5B8B\u4F53",a.textAlign="center",a.textBaseline="center",a.fillText("LayaAir",100,50,200),a.strokeStyle="rgb(200,125,0)",a.font="bold 40px \u9ED1\u4F53",a.strokeText("runtime",100,100,200),a.strokeStyle="rgb(255,240,109)",a.font="bold 30px \u9ED1\u4F53",a.fillText("LayaBox",100,150,200),a.strokeStyle="yellow",a.font="bold 30px \u9ED1\u4F53",a.strokeText("LayaBox",100,150,200),this.texture2D=new Laya.Texture2D(256,256,Laya.TextureFormat.R8G8B8A8,!1,!0,!0),this.texture2D.setImageData(this.cav,!0,!0),this.mat.materialRenderMode=Laya.MaterialRenderMode.RENDERMODE_TRANSPARENT,this.mat.albedoTexture=this.texture2D,this.plane.meshRenderer.sharedMaterial.cull=Laya.RenderState.CULL_NONE;var i=new Ns(0,0,1);Laya.timer.frameLoop(1,this,()=>{this.plane.transform.rotate(i,!0,!1)})}};o([wd(Laya.Camera)],aa.prototype,"camera",2),o([wd(Laya.Scene3D)],aa.prototype,"scene",2),aa=o([NS("ROg07rPcQSaC3SPHcFyFfw")],aa);var bd=Laya.Sprite3D,jn=Laya.Loader,{regClass:US,property:Md}=Laya,ra=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=[{url:"resources/res/threeDimen/fbx/Danding.lh",type:jn.HIERARCHY},{url:"resources/res/ui/prefab/ui3d.lh",type:jn.HIERARCHY},{url:"resources/res/ui/prefab/ui3dpage.lh",type:jn.HIERARCHY}];Laya.loader.load(e).then(t=>{var a=this.scene.addChild(t[0].create());a.transform.position=new Laya.Vector3(0,0,0);let i=new bd;a.addChild(i);let r=i.addComponent(Laya.UI3D);r.prefab=t[1],r.renderMode=Laya.MaterialRenderMode.RENDERMODE_TRANSPARENT,r.resolutionRate=256,r.billboard=!0,r.enableHit=!1,i.transform.localPositionY=2.7;let n=new bd;a.addChild(n);let l=n.addComponent(Laya.UI3D);l.prefab=t[2],l.renderMode=Laya.MaterialRenderMode.RENDERMODE_TRANSPARENT,l.resolutionRate=256,l.scale=new Laya.Vector2(2,2),l.billboard=!0,l.enableHit=!0,n.transform.position=new Laya.Vector3(-2,1.5,0)})}};o([Md(Laya.Camera)],ra.prototype,"camera",2),o([Md(Laya.Scene3D)],ra.prototype,"scene",2),ra=o([US("y4P2N3oCQhKxcWHwce9WdQ")],ra);var Td=class extends Laya.Script{constructor(){super()}onStart(){let s=this.owner.getChildByName("Tab");s.selectHandler=new Laya.Handler(this,e=>{})}};var WS=Laya.VideoTexture,Ad=Laya.UnlitMaterial,GS=Laya.Camera,Bd=Laya.MeshRenderer,zS=Laya.RenderTexture,XS=Laya.Script,Ed=Laya.RenderTargetFormat,Us=Laya.Matrix4x4,b=Laya.Vector3,YS=Laya.Color,KS=Laya.Vector4,{regClass:QS,property:Rd}=Laya,ia=class extends h{constructor(){super();this.isoneVideo=!1;this.index=0;this.videoTexture=new WS}onAwake(){super.base(this.camera);var e=this.camera.addComponent(qn);e.onlyMainCamera=this.camera,e.mirrorPlane=this.scene.getChildByName("reflectionPlan"),this.videoPlane=this.scene.getChildByName("moveclip"),this.createVideo("resources/res/av/mov_bbb.mp4"),super.addBottomButton(["\u5207\u6362ogg","\u5207\u6362webm","\u5207\u6362mp4"],this,[this.setType,this.setType,this.setType])}onDestroy(){this.videoTexture.pause(),this.videoTexture.destroy()}createVideo(e){if(!this.isoneVideo){this.videoTexture.source=e,this.videoTexture.play(),this.videoTexture.loop=!0;let t=new Ad;t.albedoTexture=this.videoTexture,this.videoPlane.getComponent(Bd).sharedMaterial=t,this.isoneVideo=!0}}setType(){this.isoneVideo=!1,this.index++,this.index%3===1?this.createVideo("resources/res/av/mov_bbb.ogg"):this.index%3===2?this.createVideo("resources/res/av/mov_bbb.webm"):this.createVideo("resources/res/av/mov_bbb.mp4")}};o([Rd(Laya.Camera)],ia.prototype,"camera",2),o([Rd(Laya.Scene3D)],ia.prototype,"scene",2),ia=o([QS("avdMFGmOQKmQbfZnEJro8A")],ia);var R=class R extends XS{constructor(){super();this.mirrorCamera=new GS;this.renderTexture=zS.createFromPool(1024,1024,Ed.R8G8B8,Ed.DEPTH_16,!1,1);this.estimateViewFrustum=!0;this.setNearClipPlane=!0;this.nearClipDistanceOffset=-.01;this.vn=new b;this.pa=new b;this.pb=new b;this.pc=new b;this.pe=new b;this.va=new b;this.vb=new b;this.vc=new b;this.vr=new b;this.vu=new b;this.p=new Us;this.rm=new Us;this.tm=new Us}set mirrorPlane(e){this._mirrorPlane=e;var t=new Ad;let a=e;a.getComponent(Bd).sharedMaterial=t,t.albedoTexture=this.renderTexture,t.tilingOffset=new KS(-1,1,0,0)}set onlyMainCamera(e){e.scene.addChild(this.mirrorCamera),this.mainCamera=e}onStart(){this.mirrorCamera.renderTarget=this.renderTexture,this.mirrorCamera.clearColor=new YS(0,0,0,1)}onUpdate(){this.mirrorCamera==null||this._mirrorPlane==null||this.mainCamera==null||(this._mirrorPlane.transform.worldMatrix.invert(R.tempMat),b.transformV3ToV3(this.mainCamera.transform.position,R.tempMat,R.tempV3),R.tempV3.y=-R.tempV3.y,b.transformV3ToV3(R.tempV3,this._mirrorPlane.transform.worldMatrix,R.tempV3),this.mirrorCamera.transform.position=R.tempV3,b.transformV3ToV3(R.oriPa,this._mirrorPlane.transform.worldMatrix,this.pa),b.transformV3ToV3(R.oriPb,this._mirrorPlane.transform.worldMatrix,this.pb),b.transformV3ToV3(R.oriPc,this._mirrorPlane.transform.worldMatrix,this.pc),this.pe=this.mirrorCamera.transform.position,this.n=this.mirrorCamera.nearPlane,this.f=this.mirrorCamera.farPlane,b.subtract(this.pa,this.pe,this.va),b.subtract(this.pb,this.pe,this.vb),b.subtract(this.pc,this.pe,this.vc),b.subtract(this.pb,this.pa,this.vr),b.subtract(this.pc,this.pa,this.vu),b.cross(this.va,this.vc,R.tempV3),b.dot(R.tempV3,this.vb)<0&&(b.scale(this.vu,-1,this.vu),this.pc.cloneTo(this.pa),b.add(this.pa,this.vr,this.pb),b.add(this.pa,this.vu,this.pc),b.subtract(this.pa,this.pe,this.va),b.subtract(this.pb,this.pe,this.vb),b.subtract(this.pc,this.pe,this.vc)),b.normalize(this.vr,this.vr),b.normalize(this.vu,this.vu),b.cross(this.vr,this.vu,R.tempV3),b.normalize(R.tempV3,this.vn),this.d=b.dot(this.va,this.vn),this.setNearClipPlane&&(this.n=this.d+this.nearClipDistanceOffset,this.mirrorCamera.nearPlane=this.n),this.l=b.dot(this.vr,this.va)*this.n/this.d,this.r=b.dot(this.vr,this.vb)*this.n/this.d,this.b=b.dot(this.vu,this.va)*this.n/this.d,this.t=b.dot(this.vu,this.vc)*this.n/this.d,this.p.elements[0]=2*this.n/(this.r-this.l),this.p.elements[4]=0,this.p.elements[8]=(this.r+this.l)/(this.r-this.l),this.p.elements[12]=0,this.p.elements[1]=0,this.p.elements[5]=2*this.n/(this.t-this.b),this.p.elements[9]=(this.t+this.b)/(this.t-this.b),this.p.elements[13]=0,this.p.elements[2]=0,this.p.elements[6]=0,this.p.elements[10]=(this.f+this.n)/(this.n-this.f),this.p.elements[14]=2*this.f*this.n/(this.n-this.f)/2,this.p.elements[3]=0,this.p.elements[7]=0,this.p.elements[11]=-1,this.p.elements[15]=0,this.p.elements[0]*=-1,this.p.elements[5]*=-1,this.p.elements[14]*=-1,this.rm.elements[0]=this.vr.x,this.rm.elements[4]=this.vr.y,this.rm.elements[8]=this.vr.z,this.rm.elements[12]=this.pe.x,this.rm.elements[1]=this.vu.x,this.rm.elements[5]=this.vu.y,this.rm.elements[9]=this.vu.z,this.rm.elements[13]=this.pe.z,this.rm.elements[2]=this.vn.x,this.rm.elements[6]=this.vn.y,this.rm.elements[10]=this.vn.z,this.rm.elements[14]=this.pe.y,this.rm.elements[3]=0,this.rm.elements[7]=0,this.rm.elements[11]=0,this.rm.elements[15]=1,this.mirrorCamera.projectionMatrix=this.p,this.rm.invert(R.tempMat),this.mirrorCamera.transform.worldMatrix=R.tempMat,this.estimateViewFrustum)}};R.oriPa=new b(5,0,-5),R.oriPb=new b(-5,0,-5),R.oriPc=new b(5,0,5),R.tempMat=new Us,R.tempV3=new b;var qn=R;var JS=Laya.MeshSprite3D,Hr=Laya.Vector3,jS=Laya.BlinnPhongMaterial,qS=Laya.PrimitiveMesh,Zn=Laya.CameraClearFlags,ZS=Laya.SkyBox,$S=Laya.Loader,{regClass:ex,property:$n}=Laya,Ze=class extends h{constructor(){super();this._translate=new Hr(0,.7,5);this._rotation=new Hr(-15,0,0);this._rotation2=new Hr(-3.14/3,0,0);this._rotation3=new Hr(0,45,0)}onAwake(){super.base(this.camera);var e=["resources/res/threeDimen/texture/layabox.png","resources/res/threeDimen/skyBox/skyBox2/skyBox2.lmat"];Laya.loader.load(e).then(t=>{this.onPreLoadFinish(t)})}onPreLoadFinish(e){this.camera.transform.translate(this._translate),this.camera.transform.rotate(this._rotation,!0,!1),this.camera.useOcclusionCulling=!1,this.camera.clearFlag=Zn.SolidColor,this.camera.fieldOfView=60,this.scene.addChild(this.camera),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),this.directionLight.transform.rotate(this._rotation2);var t=this.scene.addChild(new JS(qS.createBox(.5,.5,.5)));t.transform.position=new Hr(0,2.7,5),t.transform.rotate(this._rotation3,!1,!1);var a=new jS;t.meshRenderer.material=a,a.albedoTexture=e[0],super.addBottomButton(["\u5207\u6362\u80CC\u666F","\u5207\u6362\u80CC\u666F"],this,[this.setSkybox,this.setSolidColor])}setSolidColor(){this.camera.clearFlag=Zn.SolidColor}setSkybox(){this.camera.clearFlag=Zn.Sky;var e=$S.getRes("resources/res/threeDimen/skyBox/skyBox2/skyBox2.lmat"),t=this.camera.skyRenderer;t.mesh=ZS.instance,t.material=e}};o([$n(Laya.Camera)],Ze.prototype,"camera",2),o([$n(Laya.Scene3D)],Ze.prototype,"scene",2),o([$n(Laya.Sprite3D)],Ze.prototype,"directionLight",2),Ze=o([ex("PqebEI6oRVOcq874-VnU7A")],Ze);var eh=Laya.Sprite3D,tx=Laya.MeshSprite3D,oa=Laya.Vector3,ax=Laya.Quaternion,{regClass:rx,property:th}=Laya,$e=class extends h{constructor(){super();this.layerIndex=0;this._translate=new oa(0,1.7,3);this._rotation3=new ax(.7071068,0,0,-.7071067);this._rotation4=new oa(0,60,0);this._position=new oa(0,0,.5)}onAwake(){super.base(this.camera),super.setCameraDirectionLight(this.camera,this.directionLight),this.camera.removeAllLayers(),this.camera.addLayer(5);var e=["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm","resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/Materials/T_Diffuse.lmat"];Laya.loader.load(e).then(t=>{this.onComplete(t)})}onComplete(e){var t=this.scene.addChild(e[0].create());t.getChildAt(0).meshRenderer.receiveShadow=!0,t.getChildAt(0).layer=5;var a=this.scene.addChild(new tx(e[1]));a.meshRenderer.material=e[2],a.layer=1,a.transform.position=new oa(0,0,.5),a.transform.localScale=new oa(.3,.3,.3),a.transform.rotation=this._rotation3,a.meshRenderer.castShadow=!0;var i=eh.instantiate(a,this.scene,!1,this._position),r=eh.instantiate(a,this.scene,!1,this._position),n=eh.instantiate(a,this.scene,!1,this._position);i.layer=2,r.layer=3,n.layer=0,this._translate.setValue(1.5,0,0),i.transform.translate(this._translate),this._translate.setValue(-1.5,0,0),r.transform.translate(this._translate),this._translate.setValue(2.5,0,0),n.transform.translate(this._translate),r.transform.rotate(this._rotation4,!1,!1),n.transform.localScale=new oa(.1,.1,.1),super.addBottomButton(["\u5207\u6362\u56FE\u5C42","\u5207\u6362\u56FE\u5C42","\u5207\u6362\u56FE\u5C42"],this,[this.setLayer,this.setLayer,this.setLayer])}setLayer(){this.camera.removeAllLayers(),this.layerIndex++,this.camera.addLayer(this.layerIndex%3),this.camera.addLayer(5)}};o([th(Laya.Camera)],$e.prototype,"camera",2),o([th(Laya.Scene3D)],$e.prototype,"scene",2),o([th(Laya.Sprite3D)],$e.prototype,"directionLight",2),$e=o([rx("UReQR07GR9ioqeoamH8bsQ")],$e);var ix=Laya.Sprite3D,ah=Laya.MeshSprite3D,Ve=Laya.Vector3,ox=Laya.BlinnPhongMaterial,rh=Laya.PrimitiveMesh,sx=Laya.CameraClearFlags,nx=Laya.Loader,{regClass:hx,property:ih}=Laya,et=class extends h{constructor(){super();this.index=0;this._translate=new Ve(0,.7,5);this._rotation=new Ve(-15,0,0);this._rotation2=new Ve(-3.14/3,0,0);this._rotation3=new Ve(0,45,0);this._position=new Ve(1.5,0,2);this._position2=new Ve(-1.5,0,2);this._position3=new Ve(0,0,2);this._up=new Ve(0,1,0)}onAwake(){super.base(this.camera),Laya.loader.load("resources/res/threeDimen/texture/layabox.png").then(()=>{this.onPreLoadFinish()})}onPreLoadFinish(){this.camera.transform.position=this._translate,this.camera.transform.rotate(this._rotation,!0,!1),this.camera.clearFlag=sx.SolidColor,this.camera.fieldOfView=60,this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),this.directionLight.transform.rotate(this._rotation2);var e=new ix;this.scene.addChild(e),this.box=e.addChild(new ah(rh.createBox(.5,.5,.5))),this.box.transform.position=this._position,this.box.transform.rotate(this._rotation3,!1,!1),this.capsule=new ah(rh.createCapsule(.25,1,10,20)),this.capsule.transform.position=this._position2,e.addChild(this.capsule),this.cylinder=new ah(rh.createCylinder(.25,1,20)),this.cylinder.transform.position=this._position3,e.addChild(this.cylinder);var t=new ox;this.box.meshRenderer.material=t,this.capsule.meshRenderer.material=t,this.cylinder.meshRenderer.material=t;var a=nx.getTexture2D("resources/res/threeDimen/texture/layabox.png");t.albedoTexture=a,super.addBottomButton(["\u5207\u6362\u6CE8\u89C6","\u5207\u6362\u6CE8\u89C6","\u5207\u6362\u6CE8\u89C6"],this,[this.setLookAt,this.setLookAt,this.setLookAt]),this.camera.transform.lookAt(this.cylinder.transform.position,this._up)}setLookAt(e=0){this.index++,this.index%3===1?this.camera.transform.lookAt(this.box.transform.position,this._up):this.index%3===2?this.camera.transform.lookAt(this.cylinder.transform.position,this._up):this.camera.transform.lookAt(this.capsule.transform.position,this._up)}};o([ih(Laya.Camera)],et.prototype,"camera",2),o([ih(Laya.Scene3D)],et.prototype,"scene",2),o([ih(Laya.Sprite3D)],et.prototype,"directionLight",2),et=o([hx("UMziwEhKT3iWaekVPj2dzg")],et);var lx=Laya.Sprite3D,fe=Laya.MeshSprite3D,$=Laya.Vector3,px=Laya.BlinnPhongMaterial,oh=Laya.PrimitiveMesh,{regClass:dx,property:sh}=Laya,tt=class extends h{constructor(){super()}onAwake(){super.base(this.camera,!0,!0),this.camera.transform.position=new $(0,1,3),this.camera.transform.rotate(new $(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.5,.5,.5,1);var e=this.directionLight.transform.worldMatrix;e.setForward(new $(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.addObjectInScene(this.scene),this.setMsaaOn(),super.addBottomButton(["\u5173\u95EDMSAA","\u5F00\u542FMSAA"],this,[this.setMsaaOff,this.setMsaaOn])}setMsaaOn(){this.camera.msaa=!0,y.curPage&&(this.renderTarget2=new Laya.RenderTexture(y.pageWidth*2,y.pageHeight*2,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.DEPTH_32,!1,4),this.camera.renderTarget=this.renderTarget2,y.curPage.texture=new Laya.Texture(this.camera.renderTarget))}setMsaaOff(){this.camera.msaa=!1,y.curPage&&(this.renderTarget1=new Laya.RenderTexture(y.pageWidth*2,y.pageHeight*2,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.DEPTH_32,!1,1),this.camera.renderTarget=this.renderTarget1,y.curPage.texture=new Laya.Texture(this.camera.renderTarget))}addObjectInScene(e){let t=new lx;e.addChild(t);let a=oh.createPlane(10,10,1,1),i=new fe(a);e.addChild(i);let r=oh.createBox(),n=oh.createSphere(.3),l=new fe(r),d=new fe(r),c=new fe(r),u=new fe(r),m=new fe(n),L=new fe(n),g=new fe(n),x=new fe(n);l.meshRenderer.sharedMaterial=new px,t.addChild(l),t.addChild(d),t.addChild(c),t.addChild(u),t.addChild(m),t.addChild(L),t.addChild(g),t.addChild(x),d.transform.position=new $(-1,0,0),c.transform.position=new $(-1,0,1),u.transform.position=new $(-1,1,0),m.transform.position=new $(-3,0,0),L.transform.position=new $(2,0,0),g.transform.position=new $(2,.5,0),x.transform.position=new $(-1,0,2)}onDestroy(){this.renderTarget1.destroy(),this.renderTarget2.destroy()}};o([sh(Laya.Camera)],tt.prototype,"camera",2),o([sh(Laya.Scene3D)],tt.prototype,"scene",2),o([sh(Laya.Sprite3D)],tt.prototype,"directionLight",2),tt=o([dx("_1gwOwGfQ_eR9gyROM95aA")],tt);var Vd=Laya.MeshSprite3D,Or=Laya.Vector3,cx=Laya.BlinnPhongMaterial,mx=Laya.Event,ux=Laya.Rigidbody3D,_d=Laya.PrimitiveMesh,Pd=Laya.BoxColliderShape,yx=Laya.PhysicsCollider,Lx=Laya.Vector4,gx=Laya.Vector2,vx=Laya.Ray,{regClass:Sx,property:kd}=Laya,sa=class extends h{constructor(){super();this.outs=[];this.point=new gx;this._forward=new Or(-1,-1,-1);this._tilingOffset=new Lx(10,10,0,0);this.tmpVector=new Or(0,0,0);this.tmpVector2=new Or(0,0,0)}onAwake(){super.base(this.camera),super.setCameraDirectionLight(this.camera,this.scene.getChildByName("Direction Light"));var e=this.scene.addChild(new Vd(_d.createPlane(10,10,10,10))),t=new cx;Laya.loader.load("resources/res/threeDimen/Physics/grass.png").then(r=>{t.albedoTexture=r}),t.tilingOffset=this._tilingOffset,e.meshRenderer.material=t;var a=e.addComponent(yx),i=new Pd(10,0,10);a.colliderShape=i,a.friction=2,a.restitution=.3,this._ray=new vx(new Or(0,0,0),new Or(0,0,0)),this.owner.on(mx.MOUSE_DOWN,this,this.onMouseDown)}addBoxXYZ(e,t,a){var i=Math.random()*.5,r=Math.random()*.5,n=Math.random()*.5,l=this.scene.addChild(new Vd(_d.createBox(i,r,n)));this.tmpVector.setValue(e,t,a),l.transform.position=this.tmpVector,this.tmpVector2.setValue(Math.random()*360,Math.random()*360,Math.random()*360),l.transform.rotationEuler=this.tmpVector2;var d=l.addComponent(ux),c=new Pd(i,r,n);d.colliderShape=c,d.mass=10}onMouseDown(e){if(y.curPage?(this.point.x=e.target.mouseX*y.screenWidth/y.pageWidth,this.point.y=e.target.mouseY*y.screenHeight/y.pageHeight):(this.point.x=e.target.mouseX,this.point.y=e.target.mouseY),console.log(e.target.mouseX,e.target.mouseY),this.camera.viewportPointToRay(this.point,this._ray),this.scene.physicsSimulation.rayCastAll(this._ray,this.outs),this.outs.length!=0)for(var t=0;t<this.outs.length;t++)this.addBoxXYZ(this.outs[t].point.x,this.outs[t].point.y,this.outs[t].point.z)}};o([kd(Laya.Camera)],sa.prototype,"camera",2),o([kd(Laya.Scene3D)],sa.prototype,"scene",2),sa=o([Sx("PNomz1uQSMaRvUGntOePeQ")],sa);var{regClass:xx,property:Fd}=Laya,na=class extends h{constructor(){super();this._position=new Laya.Vector3;this._outPos=new Laya.Vector4;this.scaleDelta=0;this.clientScaleX=0;this.clientScaleY=0}onAwake(){super.base(this.camera),this.clientScaleY=Laya.stage.clientScaleX,this.clientScaleX=Laya.stage.clientScaleY,this.camera.transform.position=new Laya.Vector3(0,.75,1.2),this.camera.transform.rotationEuler=new Laya.Vector3(-30,0,0),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(e=>{this.onComplete(e)})}onComplete(e){this.layaMonkey3D=e.create(),this.scene.addChild(this.layaMonkey3D),this.layaMonkey2D=this.owner.addChild(new Laya.Image("resources/res/threeDimen/monkey.png")),this.layaMonkey2D.anchorX=.5,this.layaMonkey2D.scale(.5,.5),Laya.timer.frameLoop(1,this,this.animate)}animate(){this._position.x=Math.sin(this.scaleDelta+=.01),this.layaMonkey3D.transform.position=this._position,this.camera.viewport.project(this.layaMonkey3D.transform.position,this.camera.projectionViewMatrix,this._outPos);let e=0,t=0;y.curPage&&!Laya.Browser.PLATFORM_PC?(e=this._outPos.x/this.clientScaleX,t=this._outPos.y/this.clientScaleY):y.curPage?(e=this._outPos.x*y.pageWidth*y.scaleWidth/Laya.Browser.clientWidth,t=this._outPos.y*y.pageHeight*y.scaleHeight/Laya.Browser.clientHeight):(e=this._outPos.x/this.clientScaleX,t=this._outPos.y/this.clientScaleY),this.layaMonkey2D.pos(e,t)}};o([Fd(Laya.Camera)],na.prototype,"camera",2),o([Fd(Laya.Scene3D)],na.prototype,"scene",2),na=o([xx("xtJ2S8REQfCPA4UwUl2fAQ")],na);var fx=Laya.Camera,nh=Laya.Vector3,Dx=Laya.CameraClearFlags,Cx=Laya.SkyBox,wx=Laya.Color,Id=Laya.Viewport,{regClass:bx,property:Hd}=Laya,ha=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new nh(0,.5,1.5),this.camera.clearColor=new wx(.3,.3,.3,1),this.camera.normalizedViewport=new Id(0,0,.5,1);var e=this.scene.addChild(new fx(0,.1,100));e.transform.position=new nh(0,.5,1.5),e.transform.rotationEuler=new nh(-15,0,0),e.normalizedViewport=new Id(.5,0,.5,1),e.clearFlag=Dx.Sky,e.renderTarget=y.rt,Laya.loader.load("resources/res/threeDimen/skyBox/skyBox2/skyBox2.lmat").then(t=>{var a=e.skyRenderer;a.mesh=Cx.instance,a.material=t}),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(t=>{this.scene.addChild(t.create())})}};o([Hd(Laya.Camera)],ha.prototype,"camera",2),o([Hd(Laya.Scene3D)],ha.prototype,"scene",2),ha=o([bx("igTCxhadQ1-eQUgpBBNwtA")],ha);var Od=Laya.Vector3,Mx=Laya.CameraClearFlags,{regClass:Tx,property:Nd}=Laya,la=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Od(0,.2,.7),this.camera.orthographic=!0,this.camera.orthographicVerticalSize=3,this.camera.clearFlag=Mx.SolidColor,Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(e=>{let t=e.create();this.scene.addChild(t),t.transform.position=new Od(0,0,0)}),super.addBottomButton(["\u5173\u95ED\u6B63\u4EA4\u6295\u5F71","\u5F00\u542F\u6B63\u4EA4\u6295\u5F71"],this,[this.setOrthographic1,this.setOrthographic2])}setOrthographic1(){this.camera.orthographic=!1}setOrthographic2(){this.camera.orthographic=!0,this.camera.orthographicVerticalSize=3}};o([Nd(Laya.Camera)],la.prototype,"camera",2),o([Nd(Laya.Scene3D)],la.prototype,"scene",2),la=o([Tx("h9nFoGxRTBuOmmXyQm1JOQ")],la);var Ud=Laya.Vector3,Wd=Laya.Text,Gd=Laya.RenderTargetFormat,Ex=Laya.RenderTexture,Rx=Laya.Ray,{regClass:Ax,property:hh}=Laya,at=class extends h{constructor(){super();this.text=new Wd}onAwake(){super.base(this.camera),this.ray=new Rx(new Ud(0,0,0),new Ud(0,0,0)),Laya.loader.load("resources/res/threeDimen/scene/CourtyardScene/Courtyard.ls").then(e=>{this.onComplete(e)})}onComplete(e){this.scene1=e.create(),this.scene.addChild(this.scene1);var t=this.pageWidth,a=this.pageHeight;y.curPage&&(t=y.pageWidth,a=y.pageHeight),this.camera2.renderTarget=Ex.createFromPool(t,a,Gd.R8G8B8A8,Gd.DEPTH_16,!1,1,!1,!0),this.camera2.renderingOrder=-1,this.text.width=200,this.text.align="center",this.text.x=(this.pageWidth-this.text.width)/2,this.text.y=50,this.text.overflow=Wd.HIDDEN,this.text.color="#FFFFFF",this.text.fontSize=20,this.text.text="\u9009\u4E2D\u7684\u989C\u8272\uFF1A",this.owner.addChild(this.text)}onMouseDown(e){var t=e.target.mouseX,a=e.target.mouseY,i=new Uint8Array(4);this.camera2.renderTarget.getData(t,a,1,1,i),this.text.text=i[0]+" "+i[1]+" "+i[2]+" "+i[3]}};o([hh(Laya.Camera)],at.prototype,"camera",2),o([hh(Laya.Scene3D)],at.prototype,"scene",2),o([hh(Laya.Camera)],at.prototype,"camera2",2),at=o([Ax("0-mHcVkXSFCscI7gaNyolg")],at);var Bx=Laya.MeshSprite3D,zd=Laya.Vector3,Vx=Laya.Quaternion,{regClass:_x,property:Xd}=Laya,pa=class extends h{constructor(){super();this.rotation=new zd(0,.01,0)}onAwake(){super.base(this.camera),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm").then(e=>{var t=this.scene.addChild(new Bx(e));t.transform.localScale=new zd(.3,.3,.3),t.transform.rotation=new Vx(.7071068,0,0,-.7071067),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/Materials/T_Diffuse.lmat").then(a=>{t.meshRenderer.material=a}),Laya.timer.frameLoop(1,this,()=>{t.transform.rotate(this.rotation,!1)})})}};o([Xd(Laya.Camera)],pa.prototype,"camera",2),o([Xd(Laya.Scene3D)],pa.prototype,"scene",2),pa=o([_x("VCJ74oS4TT-WijMoHTkpTw")],pa);var Yd=Laya.MeshSprite3D,Nr=Laya.Vector3,Px=Laya.BlinnPhongMaterial,kx=Laya.PrimitiveMesh,{regClass:Fx,property:Kd}=Laya,da=class extends h{constructor(){super();this.rotation=new Nr(0,.01,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Nr(0,0,2),this.camera.transform.rotate(new Nr(0,0,0),!0,!1);var e=kx.createSphere(),t=this.scene.addChild(new Yd(e));t.transform.position=new Nr(-.6,0,0);var a=this.scene.addChild(new Yd(e));a.transform.position=new Nr(.6,0,0);var i=new Px;Laya.loader.load("resources/res/threeDimen/texture/earth.png").then(r=>{i.albedoTexture=r}),a.meshRenderer.material=i,Laya.timer.frameLoop(1,this,()=>{t.transform.rotate(this.rotation,!1),a.transform.rotate(this.rotation,!1)}),this.addSlider(300,.01,4,1,.01,r=>{i.albedoIntensity=r})}addSlider(e,t,a,i,r,n){let l=this.owner.addChild(new Laya.HSlider("resources/res/ui/hslider.png"));l.width=e,l.min=t,l.max=a,l.value=i,l.tick=r,l.anchorX=.5,l.x=this.pageWidth/2,l.y=this.pageHeight-50,l.changeHandler=Laya.Handler.create(this,n,[],!1);let d=new Laya.Label("\u53CD\u7167\u7387\u5F3A\u5EA6");d.color="#FFFFFF",d.fontSize=16,d.width=100,d.anchorX=.5,d.align="center",d.x=l.width/2,d.y=20,l.addChild(d)}};o([Kd(Laya.Camera)],da.prototype,"camera",2),o([Kd(Laya.Scene3D)],da.prototype,"scene",2),da=o([Fx("YduDvG4zTAezA1p96HO-4w")],da);var Ix=Laya.MeshRenderer,Hx=Laya.Sprite3D,_e=Laya.Vector3,{regClass:Ox,property:lh}=Laya,rt=class extends h{constructor(){super();this.rotation=new _e(0,.01,0);this.normalMapUrl=["resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizardeye_norm.png","resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard_norm.png","resources/res/threeDimen/staticModel/lizard/Assets/Lizard/rock_norm.png"]}onAwake(){super.base(this.camera),this.camera.transform.position=new _e(0,.6,1.1),this.camera.transform.rotate(new _e(-30,0,0),!0,!1);var e=this.directionLight.transform.worldMatrix;e.setForward(new _e(0,-.8,-1)),this.directionLight.transform.worldMatrix=e,this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),Laya.loader.load("resources/res/threeDimen/staticModel/lizard/lizard.lh").then(t=>{this.onComplete(t)})}onComplete(e){var t=this.scene.addChild(e.create());t.transform.position=new _e(-.6,0,0),t.transform.localScale=new _e(.075,.075,.075);var a=Hx.instantiate(t,this.scene,!1,new _e(.6,0,0));a.transform.localScale=new _e(.075,.075,.075);for(var i=0;i<a.getChildByName("lizard").numChildren;i++){var r=a.getChildByName("lizard").getChildAt(i),n=r.getComponent(Ix).material;Laya.loader.load(this.normalMapUrl[i]).then(l=>{n.normalTexture=l})}Laya.timer.frameLoop(1,this,()=>{t.transform.rotate(this.rotation),a.transform.rotate(this.rotation)})}};o([lh(Laya.Camera)],rt.prototype,"camera",2),o([lh(Laya.Scene3D)],rt.prototype,"scene",2),o([lh(Laya.Sprite3D)],rt.prototype,"directionLight",2),rt=o([Ox("j7ePid2vSH-gK8v7yHDQig")],rt);var ph=Laya.Vector3,Ws=Laya.SkinnedMeshRenderer,{regClass:Nx,property:dh}=Laya,it=class extends h{constructor(){super();this.rotation=new Laya.Vector3(0,.01,0);this.specularMapUrl=["resources/res/threeDimen/skinModel/dude/Assets/dude/headS.png","resources/res/threeDimen/skinModel/dude/Assets/dude/jacketS.png","resources/res/threeDimen/skinModel/dude/Assets/dude/pantsS.png","resources/res/threeDimen/skinModel/dude/Assets/dude/upBodyS.png","resources/res/threeDimen/skinModel/dude/Assets/dude/upBodyS.png"]}onAwake(){super.base(this.camera),this.camera.transform.position=new ph(0,3,5),this.camera.transform.rotate(new ph(-15,0,0),!0,!1);var e=this.directionLight.transform.worldMatrix;e.setForward(new ph(0,-.8,-1)),this.directionLight.transform.worldMatrix=e,this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),Laya.loader.load("resources/res/threeDimen/skinModel/dude/dude.lh").then(t=>{var a=this.scene.addChild(t.create());a.transform.position=new Laya.Vector3(-1.5,0,0);for(var i=Laya.Sprite3D.instantiate(a,this.scene,!1,new Laya.Vector3(1.5,0,0)),r=i.getChildAt(0).getChildAt(0),n=0;n<r.getComponent(Ws).materials.length;n++){var l=r.getComponent(Ws).materials[n];Laya.loader.load(this.specularMapUrl[n]).then(d=>{l.specularTexture=d})}Laya.timer.frameLoop(1,this,()=>{a.transform.rotate(this.rotation),i.transform.rotate(this.rotation)}),this.addSlider(300,.01,1,.07,.01,d=>{for(var c=0;c<r.getComponent(Ws).materials.length;c++){var u=r.getComponent(Ws).materials[c];u.shininess=d}})})}addSlider(e,t,a,i,r,n){let l=this.owner.addChild(new Laya.HSlider("resources/res/ui/hslider.png"));l.width=e,l.min=t,l.max=a,l.value=i,l.tick=r,l.anchorX=.5,l.x=this.pageWidth/2,l.y=this.pageHeight-50,l.changeHandler=Laya.Handler.create(this,n,[],!1);let d=new Laya.Label("\u9AD8\u5149\u4EAE\u5EA6");d.color="#FFFFFF",d.fontSize=16,d.width=100,d.anchorX=.5,d.align="center",d.x=l.width/2,d.y=20,l.addChild(d)}};o([dh(Laya.Camera)],it.prototype,"camera",2),o([dh(Laya.Scene3D)],it.prototype,"scene",2),o([dh(Laya.Sprite3D)],it.prototype,"directionLight",2),it=o([Nx("cLSl7KMJR56DIRWatvNCpg")],it);var Qd=Laya.MeshRenderer,Jd=Laya.Vector3,jd=Laya.Color,qd=Laya.Loader,{regClass:Ux,property:Zd}=Laya,ca=class extends h{constructor(){super();this.resource=["resources/res/threeDimen/LayaScene_TransmissionScene/Conventional/Assets/monkeyThinkness.png","resources/res/threeDimen/LayaScene_TransmissionScene/Conventional/Assets/rabbitthickness.jpg"]}onAwake(){super.base(this.camera),this.camera.transform.position=new Jd(9.48667,-.10189,6.16654),this.camera.transform.rotate(new Jd(-4.645,-17.161,0),!0,!1),Laya.loader.load("resources/res/threeDimen/LayaScene_TransmissionScene/Conventional/TransmissionScene.ls").then(e=>{let t=this.scene.addChild(e.create());this.rabbitMaterial=t.getChildByName("rabbit").getComponent(Qd).sharedMaterial,this.monkeyMaterial=t.getChildByName("monkey").getComponent(Qd).sharedMaterial,this.loadThinkNessTexture()})}loadThinkNessTexture(){Laya.loader.load(this.resource).then(()=>{this.onPreLoadFinish()})}onPreLoadFinish(){this.monkeyMaterial.thinknessTexture=qd.getRes("resources/res/threeDimen/LayaScene_TransmissionScene/Conventional/Assets/monkeyThinkness.png"),this.rabbitMaterial.thinknessTexture=qd.getRes("resources/res/threeDimen/LayaScene_TransmissionScene/Conventional/Assets/rabbitthickness.jpg"),this.rabbitMaterial.enableTransmission=!0,this.rabbitMaterial.transmissionRata=0,this.rabbitMaterial.backDiffuse=4.88,this.rabbitMaterial.transmissionColor=new jd(1,1,1,1),this.rabbitMaterial.backScale=1,this.monkeyMaterial.enableTransmission=!0,this.monkeyMaterial.transmissionRata=0,this.monkeyMaterial.backDiffuse=1,this.monkeyMaterial.transmissionColor=new jd(.2,1,0,1),this.monkeyMaterial.backScale=1}};o([Zd(Laya.Camera)],ca.prototype,"camera",2),o([Zd(Laya.Scene3D)],ca.prototype,"scene",2),ca=o([Ux("3ncrak4QTFKTeGIbI-hW-g")],ca);var Wx=Laya.MeshSprite3D,Gs=Laya.Vector3,Gx=Laya.PrimitiveMesh,zx=Laya.CameraClearFlags,Xx=Laya.EffectMaterial,Yx=Laya.Color,{regClass:Kx,property:$d}=Laya,ma=class extends h{constructor(){super();this.rotation=new Gs(0,.01,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Gs(0,0,2),this.camera.transform.rotate(new Gs(0,0,0),!0,!1),this.camera.clearFlag=zx.Sky;var e=this.scene.addChild(new Wx(Gx.createSphere()));e.transform.position=new Gs(0,0,0);var t=new Xx;Laya.loader.load("resources/res/threeDimen/texture/earth.png",Laya.Loader.TEXTURE2D).then(a=>{t.texture=a,t.color=new Yx(1,1,1,1)}),e.meshRenderer.material=t,Laya.timer.frameLoop(1,this,()=>{e.transform.rotate(this.rotation,!1)})}};o([$d(Laya.Camera)],ma.prototype,"camera",2),o([$d(Laya.Scene3D)],ma.prototype,"scene",2),ma=o([Kx("hwdurNGjRyyMJyvbpsyqMg")],ma);var ch=Laya.MeshRenderer,Qx=Laya.PBRStandardMaterial,Jx=Laya.Loader,{regClass:jx,property:ec}=Laya,ua=class extends h{constructor(){super();this.index=0}onAwake(){super.base(this.camera),Laya.loader.load("resources/res/threeDimen/texture/earth.png").then(()=>{this.onPreLoadFinish()})}onPreLoadFinish(){this.sphere=this.scene.getChildByName("Sphere"),this.billinMaterial=this.sphere.getComponent(ch).material,this.pbrStandardMaterial=new Qx,this.pbrTexture=Jx.getTexture2D("resources/res/threeDimen/texture/earth.png"),this.pbrStandardMaterial.albedoTexture=this.pbrTexture,super.addBottomButton(["\u5207\u6362\u6750\u8D28","\u5207\u6362\u6750\u8D28"],this,[this.change,this.change])}change(){this.index++,this.index%2===1?this.sphere.getComponent(ch).material=this.pbrStandardMaterial:this.sphere.getComponent(ch).material=this.billinMaterial}};o([ec(Laya.Camera)],ua.prototype,"camera",2),o([ec(Laya.Scene3D)],ua.prototype,"scene",2),ua=o([jx("wYJ3hlv-RKKctnXXCE-Tsg")],ua);var qx=Laya.MeshSprite3D,mh=Laya.Vector3,Zx=Laya.PrimitiveMesh,$x=Laya.PBRStandardMaterial,ef=Laya.Color,{regClass:tf,property:tc}=Laya,De=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=Zx.createSphere(.25,32,32);let t=6;this.addSpheresSmoothnessMetallic(e,new mh(0,1.5,0),this.scene,2,6,new ef(186/255,110/255,64/255,1),1);var a=new Laya.Label}addPBRSphere(e,t,a,i,r,n,l,d,c){var u=new $x;u.albedoColor=i,u.smoothness=r,u.metallic=n,u.clearCoatEnable=c,c&&(u.clearCoat=l,u.clearCoatRoughness=d);var m=new qx(e);m.meshRenderer.sharedMaterial=u;var L=m.transform;return L.localPosition=t,a.addChild(m),u}addSpheresSmoothnessMetallic(e,t,a,i,r,n){let l=r*.5,d=i*.5;for(var c=0,u=r;c<u;c++)for(var m=0,L=i;m<L;m++){var g=0,x=1;if(m==1)var S=!0,T=c/(L-1)*(1/r),_=0;else var S=!1,T=0,_=0;var N=De._tempPos;N.setValue(-l/2+c*l/(u-1),d/2-m*d/(L-1),3),mh.add(t,N,N),this.addPBRSphere(e,N,a,n,g,x,T,_,S)}}};De._tempPos=new mh,o([tc(Laya.Camera)],De.prototype,"camera",2),o([tc(Laya.Scene3D)],De.prototype,"scene",2),De=o([tf("ifOA76YDQrG-pAp3iAQ13g")],De);var af=Laya.MeshSprite3D,ya=Laya.Vector3,rf=Laya.PrimitiveMesh,of=Laya.PBRStandardMaterial,uh=Laya.Color,{regClass:sf,property:ac}=Laya,ee=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=rf.createSphere(.25,32,32);let t=6;this.addSpheresSpecialMetallic(e,new ya(0,1.5,0),this.scene,t,new uh(186/255,110/255,64/255,1),1),this.addSpheresSmoothnessMetallic(e,new ya(0,0,0),this.scene,3,t,new uh(1,1,1,1)),this.addSpheresSpecialMetallic(e,new ya(0,-1.5,0),this.scene,t,new uh(0,0,0,1),0)}addPBRSphere(e,t,a,i,r,n){var l=new of;l.albedoColor=i,l.smoothness=r,l.metallic=n;var d=new af(e);d.meshRenderer.sharedMaterial=l;var c=d.transform;return c.localPosition=t,a.addChild(d),l}addSpheresSmoothnessMetallic(e,t,a,i,r,n){let l=r*.5,d=i*.5;for(var c=0,u=r;c<u;c++)for(var m=0,L=i;m<L;m++){var g=c/(u-1),x=1-m/(L-1),S=ee._tempPos;S.setValue(-l/2+c*l/(u-1),d/2-m*d/(L-1),3),ya.add(t,S,S),this.addPBRSphere(e,S,a,n,g,x)}}addSpheresSpecialMetallic(e,t,a,i,r,n=0){let l=i*.5;for(var d=0,c=i;d<c;d++){var u=d/(c-1),m=ee._tempPos;m.setValue(-l/2+d*l/(c-1),0,3),ya.add(t,m,m),this.addPBRSphere(e,m,a,r,u,n)}}};ee._tempPos=new ya,o([ac(Laya.Camera)],ee.prototype,"camera",2),o([ac(Laya.Scene3D)],ee.prototype,"scene",2),ee=o([sf("BdPVTg5IRn6ted0OnrldRg")],ee);var rc=Laya.Material,ic=Laya.MeshRenderer,nf=Laya.Vector3,hf=Laya.RenderTargetFormat,lf=Laya.Loader,pf=Laya.Color,df=Laya.UnlitMaterial,zs=Laya.RenderState,{regClass:cf,property:oc}=Laya,La=class extends h{constructor(){super();this.index=0}onAwake(){super.base(this.camera),this.camera.depthTextureFormat=hf.DEPTHSTENCIL_24_8;var e=["resources/res/threeDimen/texture/earth.png"];Laya.loader.load(e).then(()=>{this.onPreLoadFinish()})}onPreLoadFinish(){this.sphere=this.scene.getChildByName("Sphere");let e=this.sphere.clone();this.scene.addChild(e);let t=this.sphere.getComponent(ic).sharedMaterial;t.stencilRef=2,t.stencilWrite=!0,t.stencilTest=zs.STENCILTEST_ALWAYS,t.renderQueue=rc.RENDERQUEUE_OPAQUE,nf.scale(e.transform.localScale,1.5,e.transform.localScale),e.transform.localScale=e.transform.localScale;let a=new df;a.albedoColor=new pf(.8,.5,.1),a.albedoTexture=lf.getTexture2D("resources/res/threeDimen/texture/earth.png"),e.getComponent(ic).sharedMaterial=a,a.stencilRef=0,a.stencilWrite=!1,a.stencilTest=zs.STENCILTEST_GEQUAL,a.renderQueue=rc.RENDERQUEUE_OPAQUE+1,this.stencilMat=a,super.addBottomButton(["Stencil\u5173\u95ED","Stencil\u5F00\u542F"],this,[this.setStencilTest,this.setStencilTest])}setStencilTest(){this.index++,this.index%2===1?this.stencilMat.stencilTest=zs.STENCILTEST_OFF:this.stencilMat.stencilTest=zs.STENCILTEST_GEQUAL}};o([oc(Laya.Camera)],La.prototype,"camera",2),o([oc(Laya.Scene3D)],La.prototype,"scene",2),La=o([cf("QRBcW2_CS0yyzj7zuaNqsg")],La);var sc=Laya.MeshSprite3D,Ur=Laya.Vector3,mf=Laya.BlinnPhongMaterial,uf=Laya.PrimitiveMesh,yf=Laya.UnlitMaterial,Lf=Laya.CameraClearFlags,{regClass:gf,property:nc}=Laya,ga=class extends h{constructor(){super();this.rotation=new Ur(0,.01,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Ur(0,0,2),this.camera.transform.rotate(new Ur(0,0,0),!0,!1),this.camera.clearFlag=Lf.Sky;var e=uf.createSphere(),t=this.scene.addChild(new sc(e));t.transform.position=new Ur(-.6,0,0);var a=this.scene.addChild(new sc(e));a.transform.position=new Ur(.6,0,0);var i=new mf;Laya.loader.load("resources/res/threeDimen/texture/earth.png").then(n=>{i.albedoTexture=n}),t.meshRenderer.material=i;var r=new yf;Laya.loader.load("resources/res/threeDimen/texture/earth.png").then(n=>{r.albedoTexture=n}),a.meshRenderer.material=r,Laya.timer.frameLoop(1,this,()=>{t.transform.rotate(this.rotation,!1),a.transform.rotate(this.rotation,!1)})}};o([nc(Laya.Camera)],ga.prototype,"camera",2),o([nc(Laya.Scene3D)],ga.prototype,"scene",2),ga=o([gf("fDJZQpDmRoqGbNr6NoJxng")],ga);var yh=Laya.Sprite3D,vf=Laya.MeshSprite3D,Ce=Laya.Vector3,Sf=Laya.Event,hc=Laya.Text,xf=Laya.Quaternion,ff=Laya.HitResult,Df=Laya.Vector2,Cf=Laya.Ray,Lh=Laya.MeshFilter,Xs=Laya.MeshColliderShape,Ys=Laya.PhysicsCollider,gh=Laya.Loader,{regClass:wf,property:vh}=Laya,ot=class extends h{constructor(){super();this._outHitResult=new ff;this.point=new Df;this.text=new hc;this.tmpVector=new Ce(0,0,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Ce(0,.7,5),this.camera.transform.rotate(new Ce(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),this.directionLight.transform.rotate(new Ce(-3.14/3,0,0)),Laya.loader.load(["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"]).then(()=>{this.onComplete()})}onComplete(){var e=this.scene.addChild(gh.createNodes("resources/res/threeDimen/staticModel/grid/plane.lh"));e.layer=10;var t=this.scene.addChild(new vf(gh.getRes("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm")));t.meshRenderer.material=gh.getRes("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/Materials/T_Diffuse.lmat"),t.transform.position=new Ce(0,0,.5),t.transform.localScale=new Ce(.3,.3,.3),t.transform.rotation=new xf(.7071068,0,0,-.7071067),this.tmpVector.setValue(0,0,.5);var a=yh.instantiate(t,this.scene,!1,this.tmpVector),i=yh.instantiate(t,this.scene,!1,this.tmpVector),r=yh.instantiate(t,this.scene,!1,this.tmpVector);t.name="\u5927\u718A",a.name="\u4E8C\u718A",i.name="\u4E09\u718A",r.name="\u5C0F\u718A",this.tmpVector.setValue(1.5,0,0),a.transform.translate(this.tmpVector),this.tmpVector.setValue(-1.5,0,0),i.transform.translate(this.tmpVector),this.tmpVector.setValue(2.5,0,0),r.transform.translate(this.tmpVector),this.tmpVector.setValue(0,60,0),i.transform.rotate(this.tmpVector,!1,!1),this.tmpVector.setValue(.1,.1,.1);var n=new Ce(.1,.1,.1),l=t.addComponent(Ys),d=new Xs;d.mesh=t.meshFilter.sharedMesh,l.colliderShape=d;var c=a.addComponent(Ys),u=new Xs;u.mesh=a.getComponent(Lh).sharedMesh,c.colliderShape=u;var m=i.addComponent(Ys),L=new Xs;L.mesh=i.getComponent(Lh).sharedMesh,m.colliderShape=L;var g=r.addComponent(Ys),x=new Xs;x.mesh=r.getComponent(Lh).sharedMesh,g.colliderShape=x,this.text.y=50,this._ray=new Cf(new Ce(0,0,0),new Ce(0,0,0)),this.addMouseEvent(),this.text.name="text",this.text.overflow=hc.HIDDEN,this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=20,this.text.x=this.pageWidth/2-60,this.owner.addChild(this.text),t.addComponent(va),a.addComponent(va),i.addComponent(va),r.addComponent(va),this.infoText=new Laya.Label,this.infoText.x=this.pageWidth/2,this.infoText.y=10,this.infoText.width=this.pageWidth,this.infoText.anchorX=.5,this.infoText.align="center",this.infoText.text="\u70B9\u51FB\u6BCF\u4E2A\u5BF9\u8C61",this.infoText.overflow=Laya.Text.HIDDEN,this.infoText.color="#FFFFFF",this.infoText.font="Impact",this.infoText.fontSize=25,this.owner.addChild(this.infoText)}addMouseEvent(){this.owner.on(Sf.MOUSE_DOWN,this,this.onStageMouseDown)}onStageMouseDown(e){this.point.x=e.target.mouseX,this.point.y=e.target.mouseY,y.curPage?(this.point.x=this.point.x*y.screenWidth/y.pageWidth,this.point.y=this.point.y*y.screenHeight/y.pageHeight):(this.point.x=this.point.x,this.point.y=this.point.y);let t=new Laya.Point(this.point.x,this.point.y);console.log(e.target.mouseX,e.target.mouseY),this.point.x=t.x,this.point.y=t.y,this.camera.viewportPointToRay(this.point,this._ray),this.scene.physicsSimulation.rayCast(this._ray,this._outHitResult),this._outHitResult.succeeded&&(this.text.text="\u78B0\u649E\u5230\u4E86"+this._outHitResult.collider.owner.name,console.log("\u78B0\u649E\u5230\u7269\u4F53\uFF01\uFF01"))}};o([vh(Laya.Camera)],ot.prototype,"camera",2),o([vh(Laya.Scene3D)],ot.prototype,"scene",2),o([vh(Laya.Sprite3D)],ot.prototype,"directionLight",2),ot=o([wf("XM6h10CRSluLFSq9rtOdGg")],ot);var va=class extends Laya.Script{constructor(){super();this._albedoColor=new Laya.Color(0,0,0,1)}onAwake(){this.meshSprite=this.owner,this.text=this.owner.getChildByName("text")}onUpdate(){}onMouseDown(){this.text.text="\u78B0\u649E\u5230\u4E86"+this.owner.name}onCollisionEnter(e){this.meshSprite.meshRenderer.sharedMaterial.albedoColor=this._albedoColor}};var Sa=Laya.Vector3,bf=Laya.Text,Wr=Laya.Vector2,Mf=Laya.Label,{regClass:Tf,property:Sh}=Laya,V=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Sa(0,.8,1.5),this.camera.transform.rotate(new Sa(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1),this.directionLight.transform.rotate(new Sa(-3.14/3,0,0)),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(e=>{this.onComplete(e)})}onComplete(e){var t=e.create();t.addComponent(xh),this.scene.addChild(t),this.camera.transform.lookAt(t.transform.position,new Sa(0,1,0)),V.text=new Mf,V.text.text="\u89E6\u63A7\u70B9\u5F52\u96F6",V.text.name="ceshi",V.text.width=this.pageWidth,V.text.align="center",V.text.anchorX=.5,V.text.overflow=bf.HIDDEN,V.text.color="#FFFFFF",V.text.font="Impact",V.text.fontSize=25,V.text.x=this.pageWidth/2,V.text.y=70,this.owner.addChild(V.text),this.infoText=new Laya.Label,this.infoText.x=this.pageWidth/2,this.infoText.y=20,this.infoText.width=this.pageWidth,this.infoText.anchorX=.5,this.infoText.align="center",this.infoText.text="\u5355\u6307\u65CB\u8F6C\uFF0C\u53CC\u6307\u7F29\u653E(\u8BF7\u4F7F\u7528\u624B\u673A\u8BBE\u5907)",this.infoText.overflow=Laya.Text.HIDDEN,this.infoText.color="#FFFFFF",this.infoText.font="Impact",this.infoText.fontSize=25,this.owner.addChild(this.infoText)}};o([Sh(Laya.Camera)],V.prototype,"camera",2),o([Sh(Laya.Scene3D)],V.prototype,"scene",2),o([Sh(Laya.Sprite3D)],V.prototype,"directionLight",2),V=o([Tf("3Qbr_ASiT9OMlGzP24n_1A")],V);var xh=class extends Laya.Script{constructor(){super(...arguments);this.rotation=new Sa(0,.01,0);this.lastPosition=new Wr(0,0);this.distance=0;this.disVector1=new Wr(0,0);this.disVector2=new Wr(0,0);this.isTwoTouch=!1;this.first=!0;this.twoFirst=!0;this.tmpVector=new Sa(0,0,0)}onAwake(){}onStart(){this._scene=this.owner.parent,this._text=V.text,this._camera=this._scene.getChildByName("Main Camera")}onUpdate(){var e=Laya.InputManager.touchCount;if(e===1){if(this.isTwoTouch)return;this._text.text="\u89E6\u63A7\u70B9\u4E3A1";var t=Laya.InputManager.touches[0];if(this.first)this.lastPosition.x=t.pos.x,this.lastPosition.y=t.pos.y,this.first=!1;else{var a=t.pos.y-this.lastPosition.y,i=t.pos.x-this.lastPosition.x;this.lastPosition.x=t.pos.x,this.lastPosition.y=t.pos.y,this.tmpVector.setValue(1*a/2,1*i/2,0),this.owner.transform.rotate(this.tmpVector,!0,!1)}}else if(e===2){this._text.text="\u89E6\u63A7\u70B9\u4E3A2",this.isTwoTouch=!0;var t=Laya.InputManager.touches[0],r=Laya.InputManager.touches[1];if(this.twoFirst)this.disVector1.x=t.pos.x-r.pos.x,this.disVector1.y=t.pos.y-r.pos.y,this.distance=Wr.scalarLength(this.disVector1),this.twoFirst=!1;else{this.disVector2.x=t.pos.x-r.pos.x,this.disVector2.y=t.pos.y-r.pos.y;var n=Wr.scalarLength(this.disVector2);this.tmpVector.setValue(0,0,-.01*(n-this.distance)),this._camera.transform.translate(this.tmpVector),this.distance=n}}else e===0&&(this._text.text="\u89E6\u63A7\u70B9\u5F52\u96F6",this.first=!0,this.twoFirst=!0,this.lastPosition.x=0,this.lastPosition.y=0,this.isTwoTouch=!1)}onLateUpdate(){}};var Gr=Laya.Vector3,lc=Laya.Quaternion,{regClass:Ef,property:fh}=Laya,st=class extends h{constructor(){super();this._quaternion=new lc;this._direction=new Gr}onAwake(){super.base(this.camera),this.camera.transform.position=new Gr(0,.7,1.3),this.camera.transform.rotate(new Gr(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1);var e=this.directionLight.transform.worldMatrix;e.setForward(new Gr(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"];Laya.loader.load(t).then(a=>{this.scene.addChild(a[0].create()),this.scene.addChild(a[1].create()),Laya.timer.frameLoop(1,this,this.roll)})}roll(){lc.createFromYawPitchRoll(.025,0,0,this._quaternion),this.directionLight.transform.worldMatrix.getForward(this._direction),Gr.transformQuat(this._direction,this._quaternion,this._direction);var e=this.directionLight.transform.worldMatrix;e.setForward(this._direction),this.directionLight.transform.worldMatrix=e}onDestroy(){Laya.timer.clear(this,this.roll)}};o([fh(Laya.Camera)],st.prototype,"camera",2),o([fh(Laya.Scene3D)],st.prototype,"scene",2),o([fh(Laya.Sprite3D)],st.prototype,"directionLight",2),st=o([Ef("xip9AaABR-iwnpc1z5FQ2w")],st);var zr=Laya.Vector3,Rf=Laya.SpotLight,Af=Laya.PointLight,{regClass:Bf,property:pc}=Laya,xa=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.camera.addComponent(Dh),t=e.lights,a=e.offsets,i=e.moveRanges;t.length=15;for(var r=0;r<15;r++){var n=this.scene.addChild(new Af);n.range=2+Math.random()*8,n.color.setValue(Math.random(),Math.random(),Math.random(),1),n.intensity=6+Math.random()*8,t[r]=n,a[r]=new zr((Math.random()-.5)*10,n.range*.75,(Math.random()-.5)*10),i[r]=new zr((Math.random()-.5)*40,0,(Math.random()-.5)*40)}var l=this.scene.addChild(new Rf);l.transform.localPosition=new zr(0,9,-35),l.transform.localRotationEuler=new zr(-15,180,0),l.color.setValue(Math.random(),Math.random(),Math.random(),1),l.range=50,l.intensity=15,l.spotAngle=60}};o([pc(Laya.Camera)],xa.prototype,"camera",2),o([pc(Laya.Scene3D)],xa.prototype,"scene",2),xa=o([Bf("41CVaVFcT823sM34ncAa9Q")],xa);var Dh=class extends Laya.Script{constructor(){super(...arguments);this.forward=new zr;this.lights=[];this.offsets=[];this.moveRanges=[]}onUpdate(){for(var e=Laya.timer.currTimer*.002,t=0,a=this.lights.length;t<a;t++){var i=this.lights[t].transform,r=i.localPosition,n=this.offsets[t],l=this.moveRanges[t];r.x=n.x+Math.sin(e)*l.x,r.y=n.y+Math.sin(e)*l.y,r.z=n.z+Math.sin(e)*l.z,i.localPosition=r}}};var Xr=Laya.Vector3,dc=Laya.Quaternion,Vf=Laya.PointLight,cc=Laya.Color,{regClass:_f,property:Ch}=Laya,nt=class extends h{constructor(){super();this._temp_position=new Xr;this._temp_quaternion=new dc}onAwake(){super.base(this.camera),this.camera.transform.position=new Xr(0,.7,1.3),this.camera.transform.rotate(new Xr(-15,0,0),!0,!1),this.directionLight.active=!1,this.scene.ambientColor=new cc(.1,.1,.1);var e=this.scene.addChild(new Vf);e.color=new cc(1,.5,0,1),e.transform.position=new Xr(.4,.4,0),e.range=3;var t=["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"];Laya.loader.load(t).then(a=>{this.scene.addChild(a[0].create()),this.scene.addChild(a[1].create()),Laya.timer.frameLoop(1,this,()=>{dc.createFromYawPitchRoll(.025,0,0,this._temp_quaternion),Xr.transformQuat(e.transform.position,this._temp_quaternion,this._temp_position),e.transform.position=this._temp_position})})}};o([Ch(Laya.Camera)],nt.prototype,"camera",2),o([Ch(Laya.Scene3D)],nt.prototype,"scene",2),o([Ch(Laya.Sprite3D)],nt.prototype,"directionLight",2),nt=o([_f("CxDUqF6AR2-0rSZlnKAHRw")],nt);var Pf=Laya.MeshSprite3D,lt=Laya.Vector3,kf=Laya.PBRStandardMaterial,Ff=Laya.PrimitiveMesh,If=Laya.ShadowCascadesMode,Hf=Laya.ShadowMode,mc=Laya.Loader,{regClass:Of,property:wh}=Laya,ht=class extends h{constructor(){super();this.autoRotateSpeed=new lt(0,.05,0);this.rotation=!0}onAwake(){super.base(this.camera),this.camera.transform.position=new lt(0,1.5,2),this.camera.transform.rotate(new lt(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.85,.85,.8,1),Laya.loader.load(["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"]).then(()=>{this.onComplete()})}onComplete(){this.directionLight.transform.rotate(new lt(-Math.PI/3,0,0)),this.directionLight.getComponent(Laya.DirectionLightCom).shadowMode=Hf.SoftLow,this.directionLight.getComponent(Laya.DirectionLightCom).shadowDistance=50,this.directionLight.getComponent(Laya.DirectionLightCom).shadowCascadesMode=If.FourCascades,this.directionLight.getComponent(Laya.DirectionLightCom).shadowNormalBias=1,this.rotationScript=this.directionLight.addComponent(bh);var e=this.scene.addChild(mc.getRes("resources/res/threeDimen/staticModel/grid/plane.lh").create());e.getChildAt(0).meshRenderer.receiveShadow=!0;var t=this.scene.addChild(mc.getRes("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").create());t.transform.setWorldLossyScale(new lt(3.3,3.3,3.3)),t.getChildAt(0).getChildAt(1).skinnedMeshRenderer.castShadow=!0;var a=this.addPBRSphere(Ff.createSphere(.1),new lt(0,.2,.5),this.scene);a.meshRenderer.castShadow=!0,super.addBottomButton(["\u505C\u6B62\u65CB\u8F6C","\u5F00\u59CB\u65CB\u8F6C"],this,[this.Rotation,this.Rotation])}addPBRSphere(e,t,a){var i=new kf;i.smoothness=.2;var r=new Pf(e);r.meshRenderer.sharedMaterial=i;var n=r.transform;return n.localPosition=t,a.addChild(r),r}Rotation(){this.rotationScript.rotation?this.rotationScript.rotation=!1:this.rotationScript.rotation=!0}};o([wh(Laya.Camera)],ht.prototype,"camera",2),o([wh(Laya.Scene3D)],ht.prototype,"scene",2),o([wh(Laya.Sprite3D)],ht.prototype,"directionLight",2),ht=o([Of("wDQuKeqXSRKyoXskL_cxgQ")],ht);var bh=class extends Laya.Script3D{constructor(){super(...arguments);this.autoRotateSpeed=new lt(0,.05,0);this.rotation=!0}onUpdate(){this.rotation&&this.owner.transform.rotate(this.autoRotateSpeed,!1)}};var uc=Laya.Vector3,Nf=Laya.Color,{regClass:Uf,property:Mh}=Laya,pt=class extends h{constructor(){super();this._quaternion=new Laya.Quaternion;this._direction=new Laya.Vector3}onAwake(){super.base(this.camera),this.camera.transform.position=new uc(0,.7,1.3),this.camera.transform.rotate(new uc(-15,0,0),!0,!1),this.directionLight.active=!1,this.scene.ambientColor=new Nf(.1,.1,.1);var e=this.scene.addChild(new Laya.SpotLight);e.color=new Laya.Color(1,1,0),e.transform.position=new Laya.Vector3(0,1.2,0);var t=e.transform.worldMatrix;t.setForward(new Laya.Vector3(.15,-1,0)),e.transform.worldMatrix=t,e.range=6,e.spotAngle=32;var a=["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"];Laya.loader.load(a).then(i=>{this.scene.addChild(i[0].create()),this.scene.addChild(i[1].create()),Laya.timer.frameLoop(1,this,()=>{Laya.Quaternion.createFromYawPitchRoll(.025,0,0,this._quaternion),e.transform.worldMatrix.getForward(this._direction),Laya.Vector3.transformQuat(this._direction,this._quaternion,this._direction);var r=e.transform.worldMatrix;r.setForward(this._direction),e.transform.worldMatrix=r})})}};o([Mh(Laya.Camera)],pt.prototype,"camera",2),o([Mh(Laya.Scene3D)],pt.prototype,"scene",2),o([Mh(Laya.Sprite3D)],pt.prototype,"directionLight",2),pt=o([Uf("gZH4t71WQdG_bnJO4c2-bQ")],pt);var Th=Laya.MeshRenderer,Wf=Laya.ShadowMode,Gf=Laya.SpotLight,{regClass:zf,property:yc}=Laya,fa=class extends h{constructor(){super()}onStart(){super.base(this.camera);var e=this.scene.addChild(new Laya.SpotLight);e.color=new Laya.Color(1,1,0),e.transform.position=new Laya.Vector3(-.13,7.86,.23),e.transform.rotationEuler=new Laya.Vector3(-90,180,0),e.range=10,e.spotAngle=53,this.receaveRealShadow(this.scene)}receaveRealShadow(e){for(var t=e.numChildren,a=0;a<t;a++){var i=e.getChildAt(a);i instanceof Gf?(i.shadowMode=Wf.Hard,i.shadowDistance=3,i.shadowResolution=512,i.shadowDepthBias=1):(console.log(i.name),i.getComponent(Th)&&(i.getComponent(Th).receiveShadow=!0,i.getComponent(Th).castShadow=!0))}}};o([yc(Laya.Camera)],fa.prototype,"camera",2),o([yc(Laya.Scene3D)],fa.prototype,"scene",2),fa=o([zf("0nMCmDRkRWG2nqxvQJ4QOA")],fa);var Lc=Laya.Sprite3D,Eh=Laya.Vector3,{regClass:Xf,property:Rh}=Laya,dt=class extends h{constructor(){super();this.rotation=new Eh(0,.01,0);this.curStateIndex=0}onAwake(){super.base(this.camera),this.camera.transform.position=new Eh(0,.8,3.5),this.camera.transform.rotate(new Eh(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.sprite3D=this.scene.addChild(new Lc),this.lineSprite3D=this.scene.addChild(new Lc),Laya.loader.load("resources/gltf/morphstress/MorphStressTest.gltf",Laya.Loader.HIERARCHY).then(e=>{this.sprite3D=e.create();var t=this.sprite3D.getComponent(Laya.Animator);t.speed=0,this.scene.addChild(this.sprite3D),this.initSlider()})}initSlider(){var e=[];e.push("resources/image/hslider.png","resources/image/hslider$bar.png"),Laya.loader.load(e,Laya.Handler.create(this,this.onLoadComplete))}onLoadComplete(e=null){this.placeHSlider(),this.placeHSlider1()}placeHSlider(){var e=new Laya.HSlider,t=new Laya.Label("target 20");t.fontSize=15,t.pos(this.pageWidth-350,170),e.skin="resources/image/hslider.png",e.width=300,e.pos(this.pageWidth-350,190),e.min=0,e.max=1,e.value=.1,e.tick=.01,e.changeHandler=new Laya.Handler(this,this.onChange),this.box2D.addChild(e),this.box2D.addChild(t)}placeHSlider1(){var e=new Laya.HSlider,t=new Laya.Label("target 26");t.fontSize=15,t.pos(this.pageWidth-350,210),e.skin="resources/image/hslider.png",e.width=300,e.pos(this.pageWidth-350,230),e.min=0,e.max=1,e.value=.1,e.tick=.01,e.changeHandler=new Laya.Handler(this,this.onChange1),this.box2D.addChild(e),this.box2D.addChild(t)}onChange(e){var t=this.sprite3D.getChildAt(0),a=t.getComponent(Laya.MeshRenderer);a.setMorphChannelWeight("Key 1",e)}onChange1(e){var t=this.sprite3D.getChildAt(0),a=t.getComponent(Laya.MeshRenderer);a.setMorphChannelWeight("Key 4",e)}};o([Rh(Laya.Camera)],dt.prototype,"camera",2),o([Rh(Laya.Scene3D)],dt.prototype,"scene",2),o([Rh(Laya.Sprite3D)],dt.prototype,"directionLight",2),dt=o([Xf("OwzegTPuTFGeXxn47pusKA")],dt);var gc=Laya.Vector3,vc=Laya.PrimitiveMesh,Ks=Laya.MeshFilter,{regClass:Yf,property:Ah}=Laya,ct=class extends h{constructor(){super();this.index=0}onAwake(){super.base(this.camera),this.camera.transform.rotate(new gc(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new gc(-3.14/3,0,0)),this.sphere=this.scene.getChildByName("Sphere"),this.sphereMesh=this.sphere.getComponent(Ks).sharedMesh,super.addBottomButton(["\u5207\u6362mesh","\u5207\u6362mesh","\u5207\u6362mesh"],this,[this.setMesh,this.setMesh,this.setMesh])}setMesh(){this.index++,this.index%3===1?(this.box=vc.createBox(.5,.5,.5),this.sphere.getComponent(Ks).sharedMesh=this.box):this.index%3===2?(this.capsule=vc.createCapsule(.25,1,10,20),this.sphere.getComponent(Ks).sharedMesh=this.capsule):this.sphere.getComponent(Ks).sharedMesh=this.sphereMesh}};o([Ah(Laya.Camera)],ct.prototype,"camera",2),o([Ah(Laya.Scene3D)],ct.prototype,"scene",2),o([Ah(Laya.Sprite3D)],ct.prototype,"directionLight",2),ct=o([Yf("ep8-goODTkWEzokAASygdg")],ct);var Sc=Laya.Sprite3D,Pe=Laya.MeshSprite3D,F=Laya.Vector3,ut=Laya.PrimitiveMesh,Da=Laya.Color,Ca=Laya.PixelLineSprite3D,{regClass:Kf,property:Bh}=Laya,mt=class extends h{constructor(){super();this.curStateIndex=0}onAwake(){super.base(this.camera),this.camera.transform.position=new F(0,.8,1.5),this.camera.transform.rotate(new F(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.sprite3D=this.scene.addChild(new Sc),this.lineSprite3D=this.scene.addChild(new Sc);var e=this.sprite3D.addChild(new Pe(ut.createBox(.5,.5,.5)));e.transform.position=new F(2,.25,0),e.transform.rotate(new F(0,45,0),!1,!1);var t=this.lineSprite3D.addChild(new Ca(100));ke.linearModel(e,t,Da.GREEN);var a=this.sprite3D.addChild(new Pe(ut.createSphere(.25,20,20)));a.transform.position=new F(1,.25,0);var i=this.lineSprite3D.addChild(new Ca(3500));ke.linearModel(a,i,Da.GREEN);var r=this.sprite3D.addChild(new Pe(ut.createCylinder(.25,1,20)));r.transform.position=new F(0,.5,0);var n=this.lineSprite3D.addChild(new Ca(1e3));ke.linearModel(r,n,Da.GREEN);var l=this.sprite3D.addChild(new Pe(ut.createCapsule(.25,1,10,20)));l.transform.position=new F(-1,.5,0);var d=this.lineSprite3D.addChild(new Ca(3e3));ke.linearModel(l,d,Da.GREEN);var c=this.sprite3D.addChild(new Pe(ut.createCone(.25,.75)));c.transform.position=new F(-2,.375,0);var u=this.lineSprite3D.addChild(new Ca(500));ke.linearModel(c,u,Da.GREEN);var m=this.sprite3D.addChild(new Pe(ut.createPlane(6,6,10,10))),L=this.lineSprite3D.addChild(new Ca(1e3));ke.linearModel(m,L,Da.GRAY),this.lineSprite3D.active=!1,super.addBottomButton(["\u7F51\u683C\u6A21\u5F0F","\u6B63\u5E38\u6A21\u5F0F"],this,[this.setMesh,this.setMesh])}setMesh(){++this.curStateIndex%2==1?(this.sprite3D.active=!1,this.lineSprite3D.active=!0):(this.sprite3D.active=!0,this.lineSprite3D.active=!1)}};o([Bh(Laya.Camera)],mt.prototype,"camera",2),o([Bh(Laya.Scene3D)],mt.prototype,"scene",2),o([Bh(Laya.Sprite3D)],mt.prototype,"directionLight",2),mt=o([Kf("TJ3FPg5bQ--LAUMACNoRng")],mt);var D=class D{static linearModel(s,e,t){if(s instanceof Pe){var a=s,i=a.meshFilter.sharedMesh,r=[];i.getPositions(r);for(var n=i.getSubMesh(0).getIndices(),l=0;l<n.length;l+=3){var d=r[n[l]],c=r[n[l+1]],u=r[n[l+2]];F.transformCoordinate(d,a.transform.worldMatrix,this.transVertex0),F.transformCoordinate(c,a.transform.worldMatrix,this.transVertex1),F.transformCoordinate(u,a.transform.worldMatrix,this.transVertex2),e.addLine(this.transVertex0,this.transVertex1,t,t),e.addLine(this.transVertex1,this.transVertex2,t,t),e.addLine(this.transVertex2,this.transVertex0,t,t)}}for(var l=0,m=s.numChildren;l<m;l++)D.linearModel(s.getChildAt(l),e,t)}static DrawBoundingBox(s,e,t){s.meshRenderer.bounds.getCorners(D.corners);var a=new F(0,0,90);D.DrawTwelveLines(D.corners[0],D.corners[1],a,e),a.setValue(0,0,0),D.DrawTwelveLines(D.corners[1],D.corners[2],a,e),a.setValue(0,0,90),D.DrawTwelveLines(D.corners[2],D.corners[3],a,e),a.setValue(0,0,0),D.DrawTwelveLines(D.corners[3],D.corners[0],a,e),a.setValue(0,0,90),D.DrawTwelveLines(D.corners[4],D.corners[5],a,e),a.setValue(0,0,0),D.DrawTwelveLines(D.corners[5],D.corners[6],a,e),a.setValue(0,0,90),D.DrawTwelveLines(D.corners[6],D.corners[7],a,e),a.setValue(0,0,0),D.DrawTwelveLines(D.corners[7],D.corners[4],a,e),a.setValue(90,0,0),D.DrawTwelveLines(D.corners[0],D.corners[4],a,e),a.setValue(90,0,0),D.DrawTwelveLines(D.corners[1],D.corners[5],a,e),a.setValue(90,0,0),D.DrawTwelveLines(D.corners[2],D.corners[6],a,e),a.setValue(90,0,0),D.DrawTwelveLines(D.corners[3],D.corners[7],a,e)}static DrawTwelveLines(s,e,t,a){var i=F.distance(s,e),r=a.addChild(new Pe(ut.createCylinder(.004,i,3)));r.transform.rotate(t,!0,!1);var n=r.transform.position,l=s.x+e.x,d=s.y+e.y,c=s.z+e.z;n.setValue(l/2,d/2,c/2),r.transform.position=n}constructor(){}};D.transVertex0=new F,D.transVertex1=new F,D.transVertex2=new F,D.corners=[];var ke=D;var xc=Laya.Sprite3D,Qs=Laya.MeshSprite3D,z=Laya.Vector3,Qf=Laya.Quaternion,Cc=Laya.PrimitiveMesh,fc=Laya.Color,Dc=Laya.PixelLineSprite3D,{regClass:Jf,property:Vh}=Laya,yt=class extends h{constructor(){super();this.rotation=new z(0,.01,0);this.curStateIndex=0}onAwake(){super.base(this.camera),this.camera.transform.position=new z(0,.8,1.5),this.camera.transform.rotate(new z(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.sprite3D=this.scene.addChild(new xc),this.lineSprite3D=this.scene.addChild(new xc),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm").then(e=>{var t=this.sprite3D.addChild(new Qs(e));t.transform.localScale=new z(.3,.3,.3),t.transform.rotation=new Qf(.7071068,0,0,-.7071067);var a=this.lineSprite3D.addChild(new Dc(5e3));Js.linearModel(t,a,fc.GREEN);var i=this.sprite3D.addChild(new Qs(Cc.createPlane(6,6,10,10)));i.transform.position=new z(0,0,-1);var r=this.lineSprite3D.addChild(new Dc(1e3));Js.linearModel(i,r,fc.GRAY),Laya.timer.frameLoop(1,this,()=>{a.transform.rotate(this.rotation,!1),t.transform.rotate(this.rotation,!1)}),this.lineSprite3D.active=!1,super.addBottomButton(["\u7F51\u683C\u6A21\u5F0F","\u6B63\u5E38\u6A21\u5F0F"],this,[this.setMesh,this.setMesh])})}setMesh(){++this.curStateIndex%2==1?(this.sprite3D.active=!1,this.lineSprite3D.active=!0):(this.sprite3D.active=!0,this.lineSprite3D.active=!1)}};o([Vh(Laya.Camera)],yt.prototype,"camera",2),o([Vh(Laya.Scene3D)],yt.prototype,"scene",2),o([Vh(Laya.Sprite3D)],yt.prototype,"directionLight",2),yt=o([Jf("JMpXAtoKTQu7RI4b2TnJQA")],yt);var C=class C{static linearModel(s,e,t){if(s instanceof Qs){var a=s,i=a.meshFilter.sharedMesh,r=[];i.getPositions(r);for(var n=i.getSubMesh(0).getIndices(),l=0;l<n.length;l+=3){var d=r[n[l]],c=r[n[l+1]],u=r[n[l+2]];z.transformCoordinate(d,a.transform.worldMatrix,this.transVertex0),z.transformCoordinate(c,a.transform.worldMatrix,this.transVertex1),z.transformCoordinate(u,a.transform.worldMatrix,this.transVertex2),e.addLine(this.transVertex0,this.transVertex1,t,t),e.addLine(this.transVertex1,this.transVertex2,t,t),e.addLine(this.transVertex2,this.transVertex0,t,t)}}for(var l=0,m=s.numChildren;l<m;l++)C.linearModel(s.getChildAt(l),e,t)}static DrawBoundingBox(s,e,t){s.meshRenderer.bounds.getCorners(C.corners);var a=new z(0,0,90);C.DrawTwelveLines(C.corners[0],C.corners[1],a,e),a.setValue(0,0,0),C.DrawTwelveLines(C.corners[1],C.corners[2],a,e),a.setValue(0,0,90),C.DrawTwelveLines(C.corners[2],C.corners[3],a,e),a.setValue(0,0,0),C.DrawTwelveLines(C.corners[3],C.corners[0],a,e),a.setValue(0,0,90),C.DrawTwelveLines(C.corners[4],C.corners[5],a,e),a.setValue(0,0,0),C.DrawTwelveLines(C.corners[5],C.corners[6],a,e),a.setValue(0,0,90),C.DrawTwelveLines(C.corners[6],C.corners[7],a,e),a.setValue(0,0,0),C.DrawTwelveLines(C.corners[7],C.corners[4],a,e),a.setValue(90,0,0),C.DrawTwelveLines(C.corners[0],C.corners[4],a,e),a.setValue(90,0,0),C.DrawTwelveLines(C.corners[1],C.corners[5],a,e),a.setValue(90,0,0),C.DrawTwelveLines(C.corners[2],C.corners[6],a,e),a.setValue(90,0,0),C.DrawTwelveLines(C.corners[3],C.corners[7],a,e)}static DrawTwelveLines(s,e,t,a){var i=z.distance(s,e),r=a.addChild(new Qs(Cc.createCylinder(.004,i,3)));r.transform.rotate(t,!0,!1);var n=r.transform.position,l=s.x+e.x,d=s.y+e.y,c=s.z+e.z;n.setValue(l/2,d/2,c/2),r.transform.position=n}constructor(){}};C.transVertex0=new z,C.transVertex1=new z,C.transVertex2=new z,C.corners=[];var Js=C;var jf=Laya.CameraClearFlags,qf=Laya.Color,wc=Laya.ShurikenParticleRenderer,{regClass:Zf,property:bc}=Laya,wa=class extends h{constructor(){super();this.particleSystem=[];this.index=0}onAwake(){super.base(this.camera),this.camera.clearFlag=jf.SolidColor,this.camera.clearColor=new qf(0,0,0,1),Laya.loader.load("resources/res/threeDimen/particle/ETF_Burning_Ground.lh").then(e=>{this.particle=this.scene.addChild(e.create()),this.particle=this.particle.getChildAt(0);let t=this.particle.getComponent(wc);var a=t.sharedMaterial;console.log(t),this.particleSystem.push(t.particleSystem);for(let i=0;i<this.particle.numChildren;i++){let r=this.particle.getChildAt(i).getComponent(wc);this.particleSystem.push(r.particleSystem)}}),super.addBottomButton(["\u53BB\u6389\u5FAA\u73AF\u64AD\u653E","\u6062\u590D\u5FAA\u73AF\u64AD\u653E","\u52A0\u901F\u64AD\u653E"],this,[this.change,this.change,this.change])}change(){if(this.index++,this.index%3===1)for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].looping=!1,this.particleSystem[e].simulationSpeed=1;else if(this.index%3===2)for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].looping=!0,this.particleSystem[e].play();else for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].simulationSpeed=10}};o([bc(Laya.Camera)],wa.prototype,"camera",2),o([bc(Laya.Scene3D)],wa.prototype,"scene",2),wa=o([Zf("XuqDU-nLSxm1ApR243yVOQ")],wa);var $f=Laya.CameraClearFlags,eD=Laya.Color,Mc=Laya.ShurikenParticleRenderer,{regClass:tD,property:Tc}=Laya,ba=class extends h{constructor(){super();this.particleSystem=[];this.index=0}onAwake(){super.base(this.camera),this.camera.clearFlag=$f.SolidColor,this.camera.clearColor=new eD(0,0,0,1),Laya.loader.load("resources/res/threeDimen/particle/ETF_Eternal_Light.lh").then(e=>{this.particle=this.scene.addChild(e.create()),this.particle=this.particle.getChildAt(0);let t=this.particle.getComponent(Mc);this.particleSystem.push(t.particleSystem);for(let a=0;a<this.particle.numChildren;a++){let i=this.particle.getChildAt(a).getComponent(Mc);this.particleSystem.push(i.particleSystem)}}),super.addBottomButton(["\u53BB\u6389\u5FAA\u73AF\u64AD\u653E","\u6062\u590D\u5FAA\u73AF\u64AD\u653E","\u52A0\u901F\u64AD\u653E"],this,[this.change,this.change,this.change])}change(){if(this.index++,this.index%3===1)for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].looping=!1,this.particleSystem[e].simulationSpeed=1;else if(this.index%3===2)for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].looping=!0,this.particleSystem[e].play();else for(let e=0;e<this.particleSystem.length;e++)this.particleSystem[e].simulationSpeed=10}};o([Tc(Laya.Camera)],ba.prototype,"camera",2),o([Tc(Laya.Scene3D)],ba.prototype,"scene",2),ba=o([tD("1UH-DorTT-WtgojJVFTZtw")],ba);var{regClass:aD,property:Ec}=Laya,Ma=class extends h{constructor(){super();this.postProcess=null}onAwake(){super.base(this.camera);let e=new Laya.PostProcess;e=this.camera.postProcess,this.postProcess=e,super.addBottomButton(["\u5173\u95EDAO","\u5F00\u542FAO"],this,[this.setPostProcess,this.setPostProcess])}setPostProcess(){var e=!!this.camera.postProcess;e?this.camera.postProcess=null:this.camera.postProcess=this.postProcess}};o([Ec(Laya.Camera)],Ma.prototype,"camera",2),o([Ec(Laya.Scene3D)],Ma.prototype,"scene",2),Ma=o([aD("LPbNgvuaRTOcq09WVTZE1Q")],Ma);var{regClass:rD,property:Rc}=Laya,Ta=class extends h{constructor(){super()}onAwake(){super.base(this.camera)}};o([Rc(Laya.Camera)],Ta.prototype,"camera",2),o([Rc(Laya.Scene3D)],Ta.prototype,"scene",2),Ta=o([rD("QilciEhpSaaAzkTE6AzkUQ")],Ta);var{regClass:iD,property:Ac}=Laya,Ea=class extends h{constructor(){super()}onAwake(){super.base(this.camera)}};o([Ac(Laya.Camera)],Ea.prototype,"camera",2),o([Ac(Laya.Scene3D)],Ea.prototype,"scene",2),Ea=o([iD("6tWmalhjRXa18CoBDdVr-g")],Ea);var Yr=`#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}`;var Bc=`#define SHADER_NAME BlurHorizontal\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    vec2 uv = v_Texcoord0;\r
    vec2 uvOffset = vec2(1.0,0.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\r
    uv = uv - uvOffset*3.0;\r
    //\u9AD8\u65AF\u53C2\u6570\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.324*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
\r
    gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
    \r
\r
    \r
}`;var Vc=`#define SHADER_NAME BlurVertical\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    vec2 uv = v_Texcoord0;\r
    vec2 uvOffset = vec2(0.0,1.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\r
    uv = uv - uvOffset*3.0;\r
    //\u9AD8\u65AF\u53C2\u6570\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.324*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.232*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0855*sampleMainTex(u_MainTex,uv);\r
    uv+=uvOffset;\r
    color+=0.0205*sampleMainTex(u_MainTex,uv);\r
\r
    gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
    \r
\r
    \r
}`;var _c=`#define SHADER_NAME BlurDownSample\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 color = vec4(0.0,0.0,0.0,0.0);\r
    color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(1.0,0.0));\r
	color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(-1.0,0.0));\r
	color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,-1.0));\r
    color += sampleMainTex(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,1.0));\r
    gl_FragColor = color/4.0;\r
   	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Pc=`#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}`;var kc=`#define SHADER_NAME EdgeAdd\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
\r
#ifdef Gamma_u_sourceTexture0\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
void main()\r
{\r
    vec2 uv = v_Texcoord0;\r
    vec4 mainColor = sampleMainTex(u_MainTex,uv);\r
    vec4 sourceColor = sampleMainTex(u_sourceTexture0,uv);\r
    float factor = step(sourceColor.x+sourceColor.y+sourceColor.z,0.001);\r
    vec4 color = mix(sourceColor,mainColor,factor);\r
    gl_FragColor =color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Fc=`#define SHADER_NAME EdgeSub\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_sourceTexture0\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
\r
#ifdef Gamma_u_sourceTexture1\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
void main()\r
{\r
    vec2 uv = v_Texcoord0;\r
    vec4 blurColor = sampleMainTex(u_sourceTexture0,uv);\r
    vec4 clearColor = sampleMainTex(u_sourceTexture1,uv);\r
    float factor = step(clearColor.x+clearColor.y+clearColor.z,0.001);\r
    vec4 color = blurColor*factor;\r
    color = (1.0-step(color.x+color.y+color.z,0.15))*vec4(1.0,0.0,0.0,1.0);\r
    gl_FragColor = color;\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Ic=Laya.CameraClearFlags,cD=Laya.PostProcessEffect,mD=Laya.Material,_h=Laya.FilterMode,Ra=Laya.RenderTargetFormat,ae=Laya.Shader3D,Aa=Laya.ShaderDataType,uD=Laya.LayaGL,yD=Laya.Vector4,js=Laya.RenderTexture,H=Laya.RenderState,Kr=Laya.SubShader,LD=Laya.VertexMesh,{regClass:gD,property:Hc}=Laya,Ba=class extends h{constructor(){super();this.postProcess=null}onAwake(){super.base(this.camera),this.camera.clearFlag=Ic.Sky,this.camera.cullingMask^=2,this.camera.enableHDR=!1;var e=this.scene.getChildByName("BlurCamera");e.clearFlag=Ic.DepthOnly,e.cullingMask=2,e.renderingOrder=1,e.enableHDR=!1,this.camera.addChild(e),e.transform.localMatrix=new Laya.Matrix4x4,this.postProcess=new Laya.PostProcess;var t=new Ph;this.postProcess.addEffect(t),this.camera.postProcess=this.postProcess,t.downSampleNum=6,t.blurSpreadSize=1,t.blurIterations=1,super.addBottomButton(["\u5173\u95ED\u9AD8\u65AF\u6A21\u7CCA","\u5F00\u542F\u9AD8\u65AF\u6A21\u7CCA"],this,[this.setPostProcess,this.setPostProcess]);var a=this.camera.renderTarget;e.renderTarget=a}setPostProcess(){var e=!!this.camera.postProcess;e?this.camera.postProcess=null:this.camera.postProcess=this.postProcess}};o([Hc(Laya.Camera)],Ba.prototype,"camera",2),o([Hc(Laya.Scene3D)],Ba.prototype,"scene",2),Ba=o([gD("nrITl1efR5mxBLU56Zcdhg")],Ba);var te=class te extends cD{constructor(){super();this._shader=null;this._shaderData=uD.renderOBJCreate.createShaderData(null);this._downSampleNum=1;this._blurSpreadSize=1;this._blurIterations=2;this._texSize=new yD(1,1,1,1);te.init(),this._shader=ae.find("blurEffect"),this._tempRenderTexture=new Array(13)}static init(){te.SHADERVALUE_MAINTEX=ae.propertyNameToID("u_MainTex"),te.SHADERVALUE_TEXELSIZE=ae.propertyNameToID("u_MainTex_TexelSize"),te.SHADERVALUE_DOWNSAMPLEVALUE=ae.propertyNameToID("u_DownSampleValue");let e={a_PositionTexcoord:[LD.MESH_POSITION0,Aa.Vector4]},t={u_MainTex:Aa.Texture2D,u_sourceTexture0:Aa.Texture2D,u_sourceTexture1:Aa.Texture2D,u_MainTex_TexelSize:Aa.Vector4,u_DownSampleValue:Aa.Float};var a=ae.add("blurEffect"),i=new Kr(e,t);a.addSubShader(i);var r=i.addShaderPass(Pc,_c),n=r.renderState;n.depthTest=H.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=H.CULL_NONE,n.blend=H.BLEND_DISABLE,i=new Kr(e,t),a.addSubShader(i),r=i.addShaderPass(Yr,Vc),n=r.renderState,n.depthTest=H.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=H.CULL_NONE,n.blend=H.BLEND_DISABLE,i=new Kr(e,t),a.addSubShader(i),r=i.addShaderPass(Yr,Bc),n=r.renderState,n.depthTest=H.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=H.CULL_NONE,n.blend=H.BLEND_DISABLE,i=new Kr(e,t),a.addSubShader(i),r=i.addShaderPass(Yr,Fc),n=r.renderState,n.depthTest=H.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=H.CULL_NONE,n.blend=H.BLEND_DISABLE,i=new Kr(e,t),a.addSubShader(i),r=i.addShaderPass(Yr,kc),n=r.renderState,n.depthTest=H.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=H.CULL_NONE,n.blend=H.BLEND_DISABLE}get downSampleNum(){return this._downSampleNum}set downSampleNum(e){this._downSampleNum=Math.min(6,Math.max(e,0))}get blurSpreadSize(){return this._blurSpreadSize}set blurSpreadSize(e){this._blurSpreadSize=Math.min(10,Math.max(e,1))}get blurIterations(){return this._blurIterations}set blurIterations(e){this._blurIterations=Math.min(Math.max(e,0),6)}render(e){var t=e.command,a=e.camera.viewport,i=1/(1<<Math.floor(this._downSampleNum)),r=Math.floor(a.width*i),n=Math.floor(a.height*i);this._texSize.setValue(1/r,1/n,r,n),this._shaderData.setNumber(te.SHADERVALUE_DOWNSAMPLEVALUE,this.blurSpreadSize),this._shaderData.setVector(te.SHADERVALUE_TEXELSIZE,this._texSize);var l=js.createFromPool(r,n,Ra.R8G8B8,Ra.None,!1,1);l.filterMode=_h.Bilinear,this._tempRenderTexture[0]=l;var d=e.source;t.blitScreenTriangle(d,l,null,this._shader,this._shaderData,0),d=l;for(var c=0;c<this._blurIterations;c++){var u=js.createFromPool(r,n,Ra.R8G8B8,Ra.None,!1,1);u.filterMode=_h.Bilinear,t.blitScreenTriangle(d,u,null,this._shader,this._shaderData,1),d=u,this._tempRenderTexture[c*2+1]=u,u=js.createFromPool(r,n,Ra.R8G8B8,Ra.None,!1,1),u.filterMode=_h.Bilinear,t.blitScreenTriangle(d,u,null,this._shader,this._shaderData,2),d=u,this._tempRenderTexture[c*2+2]=u}e.source=d,t.blitScreenTriangle(e.source,e.destination);var m=this._blurIterations*2+1;for(c=0;c<m;c++)js.recoverToPool(this._tempRenderTexture[c]);e.deferredReleaseTextures.push(d)}};te.BLUR_TYPE_GaussianBlur=0,te.BLUR_TYPE_Simple=1;var Ph=te,Oc=class p extends mD{static __init__(){p.SHADERVALUE_MAINTEX=ae.propertyNameToID("u_MainTex"),p.SHADERVALUE_TEXELSIZE=ae.propertyNameToID("u_MainTex_TexelSize"),p.SHADERVALUE_DOWNSAMPLEVALUE=ae.propertyNameToID("u_DownSampleValue"),p.SHADERVALUE_SOURCETEXTURE0=ae.propertyNameToID("u_sourceTexture0"),p.ShADERVALUE_SOURCETEXTURE1=ae.propertyNameToID("u_sourceTexture1")}constructor(s,e){super(),p.__init__(),this.setShaderName("blurEffect"),this.setIntByIndex(p.SHADERVALUE_DOWNSAMPLEVALUE,e),this.setVector4ByIndex(p.SHADERVALUE_TEXELSIZE,s)}sourceTexture(s,e){this.setTextureByIndex(p.SHADERVALUE_SOURCETEXTURE0,s),this.setTextureByIndex(p.ShADERVALUE_SOURCETEXTURE1,e)}};var Nc=`#define SHADER_NAME EdgeEffectVS\r
\r
#include "Camera.glsl";\r
varying vec2 v_Texcoord0;\r
\r
void main() {\r
	gl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\r
	v_Texcoord0 = a_PositionTexcoord.zw;\r
	gl_Position = remapPositionZ(gl_Position);\r
}\r
`;var Uc=`#define SHADER_NAME EdgeEffectFS\r
#include "Color.glsl";\r
#include "DepthNormalUtil.glsl";\r
\r
varying vec2 v_Texcoord0;\r
\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_MainTex\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
#ifdef DEPTHNORMAL\r
    void getDepthNormal(out float depth, out vec3 normal){\r
        vec4 col = texture2D(u_DepthNormalTex, v_Texcoord0);\r
        DecodeDepthNormal(col, depth, normal);\r
    }\r
\r
    float getDepth(vec2 uv) {\r
        float depth;\r
        vec3 normal;\r
        vec4 col = texture2D(u_DepthNormalTex, uv);\r
        DecodeDepthNormal(col, depth, normal);\r
        return depth;\r
    }\r
\r
    vec3 getNormal(vec2 uv) {\r
        float depth;\r
        vec3 normal;\r
        vec4 col = texture2D(u_DepthNormalTex, uv);\r
        DecodeDepthNormal(col, depth, normal);\r
        return normal;\r
    }\r
\r
#endif \r
\r
#ifdef DEPTH\r
    float getDepth(vec2 uv) {\r
        float depth = texture2D(u_DepthTex, uv).r;\r
        depth = Linear01Depth(depth, u_DepthBufferParams);\r
        return depth;\r
    }\r
#endif \r
\r
void SobelSample(in vec2 uv,out vec3 colorG, out vec3 normalG, out vec3 depthG) {\r
\r
    float offsetx = u_MainTex_TexelSize.x;\r
    float offsety = u_MainTex_TexelSize.y; \r
    vec2 offsets[9];\r
    offsets[0] = vec2(-offsetx,  offsety); // \u5DE6\u4E0A\r
    offsets[1] = vec2( 0.0,    offsety); // \u6B63\u4E0A\r
    offsets[2] = vec2( offsetx,  offsety); // \u53F3\u4E0A\r
    offsets[3] = vec2(-offsetx,  0.0);   // \u5DE6\r
    offsets[4] = vec2( 0.0,    0.0);   // \u4E2D\r
    offsets[5] = vec2( offsetx,  0.0);   // \u53F3\r
    offsets[6] = vec2(-offsetx, -offsety); // \u5DE6\u4E0B\r
    offsets[7] = vec2( 0.0,   -offsety); // \u6B63\u4E0B\r
    offsets[8] = vec2( offsetx, -offsety); // \u53F3\u4E0B\r
\r
    float Gx[9];\r
    Gx[0] = -1.0; Gx[1] = 0.0; Gx[2] = 1.0; \r
    Gx[3] = -2.0; Gx[4] = 0.0; Gx[5] = 2.0; \r
    Gx[6] = -1.0; Gx[7] = 0.0; Gx[8] = 1.0; \r
\r
    float Gy[9];\r
    Gy[0] = 1.0; Gy[1] = 2.0; Gy[2] = 1.0; \r
    Gy[3] = 0.0; Gy[4] = 0.0; Gy[5] = 0.0; \r
    Gy[6] = -1.0; Gy[7] = -2.0;Gy[8] = -1.0; \r
\r
    vec3 sampleTex[9];\r
    float sampleDepth[9];\r
    vec3 sampleNormal[9];\r
    for (int i = 0; i < 9; i++)\r
    {\r
        vec2 uvOffset = uv + offsets[i];\r
        sampleTex[i] = sampleMainTex(u_MainTex, uvOffset).rgb;\r
        sampleDepth[i] = getDepth(uvOffset);\r
        sampleNormal[i] = (getNormal(uvOffset) + 1.0) / 2.0;\r
    }\r
\r
    vec3 colorGx = vec3(0.0);\r
    vec3 colorGy = vec3(0.0);\r
    float depthGx = 0.0;\r
    float depthGy = 0.0;\r
    vec3 normalGx = vec3(0.0);\r
    vec3 normalGy = vec3(0.0);\r
\r
    for (int i = 0; i < 9; i++) {\r
        colorGx += sampleTex[i] * Gx[i];\r
        colorGy += sampleTex[i] * Gy[i];\r
        depthGx += sampleDepth[i] * Gx[i];\r
        depthGy += sampleDepth[i] * Gy[i];\r
        normalGx += sampleNormal[i] * Gx[i];\r
        normalGy += sampleNormal[i] * Gy[i];\r
    }\r
\r
    float colDepthG = abs(depthGx) + abs(depthGy);\r
    depthG = vec3(colDepthG);\r
\r
    colorG = abs(colorGx) + abs(colorGy);\r
\r
    normalG = abs(normalGx) + abs(normalGy);\r
\r
}\r
\r
float ColorGray(vec3 color) {\r
    return (color.r + color.g + color.b) / 3.0;\r
}\r
\r
vec3 getEdgeValue(float hold, vec3 valueG) {\r
    return vec3(step(hold, ColorGray(valueG)));\r
}\r
\r
void main() {\r
    \r
    vec2 uv = v_Texcoord0;\r
\r
    vec3 colorG, normalG, depthG;\r
    SobelSample(uv, colorG, normalG, depthG);\r
    vec3 edgeColor = vec3(0.2);\r
\r
    #if defined(DEPTHEDGE)\r
        vec3 edgeValue = getEdgeValue(u_Depthhold, depthG);\r
    #endif\r
\r
    #if defined(NORMALEDGE)\r
        vec3 edgeValue = getEdgeValue(u_NormalHold, normalG);\r
    #endif\r
\r
    #if defined(COLOREDGE)\r
        vec3 edgeValue = getEdgeValue(u_ColorHold, colorG);\r
    #endif\r
\r
    vec3 fillColor = u_EdgeColor.xyz;\r
\r
    #ifdef SOURCE\r
        fillColor = sampleMainTex(u_MainTex, uv).rgb;\r
    #endif\r
\r
    vec3 finalColor = mix(fillColor, edgeColor, edgeValue);\r
    gl_FragColor = vec4(finalColor, 1.0);\r
	gl_FragColor = outputTransform(gl_FragColor);\r
\r
}`;var xD=Laya.PostProcessEffect,Ih=Laya.DepthTextureMode,fD=Laya.FilterMode,Wc=Laya.RenderTargetFormat,O=Laya.Shader3D,re=Laya.ShaderDataType,DD=Laya.LayaGL,CD=Laya.Vector4,wD=Laya.RenderTexture,bD=Laya.SubShader,MD=Laya.VertexMesh,TD=Laya.DirectionLight,kh=Laya.MeshSprite3D,ie=Laya.Vector3,ED=Laya.Color,RD=Laya.Quaternion,AD=Laya.Event,BD=Laya.HSlider,Fh=Laya.PrimitiveMesh,VD=Laya.Button,_D=Laya.PostProcess,PD=Laya.Handler,{regClass:kD,property:Gc}=Laya,Va=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new ie(0,4,10),this.camera.transform.rotation=new RD(-.2,0,0,.97),this.addLight(),Laya.loader.load("resources/res/threeDimen/skinModel/dude/dude.lh").then(e=>{let t=new kh(Fh.createSphere(1),"Sphere");this.scene.addChild(t),t.transform.position=new ie(0,1,0);let a=new kh(Fh.createPlane(),"Plane");this.scene.addChild(a),a.transform.position=new ie(0,-.5,0);let i=new kh(Fh.createBox(1,1,1),"Cube");this.scene.addChild(i),i.transform.position=new ie(0,3,0),this.camera.depthTextureMode|=Ih.DepthNormals;let r=e.create();this.scene.addChild(r),r.transform.position=new ie(1.5,0,0),r.transform.rotationEuler=new ie(0,180,0);let n=new _D;this.camera.postProcess=n;let l=new Hh;n.addEffect(l),this.addUI(l)})}addLight(){let e=[new ie(-1,-1,-1),new ie(1,-1,-1)],t=new ED(.6,.6,.6);for(let a=0;a<e.length;a++){let i=e[a];ie.normalize(i,e[a]);let r=new TD;this.scene.addChild(r),r.transform.worldMatrix.setForward(e[a]),r.color=t}}addUI(e){Laya.loader.load(["resources/res/ui/hslider.png","resources/image/img_btn_bg.png","resources/res/ui/hslider$bar.png","resources/res/ui/colorPicker.png"]).then(()=>{let t=function(){e.edgeMode=0,i.visible=!0,l.visible=!1,c.visible=!1},a=this.addButton(60,150,160,30,"color edge",20,t),i=this.addSlider(60,190,300,.01,1,.7,.01,function(m){e.colorHold=m}),r=function(){e.edgeMode=1,i.visible=!1,l.visible=!0,c.visible=!1},n=this.addButton(60,230,160,30,"normal edge",20,r),l=this.addSlider(60,270,300,.01,1,.7,.01,function(m){e.normalHold=m}),d=this.addButton(60,310,160,30,"depth edge",20,function(){e.edgeMode=2,i.visible=!1,l.visible=!1,c.visible=!0}),c=this.addSlider(60,350,300,.01,1,.7,.01,function(m){e.depthHold=m}),u=this.addButton(60,390,160,30,"show source",20,function(){e.showSource=!e.showSource});t()})}addButton(e,t,a,i,r,n,l){let d=this.owner.addChild(new VD("resources/image/img_btn_bg.png",r));return d.size(a,i),d.size(150,40),d.labelSize=16,d.sizeGrid="21,83,22,76",d.stateNum=n,d.stateNum=1,d.labelColors="#ffffff",d.pos(e,t),d.on(AD.CLICK,this,l),d}addSlider(e,t,a,i,r,n,l,d){let c=this.owner.addChild(new BD("resources/res/ui/hslider.png"));return c.width=a,c.pos(e,t),c.min=i,c.max=r,c.value=n,c.tick=l,c.changeHandler=PD.create(this,d,[],!1),c.visible=!1,c}};o([Gc(Laya.Camera)],Va.prototype,"camera",2),o([Gc(Laya.Scene3D)],Va.prototype,"scene",2),Va=o([kD("9hC_-O-LQLe_XVQZw2pFyw")],Va);var FD=(t=>(t[t.ColorEdge=0]="ColorEdge",t[t.NormalEdge=1]="NormalEdge",t[t.DepthEdge=2]="DepthEdge",t))(FD||{}),f=class f extends xD{constructor(){super();this._shader=null;this._shaderData=DD.renderOBJCreate.createShaderData(null);this._depthBufferparam=new CD;this._edgeMode=1;f._isShaderInit||(f._isShaderInit=!0,f.EdgeEffectShaderInit()),this._shader=O.find("PostProcessEdge"),this.edgeColor=new ie(0,0,0),this.colorHold=.7,this.normalHold=.7,this.depthHold=.7,this.edgeMode=2,this.showSource=!0}static __init__(){f.DEPTHTEXTURE=O.propertyNameToID("u_DepthTex"),f.DEPTHNORMALTEXTURE=O.propertyNameToID("u_DepthNormalTex"),f.DEPTHBUFFERPARAMS=O.propertyNameToID("u_DepthBufferParams"),f.EDGECOLOR=O.propertyNameToID("u_EdgeColor"),f.COLORHOLD=O.propertyNameToID("u_ColorHold"),f.DEPTHHOLD=O.propertyNameToID("u_Depthhold"),f.NORMALHOLD=O.propertyNameToID("u_NormalHold")}static EdgeEffectShaderInit(){f.__init__(),f.SHADERDEFINE_DEPTH=O.getDefineByName("DEPTH"),f.SHADERDEFINE_DEPTHNORMAL=O.getDefineByName("DEPTHNORMAL"),f.SHADERDEFINE_DEPTHEDGE=O.getDefineByName("DEPTHEDGE"),f.SHADERDEFINE_NORMALEDGE=O.getDefineByName("NORMALEDGE"),f.SHADERDEFINE_COLOREDGE=O.getDefineByName("COLOREDGE"),f.SHADERDEFINE_SOURCE=O.getDefineByName("SOURCE");let e={a_PositionTexcoord:[MD.MESH_POSITION0,re.Vector4]},t={u_MainTex:re.Texture2D,u_MainTex_TexelSize:re.Vector4,u_DepthTex:re.Texture2D,u_DepthNormalTex:re.Texture2D,u_DepthBufferParams:re.Vector4,u_EdgeColor:re.Color,u_ColorHold:re.Float,u_Depthhold:re.Float,u_NormalHold:re.Float},a=O.add("PostProcessEdge"),i=new bD(e,t);a.addSubShader(i);let r=i.addShaderPass(Nc,Uc);r.renderState.depthWrite=!1}get edgeColor(){return this._shaderData.getVector3(f.EDGECOLOR)}set edgeColor(e){this._shaderData.setVector3(f.EDGECOLOR,e)}get colorHold(){return this._shaderData.getNumber(f.COLORHOLD)}set colorHold(e){this._shaderData.setNumber(f.COLORHOLD,e)}get depthHold(){return this._shaderData.getNumber(f.DEPTHHOLD)}set depthHold(e){this._shaderData.setNumber(f.DEPTHHOLD,e)}get normalHold(){return this._shaderData.getNumber(f.NORMALHOLD)}set normalHold(e){this._shaderData.setNumber(f.NORMALHOLD,e)}get edgeMode(){return this._edgeMode}get showSource(){return this._shaderData.hasDefine(f.SHADERDEFINE_SOURCE)}set showSource(e){e?this._shaderData.addDefine(f.SHADERDEFINE_SOURCE):this._shaderData.removeDefine(f.SHADERDEFINE_SOURCE)}set edgeMode(e){switch(this._edgeMode=e,e){case 0:this._shaderData.addDefine(f.SHADERDEFINE_COLOREDGE),this._shaderData.removeDefine(f.SHADERDEFINE_DEPTHEDGE),this._shaderData.removeDefine(f.SHADERDEFINE_NORMALEDGE);break;case 1:this._shaderData.addDefine(f.SHADERDEFINE_NORMALEDGE),this._shaderData.removeDefine(f.SHADERDEFINE_DEPTHEDGE),this._shaderData.removeDefine(f.SHADERDEFINE_COLOREDGE);break;case 2:this._shaderData.addDefine(f.SHADERDEFINE_DEPTHEDGE),this._shaderData.removeDefine(f.SHADERDEFINE_COLOREDGE),this._shaderData.removeDefine(f.SHADERDEFINE_NORMALEDGE);break}}render(e){let t=e.command,a=e.camera.viewport,i=e.camera,r=i.farPlane,n=i.nearPlane,l=e.indirectTarget,d=e.destination,c=a.width,u=a.height,m=wD.createFromPool(c,u,Wc.R8G8B8A8,Wc.DEPTH_16,!1,1);m.filterMode=fD.Bilinear,i.depthTextureMode==Ih.Depth?(this._shaderData.addDefine(f.SHADERDEFINE_DEPTH),this._shaderData.removeDefine(f.SHADERDEFINE_DEPTHNORMAL),this._shaderData.setTexture(f.DEPTHTEXTURE,i.depthTexture)):i.depthTextureMode==Ih.DepthNormals&&(this._shaderData.addDefine(f.SHADERDEFINE_DEPTHNORMAL),this._shaderData.removeDefine(f.SHADERDEFINE_DEPTH),this._shaderData.setTexture(f.DEPTHNORMALTEXTURE,i.depthNormalTexture)),this._depthBufferparam.setValue(1-r/n,r/n,(n-r)/(n*r),1/n),this._shaderData.setVector(f.DEPTHBUFFERPARAMS,this._depthBufferparam),t.blitScreenTriangle(l,e.destination,null,this._shader,this._shaderData,0),e.deferredReleaseTextures.push(m)}};f._isShaderInit=!1;var Hh=f;var zc=Laya.Matrix4x4,ID=Laya.PrimitiveMesh,HD=Laya.MeshSprite3D,qs=Laya.Vector3,OD=Laya.BlinnPhongMaterial,{regClass:ND,property:Xc}=Laya,_a=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new qs(0,6.2,10.5),this.camera.transform.rotationEuler=new qs(-40,0,0),Laya.loader.load("resources/res/threeDimen/layabox.png").then(e=>{var t=new qs(0,0,1),a=new zc,i=50,r=ID.createBox(.02,.02,.02),n=new OD;n.albedoTexture=e;for(var l=0;l<i;l++){t.z=1+l*.15,t.y=l*.03;for(var d=100+l*15,c=0;c<d;c++){var u=new HD(r);u.meshRenderer.sharedMaterial=n;var m=u.transform.localPosition,L=Math.PI*2/d*c;zc.createRotationY(L,a),qs.transformCoordinate(t,a,m),u.transform.localPosition=m,this.scene.addChild(u)}}})}};o([Xc(Laya.Camera)],_a.prototype,"camera",2),o([Xc(Laya.Scene3D)],_a.prototype,"scene",2),_a=o([ND("BbAKFuvnRZqB07oEEn5PFw")],_a);var UD=Laya.SphereColliderShape,Qr=Laya.MeshSprite3D,Zs=Laya.Vector3,Pa=Laya.BlinnPhongMaterial,WD=Laya.CapsuleColliderShape,GD=Laya.CylinderColliderShape,Jr=Laya.Rigidbody3D,zD=Laya.ConeColliderShape,jr=Laya.PrimitiveMesh,Yc=Laya.BoxColliderShape,XD=Laya.PhysicsCollider,YD=Laya.Vector4,{regClass:KD,property:Oh}=Laya,Lt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Zs(0,6,9.5),this.camera.transform.rotate(new Zs(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new Zs(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new Zs(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=["resources/res/threeDimen/Physics/rocks.jpg","resources/res/threeDimen/Physics/plywood.jpg","resources/res/threeDimen/Physics/wood.jpg","resources/res/threeDimen/Physics/steel2.jpg","resources/res/threeDimen/Physics/steel.jpg"];Laya.loader.load(t).then(a=>{this.onComplete(a)})}onComplete(e){var t=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(20,20,10,10))),a=new Pa;a.albedoTexture=e[2],a.tilingOffset=new YD(2,2,0,0),t.meshRenderer.material=a;var i=t.addComponent(XD),r=new Yc(10,0,10);i.colliderShape=r,i.friction=2,i.restitution=.3,this.addBox(),this.randomAddPhysicsSprite()}randomAddPhysicsSprite(){Laya.timer.loop(1e3,this,()=>{var e=Math.floor(Math.random()*5)%5;switch(e){case 0:this.addBox();break;case 1:this.addSphere();break;case 2:this.addCapsule();break;case 3:this.addCone();break;case 4:this.addCylinder();break;default:break}})}addBox(){var e=Math.random()*.75+.25,t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=this.scene.addChild(new Qr(jr.createBox(e,t,a)));i.meshRenderer.material=new Pa,Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(u=>{i.meshRenderer.material.albedoTexture=u});var r=i.transform,n=r.position;n.setValue(Math.random()*4-2,10,Math.random()*4-2),r.position=n;var l=r.rotationEuler;l.setValue(Math.random()*360,Math.random()*360,Math.random()*360),r.rotationEuler=l;var d=i.addComponent(Jr),c=new Yc(e,t,a);d.colliderShape=c,d.mass=10}addSphere(){var e=Math.random()*.2+.2,t=this.scene.addChild(new Qr(jr.createSphere(e)));t.meshRenderer.material=new Pa,Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(n=>{t.meshRenderer.material.albedoTexture=n});var a=t.transform.position;a.setValue(Math.random()*4-2,10,Math.random()*4-2),t.transform.position=a;var i=t.addComponent(Jr),r=new UD(e);i.colliderShape=r,i.mass=10}addCapsule(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=this.scene.addChild(new Qr(jr.createCapsule(e,t)));a.meshRenderer.material=new Pa,Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(c=>{a.meshRenderer.material.albedoTexture=c});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(Jr),d=new WD(e,t);l.colliderShape=d,l.mass=10}addCone(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=new Qr(jr.createCone(e,t));this.scene.addChild(a),a.meshRenderer.material=new Pa,Laya.loader.load("resources/res/threeDimen/Physics/steel2.jpg").then(l=>{a.meshRenderer.material.albedoTexture=l});var i=a.transform.position;i.setValue(Math.random()*4-2,10,Math.random()*4-2),a.transform.position=i;var r=a.addComponent(Jr),n=new zD(e,t);r.colliderShape=n,r.mass=10}addCylinder(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=new Qr(jr.createCylinder(e,t));this.scene.addChild(a),a.meshRenderer.material=new Pa,Laya.loader.load("resources/res/threeDimen/Physics/steel.jpg").then(c=>{a.meshRenderer.material.albedoTexture=c});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(Jr),d=new GD(e,t);l.colliderShape=d,l.mass=10}};o([Oh(Laya.Camera)],Lt.prototype,"camera",2),o([Oh(Laya.Scene3D)],Lt.prototype,"scene",2),o([Oh(Laya.Sprite3D)],Lt.prototype,"directionLight",2),Lt=o([KD("P3TKAvT8RUiCkmP4rfnM3g")],Lt);var ka=Laya.Event,Nh=Laya.MeshSprite3D,oe=Laya.Vector3,Kc=Laya.BlinnPhongMaterial,QD=Laya.HitResult,JD=Laya.Vector2,Qc=Laya.Rigidbody3D,jD=Laya.Ray,Uh=Laya.PrimitiveMesh,Wh=Laya.BoxColliderShape,qD=Laya.PhysicsCollider,ZD=Laya.Vector4,{regClass:$D,property:Gh}=Laya,gt=class extends h{constructor(){super();this.ray=new jD(new oe(0,0,0),new oe(0,0,0));this.point=new JD;this._outHitResult=new QD;this.ZERO=new oe(0,0,0);this.ONE=new oe(1,1,1)}onAwake(){super.base(this.camera);var e=["resources/res/threeDimen/Physics/wood.jpg","resources/res/threeDimen/Physics/plywood.jpg"];Laya.loader.load(e).then(t=>{this.onComplete(t)})}onComplete(e){this.camera.transform.position=new oe(4.5,6,4.5),this.camera.transform.rotate(new oe(-30,45,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(1,1,1,1);var t=this.directionLight.transform.worldMatrix;t.setForward(new oe(-1,-1,1)),this.directionLight.transform.worldMatrix=t;var a=this.scene.addChild(new Nh(Uh.createPlane(13,13,10,10))),i=new Kc;i.albedoTexture=e[0],i.tilingOffset=new ZD(2,2,0,0),a.meshRenderer.material=i,a.meshRenderer.receiveShadow=!0,this.mesh1=Uh.createBox(2,.33,.5),this.mesh2=Uh.createBox(.5,.33,2),this.mat=new Kc,this.mat.albedoTexture=e[1];var r=a.addComponent(qD),n=new Wh(13,0,13);r.colliderShape=n,this.addMouseEvent(),this.addBox()}addBox(){for(var e=0;e<8;e++)this.addVerticalBox(-.65,.165+e*.33*2,0),this.addVerticalBox(0,.165+e*.33*2,0),this.addVerticalBox(.65,.165+e*.33*2,0),this.addHorizontalBox(0,.165+.33+e*.33*2,-.65),this.addHorizontalBox(0,.165+.33+e*.33*2,0),this.addHorizontalBox(0,.165+.33+e*.33*2,.65)}addHorizontalBox(e,t,a){var i=this.scene.addChild(new Nh(this.mesh1));i.meshRenderer.material=this.mat,i.meshRenderer.castShadow=!0,i.meshRenderer.receiveShadow=!0,i.transform.position=new oe(e,t,a);var r=i.addComponent(Qc);r.mass=10,r.friction=.4,r.restitution=.2;var n=new Wh(2,.33,.5);r.colliderShape=n}addVerticalBox(e,t,a){var i=this.scene.addChild(new Nh(this.mesh2));i.meshRenderer.material=this.mat,i.meshRenderer.castShadow=!0,i.meshRenderer.receiveShadow=!0,i.transform.position=new oe(e,t,a);var r=i.addComponent(Qc);r.mass=10,r.friction=.4,r.restitution=.2;var n=new Wh(.5,.33,2);r.colliderShape=n}addMouseEvent(){this.owner.on(ka.MOUSE_DOWN,this,this.onMouseDown),this.owner.on(ka.MOUSE_UP,this,this.onMouseUp),this.owner.on(ka.MOUSE_OUT,this,this.onMouseOut)}onMouseDown(e){if(this.posX=this.point.x=e.target.mouseX*y.screenWidth/y.pageWidth,this.posY=this.point.y=e.target.mouseY*y.screenHeight/y.pageHeight,this.camera.viewportPointToRay(this.point,this.ray),this.scene.physicsSimulation.rayCast(this.ray,this._outHitResult),this._outHitResult.succeeded){var t=this._outHitResult.collider.owner.getComponent(Laya.Rigidbody3D);t&&(this.hasSelectedSprite=t.owner,this.hasSelectedRigidBody=t,t.angularFactor=this.ZERO,t.angularVelocity=this.ZERO,t.linearFactor=this.ZERO,t.linearVelocity=this.ZERO)}this.owner.on(ka.MOUSE_MOVE,this,this.onMouseMove)}onMouseMove(e){this.delX=e.target.mouseX-this.posX*y.screenWidth/y.pageWidth-this.posX,this.delY=e.target.mouseY-this.posY*y.screenHeight/y.pageHeight-this.posY,this.hasSelectedSprite&&(this.hasSelectedRigidBody.linearVelocity=new oe(this.delX/2,0,this.delY/2)),this.posX=e.target.mouseX*y.screenWidth/y.pageWidth,this.posY=e.target.mouseY*y.screenHeight/y.pageHeight}onMouseUp(e){this.owner.off(ka.MOUSE_MOVE,this,this.onMouseMove),this.hasSelectedSprite&&(this.hasSelectedRigidBody.angularFactor=this.ONE,this.hasSelectedRigidBody.linearFactor=this.ONE,this.hasSelectedSprite=null)}onMouseOut(e){this.owner.off(ka.MOUSE_MOVE,this,this.onMouseMove),this.hasSelectedSprite&&(this.hasSelectedRigidBody.angularFactor=this.ONE,this.hasSelectedRigidBody.linearFactor=this.ONE,this.hasSelectedSprite=null)}};o([Gh(Laya.Camera)],gt.prototype,"camera",2),o([Gh(Laya.Scene3D)],gt.prototype,"scene",2),o([Gh(Laya.Sprite3D)],gt.prototype,"directionLight",2),gt=o([$D("v_IPPfidQxyiJcaWKRAAjQ")],gt);var Fe=Laya.Vector3,{regClass:eC,property:zh}=Laya,vt=class extends h{constructor(){super();this.translateW=new Fe(0,0,-.2);this.translateS=new Fe(0,0,.2);this.translateA=new Fe(-.2,0,0);this.translateD=new Fe(.2,0,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Fe(0,6,9.5),this.camera.transform.rotate(new Fe(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new Fe(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new Fe(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=["resources/res/threeDimen/Physics/plywood.jpg","resources/res/threeDimen/Physics/wood.jpg","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"];Laya.loader.load(t).then(a=>{this.onComplete(a)})}onComplete(e){this.mat1=new Laya.BlinnPhongMaterial,this.mat2=new Laya.BlinnPhongMaterial,this.mat1.albedoTexture=e[0],this.mat2.albedoTexture=e[1];var t=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createPlane(20,20,10,10))),a=new Laya.BlinnPhongMaterial;a.albedoTexture=e[1],a.tilingOffset=new Laya.Vector4(2,2,0,0),t.meshRenderer.material=a;var i=t.addComponent(Laya.PhysicsCollider),r=new Laya.BoxColliderShape(20,0,20);i.colliderShape=r;for(var n=0;n<60;n++)this.addBox(),this.addCapsule();this.addCharacter(e[2])}addCharacter(e){let t=e.create();this.scene.addChild(t),t.getChildAt(0).transform.localScale=new Laya.Vector3(1,1,1);var a=t.addComponent(Laya.CharacterController),i=new Laya.CapsuleColliderShape(1,3.4);i.localOffset=new Laya.Vector3(0,1.7,0),a.colliderShape=i,this.kinematicSphere=t,Laya.timer.frameLoop(1,this,this.onKeyDown)}onKeyDown(){var e=this.kinematicSphere.getComponent(Laya.CharacterController);Laya.InputManager.hasKeyDown(87)&&e.move(this.translateW),Laya.InputManager.hasKeyDown(83)&&e.move(this.translateS),Laya.InputManager.hasKeyDown(65)&&e.move(this.translateA),Laya.InputManager.hasKeyDown(68)&&e.move(this.translateD),Laya.InputManager.hasKeyDown(69)&&e.jump()}addBox(){var e=Math.random()*.75+.25,t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(e,t,a)));i.meshRenderer.material=this.mat1,i.transform.position=new Laya.Vector3(Math.random()*4-2,2,Math.random()*4-2),i.transform.rotationEuler=new Laya.Vector3(Math.random()*360,Math.random()*360,Math.random()*360);var r=i.addComponent(Laya.Rigidbody3D),n=new Laya.BoxColliderShape(e,t,a);r.colliderShape=n,r.mass=10}addCapsule(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createCapsule(e,t)));a.meshRenderer.material=this.mat2,a.transform.position=new Laya.Vector3(Math.random()*4-2,2,Math.random()*4-2),a.transform.rotationEuler=new Laya.Vector3(Math.random()*360,Math.random()*360,Math.random()*360);var i=a.addComponent(Laya.Rigidbody3D),r=new Laya.CapsuleColliderShape(e,t);i.colliderShape=r,i.mass=10}};o([zh(Laya.Camera)],vt.prototype,"camera",2),o([zh(Laya.Scene3D)],vt.prototype,"scene",2),o([zh(Laya.Sprite3D)],vt.prototype,"directionLight",2),vt=o([eC("ICSLxKDiQ7iqTLkMmI373w")],vt);var tC=Laya.Color,Fa=Laya.InputManager,Jc=Laya.SphereColliderShape,St=Laya.MeshSprite3D,se=Laya.Vector3,xt=Laya.BlinnPhongMaterial,aC=Laya.CapsuleColliderShape,rC=Laya.CylinderColliderShape,Ia=Laya.Rigidbody3D,iC=Laya.ConeColliderShape,ft=Laya.PrimitiveMesh,jc=Laya.BoxColliderShape,oC=Laya.PhysicsCollider,sC=Laya.Vector4,Ie=Laya.Physics3DUtils,{regClass:nC,property:Xh}=Laya,Dt=class extends h{constructor(){super();this.translateW=new se(0,0,-.2);this.translateS=new se(0,0,.2);this.translateA=new se(-.2,0,0);this.translateD=new se(.2,0,0);this.translateQ=new se(-.01,0,0);this.translateE=new se(.01,0,0);this._albedoColor=new tC(1,0,0,1)}onAwake(){super.base(this.camera),this.camera.transform.position=new se(0,6,9.5),this.camera.transform.rotate(new se(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new se(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new se(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.plane=this.scene.addChild(new St(ft.createPlane(20,20,10,10)));var t=new xt;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(n=>{t.albedoTexture=n}),t.tilingOffset=new sC(2,2,0,0),this.plane.meshRenderer.material=t;var a=this.plane.addComponent(oC),i=new jc(20,0,20);a.colliderShape=i,this.addKinematicSphere();for(var r=0;r<20;r++)this.addBox(),this.addCapsule(),this.addCone(),this.addCylinder(),this.addSphere()}addKinematicSphere(){var e=new xt;Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(l=>{e.albedoTexture=l}),e.albedoColor=this._albedoColor;var t=.8,a=this.scene.addChild(new St(ft.createSphere(t)));a.meshRenderer.material=e;var i=a.transform.position;i.setValue(0,.8,0),a.transform.position=i;var r=a.addComponent(Ia),n=new Jc(t);r.colliderShape=n,r.mass=60,r.isKinematic=!0,r.canCollideWith=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER1|Ie.COLLISIONFILTERGROUP_CUSTOMFILTER3|Ie.COLLISIONFILTERGROUP_CUSTOMFILTER5,this.kinematicSphere=a,Laya.timer.frameLoop(1,this,this.onKeyDown)}onKeyDown(){Fa.hasKeyDown(87)&&this.kinematicSphere.transform.translate(this.translateW),Fa.hasKeyDown(83)&&this.kinematicSphere.transform.translate(this.translateS),Fa.hasKeyDown(65)&&this.kinematicSphere.transform.translate(this.translateA),Fa.hasKeyDown(68)&&this.kinematicSphere.transform.translate(this.translateD),Fa.hasKeyDown(81)&&this.plane.transform.translate(this.translateQ),Fa.hasKeyDown(69)&&this.plane.transform.translate(this.translateE)}addBox(){var e=Math.random()*.75+.25,t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=this.scene.addChild(new St(ft.createBox(e,t,a)));i.meshRenderer.material=new xt,Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(u=>{i.meshRenderer.material.albedoTexture=u});var r=i.transform,n=r.position;n.setValue(Math.random()*16-8,t/2,Math.random()*16-8),r.position=n;var l=r.rotationEuler;l.setValue(0,Math.random()*360,0),r.rotationEuler=l;var d=i.addComponent(Ia),c=new jc(e,t,a);d.colliderShape=c,d.mass=10,d.collisionGroup=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER1}addCapsule(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=this.scene.addChild(new St(ft.createCapsule(e,t)));a.meshRenderer.material=new xt,Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(c=>{a.meshRenderer.material.albedoTexture=c});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,2,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(Ia),d=new aC(e,t);l.colliderShape=d,l.mass=10,l.collisionGroup=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER2}addCone(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=new St(ft.createCone(e,t));this.scene.addChild(a),a.meshRenderer.material=new xt,Laya.loader.load("resources/res/threeDimen/Physics/steel2.jpg").then(d=>{a.meshRenderer.material.albedoTexture=d});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=a.addComponent(Ia),l=new iC(e,t);n.colliderShape=l,n.mass=10,n.collisionGroup=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER3}addCylinder(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=new St(ft.createCylinder(e,t));this.scene.addChild(a),a.meshRenderer.material=new xt,Laya.loader.load("resources/res/threeDimen/Physics/steel.jpg").then(c=>{a.meshRenderer.material.albedoTexture=c});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(Ia),d=new rC(e,t);l.colliderShape=d,l.mass=10,l.collisionGroup=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER4}addSphere(){var e=Math.random()*.2+.2,t=this.scene.addChild(new St(ft.createSphere(e)));t.meshRenderer.material=new xt,Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(n=>{t.meshRenderer.material.albedoTexture=n});var a=t.transform.position;a.setValue(Math.random()*4-2,10,Math.random()*4-2),t.transform.position=a;var i=t.addComponent(Ia),r=new Jc(e);i.colliderShape=r,i.mass=10,i.collisionGroup=Ie.COLLISIONFILTERGROUP_CUSTOMFILTER5}};o([Xh(Laya.Camera)],Dt.prototype,"camera",2),o([Xh(Laya.Scene3D)],Dt.prototype,"scene",2),o([Xh(Laya.Sprite3D)],Dt.prototype,"directionLight",2),Dt=o([nC("pFsaMZo2QVS5hyRuGx-4sw")],Dt);var hC=Laya.SphereColliderShape,Yh=Laya.MeshSprite3D,qr=Laya.Vector3,Kh=Laya.BlinnPhongMaterial,qc=Laya.CompoundColliderShape,Zc=Laya.Rigidbody3D,lC=Laya.PrimitiveMesh,Ct=Laya.BoxColliderShape,pC=Laya.PhysicsCollider,dC=Laya.Vector4,{regClass:cC,property:Qh}=Laya,wt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new qr(0,6,9.5),this.camera.transform.rotate(new qr(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new qr(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new qr(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=this.scene.addChild(new Yh(lC.createPlane(20,20,20,10))),a=new Kh;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(n=>{a.albedoTexture=n}),a.tilingOffset=new dC(2,2,0,0),t.meshRenderer.material=a,t.meshRenderer.receiveShadow=!0;var i=t.addComponent(pC),r=new Ct(13,0,13);i.colliderShape=r,i.friction=2,this.randomAddPhysicsSprite()}randomAddPhysicsSprite(){Laya.timer.loop(1e3,this,()=>{var e=Math.floor(Math.random()*2)%2;switch(e){case 0:this.addTable();break;case 1:this.addObject();break;default:break}})}addTable(){var e=new Kh;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(t=>{e.albedoTexture=t}),e.shininess=1,Laya.loader.load("resources/res/threeDimen/Physics/table.lm").then(t=>{var a=this.scene.addChild(new Yh(t));a.meshRenderer.material=e;var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=i.getWorldLossyScale();l.setValue(3,3,3),i.setWorldLossyScale(l);var d=a.addComponent(Zc);d.mass=10,d.friction=1;var c=new qc,u=new Ct(.5,.4,.045),m=u.localOffset;m.setValue(0,0,.125),u.localOffset=m,c.addChildShape(u);var L=new Ct(.1,.1,.3);L.localOffset=new qr(-.2,-.148,-.048),c.addChildShape(L);var g=new Ct(.1,.1,.3),x=g.localOffset;x.setValue(.2,-.148,-.048),g.localOffset=x,c.addChildShape(g);var S=new Ct(.1,.1,.3),T=S.localOffset;T.setValue(-.2,.153,-.048),S.localOffset=T,c.addChildShape(S);var _=new Ct(.1,.1,.3),N=_.localOffset;N.setValue(.2,.153,-.048),_.localOffset=T,c.addChildShape(_),d.colliderShape=c})}addObject(){var e=new Kh;Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(t=>{e.albedoTexture=t}),Laya.loader.load("resources/res/threeDimen/Physics/object.lm").then(t=>{var a=this.scene.addChild(new Yh(t)),i=a.transform,r=i.position;r.setValue(Math.random()*4-2,5,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=i.getWorldLossyScale();l.setValue(.01,.01,.01),i.setWorldLossyScale(l),a.meshRenderer.material=e;var d=a.addComponent(Zc);d.mass=3,d.friction=.3;var c=new qc,u=new Ct(40,40,40),m=u.localOffset;m.setValue(0,0,-20),u.localOffset=m,c.addChildShape(u);var L=new hC(25),g=L.localOffset;g.setValue(0,0,24),L.localOffset=g,c.addChildShape(L),d.colliderShape=c})}};o([Qh(Laya.Camera)],wt.prototype,"camera",2),o([Qh(Laya.Scene3D)],wt.prototype,"scene",2),o([Qh(Laya.Sprite3D)],wt.prototype,"directionLight",2),wt=o([cC("Fv8oH1FJQU63Byz9DXcPSA")],wt);var X=Laya.Color,K=Laya.ConfigurableConstraint,mC=Laya.SphereColliderShape,Jh=Laya.MeshSprite3D,v=Laya.Vector3,jh=Laya.BlinnPhongMaterial,A=Laya.Rigidbody3D,qh=Laya.PrimitiveMesh,uC=Laya.BoxColliderShape,{regClass:yC,property:Zh}=Laya,bt=class extends h{constructor(){super()}onStart(){super.base(this.camera),this.camera.transform.position=new v(0,6,15),this.camera.transform.rotate(new v(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new v(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new v(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=this.scene.addChild(new Jh(qh.createPlane(40,40,40,40)));t.transform.position=new v(0,-2,0);var a=new jh;Laya.loader.load("resources/res/threeDimen/Physics/grass.png").then(r=>{a.albedoTexture=r});var i=a.tilingOffset;i.setValue(5,5,0,0),a.tilingOffset=i,t.meshRenderer.material=a,this.springTest(),this.bounceTest(),this.alongZAixs(),this.freeRotate(),this.rotateAngularX(),this.rotateAngularPoint()}springTest(){var e=this.addRigidBodySphere(new v(7,3,0),1),t=e.getComponent(A);t.isKinematic=!0;var a=this.addRigidBodyBox(new v(10,0,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-3,0),r.connectAnchor=new v(0,0,0),r.distanceLimit=3,r.XMotion=Laya.D6Axis.eLIMITED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED,r.distanceSpring=100,i.applyImpulse(new v(100,0,0))}bounceTest(){var e=this.addRigidBodySphere(new v(7,3,3),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(7,0,3),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-3,0),r.connectAnchor=new v(0,0,0),r.distanceLimit=2,r.XMotion=Laya.D6Axis.eLIMITED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED,r.distanceBounciness=.5,i.applyImpulse(new v(100,0,0))}bounceTestY(){var e=this.addRigidBodySphere(new v(0,4,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(0,2,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-2,0),r.connectAnchor=new v(0,0,0),r.distanceLimit=10,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLIMITED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED}rotateAngularX(){var e=this.addRigidBodySphere(new v(-2,3,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(-2,1,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-3,0),r.connectAnchor=new v(0,0,0),r.angularXMinLimit=-180,r.angularXMaxLimit=180,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eFREE,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED,i.angularVelocity=new v(5,0,0)}rotateAngularZ(){var e=this.addRigidBodySphere(new v(-7,6,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(-7,4,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-2,0),r.connectAnchor=new v(0,0,0),r.AngleZLimit=90,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLIMITED,i.angularVelocity=new v(0,0,.5)}rotateAngularY(){var e=this.addRigidBodySphere(new v(-5,6,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(-5,4,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-2,0),r.connectAnchor=new v(0,0,0),r.AngleYLimit=90,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLIMITED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED,i.angularVelocity=new v(0,.5,0)}freeRotate(){var e=this.addRigidBodySphere(new v(-6,3,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(-6,1,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,-1,0),r.connectAnchor=new v(0,1,0),r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eFREE,r.angularYMotion=Laya.D6Axis.eFREE,r.angularZMotion=Laya.D6Axis.eFREE,i.angularVelocity=new v(2,2,2),i.angularVelocity=new v(20,2,10)}rotateAngularPoint(){var e=this.addRigidBodySphere(new v(0,10,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(6,10,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,0,0),r.connectAnchor=new v(-6,0,0),r.AngleZLimit=180,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLOCKED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLIMITED}alongXAixs(){var e=this.addRigidBodySphere(new v(0,0,-4),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(5,0,-4),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,0,0),r.connectAnchor=new v(-5,0,0),i.linearVelocity=new v(1,0,0)}alongYAixs(){var e=this.addRigidBodySphere(new v(0,0,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(5,0,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,0,0),r.connectAnchor=new v(-5,0,0),i.linearVelocity=new v(0,1,0)}alongZAixs(){var e=this.addRigidBodySphere(new v(2,3,0),1),t=e.getComponent(A),a=this.addRigidBodyBox(new v(2,0,0),1);a.meshRenderer.material.albedoColor=new X(1,0,0,1);var i=a.getComponent(A),r=e.addComponent(K);r.ownBody=t,r.connectedBody=i,r.anchor=new v(0,0,0),r.connectAnchor=new v(0,3,0),r.distanceLimit=4,r.XMotion=Laya.D6Axis.eLOCKED,r.YMotion=Laya.D6Axis.eLOCKED,r.ZMotion=Laya.D6Axis.eLIMITED,r.angularXMotion=Laya.D6Axis.eLOCKED,r.angularYMotion=Laya.D6Axis.eLOCKED,r.angularZMotion=Laya.D6Axis.eLOCKED,i.linearVelocity=new v(0,0,4)}addRigidBodyBox(e,t){var a=this.scene.addChild(new Jh(qh.createBox(t,t,t)));a.transform.position=e;var i=new jh;a.meshRenderer.material=i;var r=a.addComponent(A),n=new uC(t,t,t);return r.colliderShape=n,r.mass=1,r.friction=.5,r.restitution=10,a}addRigidBodySphere(e,t){var a=this.scene.addChild(new Jh(qh.createSphere(.2)));a.transform.position=e;var i=new jh;i.albedoColor=new X(0,1,0,1),a.meshRenderer.material=i;var r=a.addComponent(A),n=new mC(.2);return r.colliderShape=n,r.mass=1,r.friction=.5,r.restitution=0,r.isKinematic=!0,a}};o([Zh(Laya.Camera)],bt.prototype,"camera",2),o([Zh(Laya.Scene3D)],bt.prototype,"scene",2),o([Zh(Laya.Sprite3D)],bt.prototype,"directionLight",2),bt=o([yC("ig70HnZPTaKXbRajDw92GA")],bt);var $c=Laya.MeshSprite3D,Ha=Laya.Vector3,$h=Laya.BlinnPhongMaterial,em=Laya.Rigidbody3D,tm=Laya.PrimitiveMesh,am=Laya.BoxColliderShape,rm=Laya.FixedConstraint,{regClass:LC,property:el}=Laya,Mt=class extends h{constructor(){super()}onStart(){super.base(this.camera),this.camera.transform.position=new Ha(0,6,9.5),this.camera.transform.rotate(new Ha(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new Ha(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new Ha(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.addbox()}addbox(){var e=this.scene.addChild(new $c(tm.createBox(1,1,1))),t=e.transform,a=t.position;a.setValue(0,5,0),t.position=a,e.meshRenderer.sharedMaterial=new $h;var i=e.addComponent(em),r=new am(1,1,1);i.colliderShape=r,i.mass=10,i.isKinematic=!0;var n=this.scene.addChild(new $c(tm.createBox(1,1,1))),l=n.transform,d=l.position;d.setValue(0,3,0),l.position=d,n.meshRenderer.sharedMaterial=new $h;var c=n.addComponent(em),u=new am(1,1,1);c.colliderShape=u,c.mass=10,Laya.loader.load("resources/res/threeDimen/texture/layabox.png").then(L=>{var g=new $h;g.albedoTexture=L,e.meshRenderer.material=g,n.meshRenderer.material=g});var m=e.addComponent(rm);m.anchor=new Ha(0,0,0),m.connectAnchor=new Ha(0,2,0),e.addComponent(tl),m.ownBody=i,m.connectedBody=c}};o([el(Laya.Camera)],Mt.prototype,"camera",2),o([el(Laya.Scene3D)],Mt.prototype,"scene",2),o([el(Laya.Sprite3D)],Mt.prototype,"directionLight",2),Mt=o([LC("HoVjz49LR5mpgqxfUhgz8Q")],Mt);var tl=class extends Laya.Script{onStart(){this.fixedConstraint=this.owner.getComponent(rm),this.fixedConstraint.breakForce=1e3}onUpdate(){if(this.fixedConstraint){var e=this.fixedConstraint.connectedBody.mass;this.fixedConstraint.connectedBody.mass=e+1}}onJointBreak(){console.log("duanle")}};var gC=Laya.SphereColliderShape,im=Laya.MeshSprite3D,$s=Laya.Vector3,om=Laya.BlinnPhongMaterial,vC=Laya.Rigidbody3D,sm=Laya.PrimitiveMesh,SC=Laya.BoxColliderShape,xC=Laya.PhysicsCollider,fC=Laya.Vector4,{regClass:DC,property:al}=Laya,Tt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new $s(0,6,9.5),this.camera.transform.rotate(new $s(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new $s(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new $s(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=["resources/res/threeDimen/Physics/wood.jpg","resources/res/threeDimen/Physics/plywood.jpg"];Laya.loader.load(t).then(a=>{this.onComplete(a)})}onComplete(e){var t=this.scene.addChild(new im(sm.createPlane(20,20,10,10))),a=new om;a.albedoTexture=e[0],a.tilingOffset=new fC(2,2,0,0),t.meshRenderer.material=a;var i=t.addComponent(xC),r=new SC(10,0,10);i.colliderShape=r,i.friction=2,i.restitution=.3,Laya.timer.loop(200,this,()=>{this.addSphere()})}addSphere(){var e=Math.random()*.2+.2,t=this.scene.addChild(new im(sm.createSphere(e)));t.meshRenderer.material=new om,t.meshRenderer.material.albedoTexture=Laya.Loader.getRes("resources/res/threeDimen/Physics/plywood.jpg");var a=t.transform.position;a.setValue(Math.random()*4-2,10,Math.random()*4-2),t.transform.position=a;var i=t.addComponent(vC),r=new gC(e);i.colliderShape=r,i.mass=10,i.ccdSweptSphereRadius=e,i.ccdMotionThreshold=1e-4}};o([al(Laya.Camera)],Tt.prototype,"camera",2),o([al(Laya.Scene3D)],Tt.prototype,"scene",2),o([al(Laya.Sprite3D)],Tt.prototype,"directionLight",2),Tt=o([DC("u2e3_hylRle33Pr9Z6t1Rg")],Tt);var Oa=Laya.InputManager,CC=Laya.SphereColliderShape,en=Laya.MeshSprite3D,ne=Laya.Vector3,tn=Laya.BlinnPhongMaterial,wC=Laya.CapsuleColliderShape,rl=Laya.Rigidbody3D,an=Laya.PrimitiveMesh,nm=Laya.BoxColliderShape,bC=Laya.PhysicsCollider,MC=Laya.Vector4,{regClass:TC,property:il}=Laya,Et=class extends h{constructor(){super();this.translateW=new ne(0,0,-.2);this.translateS=new ne(0,0,.2);this.translateA=new ne(-.2,0,0);this.translateD=new ne(.2,0,0);this.translateQ=new ne(-.01,0,0);this.translateE=new ne(.01,0,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new ne(0,6,9.5),this.camera.transform.rotate(new ne(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new ne(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new ne(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.mat1=new tn,this.mat3=new tn,Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(n=>{this.mat1.albedoTexture=n}),Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(n=>{this.mat3.albedoTexture=n}),this.plane=this.scene.addChild(new en(an.createPlane(20,20,10,10)));var t=new tn;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(n=>{t.albedoTexture=n}),t.tilingOffset=new MC(2,2,0,0),this.plane.meshRenderer.material=t;var a=this.plane.addComponent(bC),i=new nm(20,0,20);a.colliderShape=i;for(var r=0;r<60;r++)this.addBox(),this.addCapsule();this.addKinematicSphere()}addKinematicSphere(){var e=new tn;Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(d=>{e.albedoTexture=d});var t=e.albedoColor;t.setValue(1,0,0,1),e.albedoColor=t;var a=.8,i=this.scene.addChild(new en(an.createSphere(a)));i.meshRenderer.material=e;var r=i.transform.position;r.setValue(0,.8,0),i.transform.position=r;var n=i.addComponent(rl),l=new CC(a);n.colliderShape=l,n.isKinematic=!0,this.kinematicSphere=i,Laya.timer.frameLoop(1,this,this.onKeyDown)}onKeyDown(){Oa.hasKeyDown(87)&&this.kinematicSphere.transform.translate(this.translateW),Oa.hasKeyDown(83)&&this.kinematicSphere.transform.translate(this.translateS),Oa.hasKeyDown(65)&&this.kinematicSphere.transform.translate(this.translateA),Oa.hasKeyDown(68)&&this.kinematicSphere.transform.translate(this.translateD),Oa.hasKeyDown(81)&&this.plane.transform.translate(this.translateQ),Oa.hasKeyDown(69)&&this.plane.transform.translate(this.translateE)}addBox(){var e=Math.random()*.75+.25,t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=this.scene.addChild(new en(an.createBox(e,t,a)));i.meshRenderer.material=this.mat1;var r=i.transform,n=r.position;n.setValue(Math.random()*4-2,2,Math.random()*4-2),r.position=n;var l=r.rotationEuler;l.setValue(Math.random()*360,Math.random()*360,Math.random()*360),r.rotationEuler=l;var d=i.addComponent(rl),c=new nm(e,t,a);d.colliderShape=c,d.mass=10}addCapsule(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=this.scene.addChild(new en(an.createCapsule(e,t)));a.meshRenderer.material=this.mat3;var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,2,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(rl),d=new wC(e,t);l.colliderShape=d,l.mass=10}};o([il(Laya.Camera)],Et.prototype,"camera",2),o([il(Laya.Scene3D)],Et.prototype,"scene",2),o([il(Laya.Sprite3D)],Et.prototype,"directionLight",2),Et=o([TC("kidtF9WhTDiP5nbgdww1Jg")],Et);var hm=Laya.MeshColliderShape,ol=Laya.Loader,EC=Laya.SphereColliderShape,Zr=Laya.MeshSprite3D,Na=Laya.Vector3,rn=Laya.BlinnPhongMaterial,RC=Laya.CapsuleColliderShape,AC=Laya.Color,sl=Laya.Rigidbody3D,nl=Laya.PrimitiveMesh,BC=Laya.BoxColliderShape,lm=Laya.PhysicsCollider,{regClass:VC,property:hl}=Laya,Rt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Na(0,6,9.5),this.camera.transform.rotate(new Na(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new Na(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new Na(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,Laya.loader.load(["resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard-lizard_geo.lm","resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard_diff.png","resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard_norm.png"]).then(t=>{this.complete()})}complete(){var e=ol.getRes("resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard-lizard_geo.lm"),t=ol.getTexture2D("resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard_diff.png"),a=ol.getTexture2D("resources/res/threeDimen/staticModel/lizard/Assets/Lizard/lizard_norm.png"),i=new rn;i.specularColor=new AC(.5,.5,.5,.5),i.albedoTexture=t,i.normalTexture=a;var r=this.scene.addChild(new Zr(e));r.transform.localPosition=new Na(-2,0,0),r.transform.localScale=new Na(.01,.01,.01),r.meshRenderer.material=i;var n=r.addComponent(lm),l=new hm;l.mesh=e,n.colliderShape=l,n.friction=2,n.restitution=.3;var d=this.scene.addChild(new Zr(e)),c=d.transform,u=c.localPosition,m=c.localRotationEuler,L=c.localScale;u.setValue(3,0,0),m.setValue(0,80,0),L.setValue(.01,.01,.01),c.localPosition=u,c.localRotationEuler=m,c.localScale=L,d.meshRenderer.material=i;var g=d.addComponent(lm),x=new hm;x.mesh=e,g.colliderShape=x,g.friction=2,g.restitution=.3,this.addBox(),this.randomAddPhysicsSprite()}randomAddPhysicsSprite(){Laya.timer.loop(1e3,this,()=>{var e=Math.floor(Math.random()*3)%3;switch(e){case 0:this.addBox();break;case 1:this.addSphere();break;case 2:this.addCapsule();break;default:break}})}addBox(){var e=Math.random()*.75+.25,t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=this.scene.addChild(new Zr(nl.createBox(e,t,a)));i.meshRenderer.material=new rn,Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(u=>{i.meshRenderer.material.albedoTexture=u});var r=i.transform,n=r.position;n.setValue(Math.random()*4-2,10,Math.random()*4-2),r.position=n;var l=r.rotationEuler;l.setValue(Math.random()*360,Math.random()*360,Math.random()*360),r.rotationEuler=l;var d=i.addComponent(sl),c=new BC(e,t,a);d.colliderShape=c,d.mass=10}addSphere(){var e=Math.random()*.2+.2,t=this.scene.addChild(new Zr(nl.createSphere(e)));t.meshRenderer.material=new rn,Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(n=>{t.meshRenderer.material.albedoTexture=n});var a=t.transform.position;a.setValue(Math.random()*4-2,10,Math.random()*4-2),t.transform.position=a;var i=t.addComponent(sl),r=new EC(e);i.colliderShape=r,i.mass=10}addCapsule(){var e=Math.random()*.2+.2,t=Math.random()*.5+.8,a=this.scene.addChild(new Zr(nl.createCapsule(e,t)));a.meshRenderer.material=new rn,Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(c=>{a.meshRenderer.material.albedoTexture=c});var i=a.transform,r=i.position;r.setValue(Math.random()*4-2,10,Math.random()*4-2),i.position=r;var n=i.rotationEuler;n.setValue(Math.random()*360,Math.random()*360,Math.random()*360),i.rotationEuler=n;var l=a.addComponent(sl),d=new RC(e,t);l.colliderShape=d,l.mass=10}};o([hl(Laya.Camera)],Rt.prototype,"camera",2),o([hl(Laya.Scene3D)],Rt.prototype,"scene",2),o([hl(Laya.Sprite3D)],Rt.prototype,"directionLight",2),Rt=o([VC("acRLTDhDQmCBhmswwgOLAQ")],Rt);var At=Laya.Color,ll=Laya.Button,pl=Laya.MeshSprite3D,he=Laya.Vector3,dl=Laya.BlinnPhongMaterial,_C=Laya.CapsuleColliderShape,PC=Laya.HitResult,pm=Laya.Rigidbody3D,kC=Laya.Ray,cl=Laya.PrimitiveMesh,dm=Laya.BoxColliderShape,FC=Laya.PhysicsCollider,ml=Laya.Event,IC=Laya.PixelLineSprite3D,{regClass:HC,property:ul}=Laya,Bt=class extends h{constructor(){super();this.castType=0;this.castAll=!1;this.ray=new kC(new he(0,0,0),new he(0,0,0));this.hitResult=new PC;this.hitResults=[];this.debugSprites=[];this.from=new he(0,1,10);this.to=new he(0,1,-5);this.rayDir=new he(0,0,-1);this._albedoColor=new At(1,1,1,.5);this._position=new he(0,0,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new he(0,6,9.5),this.camera.transform.rotate(new he(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new he(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new he(-1,-1,-1)),this.directionLight.transform.worldMatrix=e;var t=this.scene.addChild(new pl(cl.createPlane(20,20,10,10))),a=new dl;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(d=>{a.albedoTexture=d});var i=a.tilingOffset;i.setValue(2,2,0,0),a.tilingOffset=i,t.meshRenderer.material=a;var r=t.addComponent(FC),n=new dm(20,0,20);r.colliderShape=n;for(var l=0;l<60;l++)this.addBox(),this.addCapsule();this.loadUI()}loadUI(){this.changeActionButton0=this.owner.addChild(new ll("resources/image/img_btn_bg.png","\u5C04\u7EBF\u6A21\u5F0F")),this.changeActionButton0.size(150,40),this.changeActionButton0.labelSize=16,this.changeActionButton0.sizeGrid="21,83,22,76",this.changeActionButton0.stateNum=1,this.changeActionButton0.labelColors="#ffffff",this.changeActionButton0.pos(50,280),this.changeActionButton0.on(ml.CLICK,this,this.stypeFun0),this.changeActionButton1=this.owner.addChild(new ll("resources/image/img_btn_bg.png","\u4E0D\u7A7F\u900F")),this.changeActionButton1.size(150,40),this.changeActionButton1.labelSize=16,this.changeActionButton1.sizeGrid="21,83,22,76",this.changeActionButton1.stateNum=1,this.changeActionButton1.labelColors="#ffffff",this.changeActionButton1.pos(50,340),this.changeActionButton1.on(ml.CLICK,this,this.stypeFun1),this.changeActionButton2=this.owner.addChild(new ll("resources/image/img_btn_bg.png","\u68C0\u6D4B")),this.changeActionButton2.size(150,40),this.changeActionButton2.labelSize=16,this.changeActionButton2.sizeGrid="21,83,22,76",this.changeActionButton2.stateNum=1,this.changeActionButton2.labelColors="#ffffff",this.changeActionButton2.pos(50,400),this.changeActionButton2.on(ml.CLICK,this,this.stypeFun2)}stypeFun0(e="\u5C04\u7EBF\u6A21\u5F0F"){switch(this.castType++,this.castType%=4,this.castType){case 0:this.changeActionButton0.label="\u5C04\u7EBF\u6A21\u5F0F";break;case 1:break;case 2:break;case 3:break}e=this.changeActionButton0.label}stypeFun1(e="\u4E0D\u7A7F\u900F"){this.castAll?(this.changeActionButton1.label="\u4E0D\u7A7F\u900F",this.castAll=!1):(this.changeActionButton1.label="\u7A7F\u900F",this.castAll=!0),e=this.changeActionButton1.label}stypeFun2(e=0){if(this.hitResult.succeeded&&(this.hitResult.collider.owner.meshRenderer.sharedMaterial.albedoColor=new At(1,1,1,1)),this.hitResults.length>0){for(var t=0,a=this.hitResults.length;t<a;t++)this.hitResults[t].collider.owner.meshRenderer.sharedMaterial.albedoColor=new At(1,1,1,1);this.hitResults.length=0}if(this.debugSprites.length>0){for(t=0,a=this.debugSprites.length;t<a;t++)this.debugSprites[t].destroy();this.debugSprites.length=0}switch(this.castType){case 0:var i=this.scene.addChild(new IC(1));if(i.addLine(this.from,this.to,At.RED,At.RED),this.debugSprites.push(i),this.ray.origin=this.from,this.ray.direction=this.rayDir,this.castAll)for(this.scene.physicsSimulation.rayCastAll(this.ray,this.hitResults),t=0,a=this.hitResults.length;t<a;t++)this.hitResults[t].collider.owner.meshRenderer.sharedMaterial.albedoColor=new At(1,0,0,1);else this.scene.physicsSimulation.rayCast(this.ray,this.hitResult),this.hitResult.collider.owner.meshRenderer.sharedMaterial.albedoColor=new At(1,0,0,1);break}e=this.castType}addBox(){var e=new dl;Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(m=>{e.albedoTexture=m});var t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=Math.random()*.75+.25,r=this.scene.addChild(new pl(cl.createBox(t,a,i)));r.meshRenderer.material=e;var n=r.transform,l=n.position;l.setValue(Math.random()*4-2,2,Math.random()*4-2),n.position=l;var d=n.rotationEuler;d.setValue(Math.random()*360,Math.random()*360,Math.random()*360),n.rotationEuler=d;var c=r.addComponent(pm),u=new dm(t,a,i);c.colliderShape=u,c.mass=10}addCapsule(){var e=new dl;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(u=>{e.albedoTexture=u});var t=Math.random()*.2+.2,a=Math.random()*.5+.8,i=this.scene.addChild(new pl(cl.createCapsule(t,a)));i.meshRenderer.material=e;var r=i.transform,n=r.position;n.setValue(Math.random()*4-2,2,Math.random()*4-2),r.position=n;var l=r.rotationEuler;l.setValue(Math.random()*360,Math.random()*360,Math.random()*360),r.rotationEuler=l;var d=i.addComponent(pm),c=new _C(t,a);d.colliderShape=c,d.mass=10}};o([ul(Laya.Camera)],Bt.prototype,"camera",2),o([ul(Laya.Scene3D)],Bt.prototype,"scene",2),o([ul(Laya.Sprite3D)],Bt.prototype,"directionLight",2),Bt=o([HC("KAIHSBc7QReSLQTcKOefeA")],Bt);var ai=Laya.Color,Ua=Laya.InputManager,cm=Laya.SphereColliderShape,$r=Laya.MeshSprite3D,le=Laya.Vector3,ei=Laya.BlinnPhongMaterial,OC=Laya.CapsuleColliderShape,yl=Laya.Rigidbody3D,ti=Laya.PrimitiveMesh,mm=Laya.BoxColliderShape,um=Laya.PhysicsCollider,NC=Laya.Vector4,{regClass:UC,property:Ll}=Laya,Vt=class extends h{constructor(){super();this.translateW=new le(0,0,-.2);this.translateS=new le(0,0,.2);this.translateA=new le(-.2,0,0);this.translateD=new le(.2,0,0);this.translateQ=new le(-.01,0,0);this.translateE=new le(.01,0,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new le(0,6,9.5),this.camera.transform.rotate(new le(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color.setValue(.6,.6,.6,1),this.directionLight.transform.rotate(new le(-3.14/3,0,0));var e=this.directionLight.transform.worldMatrix;e.setForward(new le(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.plane=this.scene.addChild(new $r(ti.createPlane(20,20,10,10)));var t=new ei;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(n=>{t.albedoTexture=n}),t.tilingOffset=new NC(2,2,0,0),this.plane.meshRenderer.material=t;var a=this.plane.addComponent(um),i=new mm(20,0,20);a.colliderShape=i,this.addKinematicSphere();for(var r=0;r<30;r++)this.addBoxAndTrigger(),this.addCapsuleCollision()}addKinematicSphere(){var e=new ei;Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(l=>{e.albedoTexture=l}),e.albedoColor=new ai(1,0,0,1);var t=.8,a=this.scene.addChild(new $r(ti.createSphere(t)));a.meshRenderer.material=e;var i=a.transform.position;i.setValue(0,.8,0),a.transform.position=i;var r=a.addComponent(yl),n=new cm(t);r.colliderShape=n,r.mass=60,r.isKinematic=!0,this.kinematicSphere=a,Laya.timer.frameLoop(1,this,this.onKeyDown)}onKeyDown(){Ua.hasKeyDown(87)&&this.kinematicSphere.transform.translate(this.translateW),Ua.hasKeyDown(83)&&this.kinematicSphere.transform.translate(this.translateS),Ua.hasKeyDown(65)&&this.kinematicSphere.transform.translate(this.translateA),Ua.hasKeyDown(68)&&this.kinematicSphere.transform.translate(this.translateD),Ua.hasKeyDown(81)&&this.plane.transform.translate(this.translateQ),Ua.hasKeyDown(69)&&this.plane.transform.translate(this.translateE)}addBoxAndTrigger(){var e=new ei;Laya.loader.load("resources/res/threeDimen/Physics/rocks.jpg").then(L=>{e.albedoTexture=L}),e.albedoColor=new ai(1,1,1,1);var t=Math.random()*.75+.25,a=Math.random()*.75+.25,i=Math.random()*.75+.25,r=this.scene.addChild(new $r(ti.createBox(t,a,i)));r.meshRenderer.material=e;var n=r.transform,l=n.position;l.setValue(Math.random()*16-8,a/2,Math.random()*16-8),n.position=l;var d=n.rotationEuler;d.setValue(0,Math.random()*360,0),n.rotationEuler=d;var c=r.addComponent(um),u=new mm(t,a,i);c.colliderShape=u,c.isTrigger=!0;var m=r.addComponent(on);m.kinematicSprite=this.kinematicSphere}addCapsuleCollision(){var e=new ei;Laya.loader.load("resources/res/threeDimen/Physics/wood.jpg").then(m=>{e.albedoTexture=m});var t=Math.random()*.2+.2,a=Math.random()*.5+.8,i=this.scene.addChild(new $r(ti.createCapsule(t,a)));i.meshRenderer.material=e;var r=i.transform,n=r.position;n.setValue(Math.random()*4-2,2,Math.random()*4-2),r.position=n;var l=r.rotationEuler;l.setValue(Math.random()*360,Math.random()*360,Math.random()*360),r.rotationEuler=l;var d=i.addComponent(yl),c=new OC(t,a);d.colliderShape=c,d.mass=10;var u=i.addComponent(on);u.kinematicSprite=this.kinematicSphere}addSphere(){var e=new ei;Laya.loader.load("resources/res/threeDimen/Physics/plywood.jpg").then(l=>{e.albedoTexture=l});var t=Math.random()*.2+.2,a=this.scene.addChild(new $r(ti.createSphere(t)));a.meshRenderer.material=e;var i=a.transform.position;i.setValue(Math.random()*4-2,10,Math.random()*4-2),a.transform.position=i;var r=a.addComponent(yl),n=new cm(t);r.colliderShape=n,r.mass=10}};o([Ll(Laya.Camera)],Vt.prototype,"camera",2),o([Ll(Laya.Scene3D)],Vt.prototype,"scene",2),o([Ll(Laya.Sprite3D)],Vt.prototype,"directionLight",2),Vt=o([UC("TYc_fkzXRhO8pP0oUdpDAQ")],Vt);var on=class extends Laya.Script{constructor(){super()}onTriggerEnter(e){this.owner.meshRenderer.sharedMaterial.albedoColor=new ai(0,1,0,1)}onTriggerStay(e){}onTriggerExit(e){this.owner.meshRenderer.sharedMaterial.albedoColor=new ai(1,1,1,1)}onCollisionEnter(e){e.other.owner===this.kinematicSprite&&(this.owner.meshRenderer.sharedMaterial.albedoColor=new ai(0,0,0,1))}onCollisionStay(e){}onCollisionExit(e){}};var WC=Laya.Scene3D,GC=Laya.Handler,zC=Laya.Resource,{regClass:XC,property:ym}=Laya,Wa=class extends h{constructor(){super()}onAwake(){super.base(this.camera),WC.load("resources/res/threeDimen/scene/LayaScene_dudeScene/Conventional/dudeSceneNoCamera.ls",GC.create(this,e=>{this._scene=this.scene.addChildAt(e,0),super.addBottomButton(["\u91CA\u653E\u663E\u5B58","\u52A0\u8F7D\u573A\u666F"],this,[this.garbageCollection,this.loadScene])}))}loadScene(){Laya.loader.load("resources/res/threeDimen/scene/LayaScene_dudeScene/Conventional/dudeSceneNoCamera.ls").then(e=>{let a=e.create().scene3D;this._scene=this.scene.addChildAt(a,0)})}garbageCollection(){this._scene&&(this._scene.destroy(),this._scene=null,zC.destroyUnusedResources())}};o([ym(Laya.Camera)],Wa.prototype,"camera",2),o([ym(Laya.Scene3D)],Wa.prototype,"scene",2),Wa=o([XC("38famCDgR0ym30-6sa8ajw")],Wa);var ri=Laya.Vector3,ii=Laya.Loader,{regClass:YC,property:Lm}=Laya,Ga=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new ri(.5,1.2,4);var e=[{url:"resources/res/threeDimen/fbx/Danding.lh",type:ii.HIERARCHY},{url:"resources/res/threeDimen/fbx/Stand.FBX",type:ii.HIERARCHY},{url:"resources/res/threeDimen/fbx/Material.lmat",type:ii.MATERIAL},{url:"resources/res/threeDimen/fbx/LayaMonkey.lmat",type:ii.MATERIAL}];Laya.loader.load(e).then(t=>{this.onFBXComplete(t),Laya.loader.load("resources/res/threeDimen/fbx/LayaMonkey.FBX",ii.HIERARCHY).then(a=>{var i=a.create();this.scene.addChild(i),i.transform.position=new ri(2.5,0,0),i.transform.setWorldLossyScale(new ri(.6,.6,.6)),i.getChildAt(0).getComponent(Laya.MeshRenderer).material=t[3]})})}onFBXComplete(e){let t=e[0].create();this.scene.addChild(t),t.transform.position=new ri(-2,0,0);var a=e[1].create();this.scene.addChild(a),a.transform.position=new ri(0,0,0),a.getChildAt(0).getComponent(Laya.MeshRenderer).material=e[2]}};o([Lm(Laya.Camera)],Ga.prototype,"camera",2),o([Lm(Laya.Scene3D)],Ga.prototype,"scene",2),Ga=o([YC("l_P8B_I6QPebADRrvKlaxQ")],Ga);var oi=Laya.Vector3,gl=Laya.Loader,{regClass:KC,property:gm}=Laya,za=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new oi(.5,1.2,4);var e=[{url:"resources/res/threeDimen/gltf/RiggedFigure/RiggedFigure.gltf",type:gl.HIERARCHY},{url:"resources/res/threeDimen/gltf/Duck/Duck.lh",type:gl.HIERARCHY}];Laya.loader.load(e).then(t=>{this.onGLTFComplete(t)}),Laya.loader.load("resources/res/threeDimen/gltf/AnimatedCube/AnimatedCube.gltf",gl.HIERARCHY).then(t=>{var a=t.create();this.scene.addChild(a),a.transform.position=new oi(2.5,.6,0),a.transform.setWorldLossyScale(new oi(.6,.6,.6))})}onGLTFComplete(e){let t=e[0].create();this.scene.addChild(t),t.transform.position=new oi(-2,0,0);var a=e[1].create();this.scene.addChild(a),a.transform.position=new oi(0,0,0)}};o([gm(Laya.Camera)],za.prototype,"camera",2),o([gm(Laya.Scene3D)],za.prototype,"scene",2),za=o([KC("lPWOq6rmQyKUxN1mVPIxeg")],za);var vm=Laya.MeshSprite3D,Sm=Laya.Vector3,QC=Laya.BlinnPhongMaterial,JC=Laya.Quaternion,jC=Laya.PrimitiveMesh,qC=Laya.SkyBox,{regClass:ZC,property:vl}=Laya,_t=class extends h{constructor(){super()}onAwake(){super.base(this.camera);let e=[{url:"resources/res/threeDimen/skyBox/skyBox2/skyBox2.lmat",type:Laya.Loader.MATERIAL},{url:"resources/res/threeDimen/texture/earth.png",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm",type:Laya.Loader.MESH},{url:"resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh",type:Laya.Loader.HIERARCHY}];Laya.loader.load(e,null,Laya.Handler.create(this,this.onLoading,null,!1)).then(t=>{this.loadingBar.visible=!1,this.onComplete(t)}),Laya.loader.on(Laya.Event.ERROR,this,this.onError)}onComplete(e){var t=this.camera.skyRenderer;t.mesh=qC.instance,t.material=e[0];var a=this.scene.addChild(new vm(jC.createSphere(1)));a.transform.position=new Laya.Vector3(0,1,0);var i=new QC;i.albedoTexture=e[1],i.albedoIntensity=1,a.meshRenderer.material=i;var r=this.scene.addChild(new vm(e[2])),n=r.transform,l=n.localScale;l.setValue(.5,.5,.5),n.localScale=l,r.transform.rotation=new JC(.7071068,0,0,-.7071067),r.transform.translate(new Sm(-2,0,0));var d=this.scene.addChild(e[3].create()),c=d.transform,u=c.localScale;u.setValue(5,5,5),c.localScale=u,c.translate(new Sm(2,0,0))}onError(e){console.log("\u52A0\u8F7D\u5931\u8D25: "+e)}onLoading(e){e>.92?this.loadingBar.value=.95:(this.loadingBar.value=e,console.log("\u52A0\u8F7D\u8FDB\u5EA6: "+e,this.loadingBar.value))}};o([vl(Laya.Camera)],_t.prototype,"camera",2),o([vl(Laya.Scene3D)],_t.prototype,"scene",2),o([vl(Laya.ProgressBar)],_t.prototype,"loadingBar",2),_t=o([ZC("3MBAcdRxQ4yTPr_DYawDpA")],_t);var $C=Laya.MeshSprite3D,si=Laya.Vector3,ew=Laya.AmbientMode,tw=Laya.CameraClearFlags,aw=Laya.SkyBox,rw=Laya.PBRStandardMaterial,{regClass:iw,property:xm}=Laya,Xa=class extends h{constructor(){super();this.teapot=null}onAwake(){super.base(this.camera),this.scene.ambientMode=ew.SphericalHarmonics,this.scene.reflectionIntensity=1,this.camera.transform.translate(new si(0,2,3)),this.camera.transform.rotate(new si(-15,0,0),!0,!1),this.camera.clearFlag=tw.Sky,Laya.loader.load("resources/res/threeDimen/skyBox/DawnDusk/Skybox.lmat").then(e=>{var t=this.scene.skyRenderer;t.mesh=aw.instance,t.material=e,e.exposure=.6+1}),Laya.loader.load("resources/res/threeDimen/staticModel/teapot/teapot-Teapot001.lm").then(e=>{this.teapot=this.scene.addChild(new $C(e)),this.teapot.transform.position=new si(0,1.75,2),this.teapot.transform.setWorldLossyScale(new si(5,5,5)),this.teapot.transform.rotate(new si(-90,0,0),!1,!1);var t=new rw;t.metallic=1,this.teapot.meshRenderer.material=t}),this.loadEnvironmentalReflection()}removeEnvironmentalReflection(){this.scene.sceneReflectionProb.iblTex=null}loadEnvironmentalReflection(){Laya.loader.load("resources/scene/3D/Scene3D/EnvironmentalReflection/EnvironmentalReflection.ktx").then(e=>{this.scene.sceneReflectionProb.iblTex=e})}};o([xm(Laya.Camera)],Xa.prototype,"camera",2),o([xm(Laya.Scene3D)],Xa.prototype,"scene",2),Xa=o([iw("1hCkqcdbRjqjmoSNj6H_iQ")],Xa);var ow=Laya.Sprite3D,ni=Laya.MeshSprite3D,He=Laya.Vector3,hi=Laya.PrimitiveMesh,fm=Laya.AmbientMode,sw=Laya.Color,nw=Laya.PBRStandardMaterial,{regClass:hw,property:Dm}=Laya,Ya=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new He(0,2,3),this.camera.transform.rotate(new He(-15,0,0),!0,!1),this.scene.ambientIntensity=.5,this.sprite3D=this.scene.addChild(new ow);var e=new nw,t=this.sprite3D.addChild(new ni(hi.createBox(.5,.5,.5)));t.transform.position=new He(2,.25,.6),t.transform.rotate(new He(0,45,0),!1,!1),t.meshRenderer.material=e;var a=this.sprite3D.addChild(new ni(hi.createSphere(.25,20,20)));a.transform.position=new He(1,.25,.6),a.meshRenderer.material=e;var i=this.sprite3D.addChild(new ni(hi.createCylinder(.25,1,20)));i.transform.position=new He(0,.5,.6),i.meshRenderer.material=e;var r=this.sprite3D.addChild(new ni(hi.createCapsule(.25,1,10,20)));r.transform.position=new He(-1,.5,.6),r.meshRenderer.material=e;var n=this.sprite3D.addChild(new ni(hi.createCone(.25,.75)));n.transform.position=new He(-2,.375,.6),n.meshRenderer.material=e,super.addBottomButton(["\u56FA\u5B9A\u989C\u8272","\u7403\u8C10\u5149\u7167"],this,[this.setSolidColor,this.setSphericalHarmonics])}setSphericalHarmonics(){this.scene.ambientMode=fm.SphericalHarmonics}setSolidColor(){this.scene.ambientMode=fm.SolidColor,this.scene.ambientColor=new sw(.56,.89,1)}};o([Dm(Laya.Camera)],Ya.prototype,"camera",2),o([Dm(Laya.Scene3D)],Ya.prototype,"scene",2),Ya=o([hw("qTisyXdZTwG1gOvVHqytCw")],Ya);var lw=Laya.Lightmap,{regClass:pw,property:Cm}=Laya,Ka=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.lightMaps=this.scene.lightmaps,super.addBottomButton(["\u53D6\u6D88\u5149\u7167\u8D34\u56FE","\u663E\u793A\u5149\u7167\u8D34\u56FE","\u52A0\u8F7D\u5149\u7167\u8D34\u56FE"],this,[this.setLightmapOff,this.setLightmapOn,this.loadLightmap])}setLightmapOff(){this.scene.lightmaps=null}setLightmapOn(){this.scene.lightmaps=this.lightMaps}loadLightmap(){this.scene.lightmaps=null;let e=new lw;Laya.loader.load("resources/res/threeDimen/LightmapScene/Scene/diffuse0.png").then(a=>{e.lightmapColor=a,e.lightmapDirection=null});let t=[];t.push(e),this.scene.lightmaps=t}};o([Cm(Laya.Camera)],Ka.prototype,"camera",2),o([Cm(Laya.Scene3D)],Ka.prototype,"scene",2),Ka=o([pw("QF4gBXa_TEOCyNGvac8wYQ")],Ka);var{regClass:dw,property:Sl}=Laya,Pt=class extends h{constructor(){super()}onAwake(){super.base(this.camera),Laya.loader.load("resources/res/threeDimen/scene/LayaScene_dudeScene/Conventional/dudeSceneNoCamera.ls",null,Laya.Handler.create(this,this.onLoading,null,!1)).then(e=>{this.loadingBar.visible=!1;let a=e.create().scene3D;this.scene.addChildAt(a,0)}),Laya.loader.on(Laya.Event.ERROR,this,this.onError)}onError(e){console.log("\u52A0\u8F7D\u5931\u8D25: "+e)}onLoading(e){e>.92?this.loadingBar.value=.95:(this.loadingBar.value=e,console.log("\u52A0\u8F7D\u8FDB\u5EA6: "+e,this.loadingBar.value))}};o([Sl(Laya.Camera)],Pt.prototype,"camera",2),o([Sl(Laya.Scene3D)],Pt.prototype,"scene",2),o([Sl(Laya.ProgressBar)],Pt.prototype,"loadingBar",2),Pt=o([dw("xhc7RuhBSzunYgtV0RhO6A")],Pt);var wm=Laya.Vector3,xl=Laya.InputManager,cw=Laya.Script3D,mw=Laya.Text,bm=Laya.Event,{regClass:uw,property:Mm}=Laya,Qa=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.getChildByName("Cerberus_LP"),t=e.addComponent(fl);t.model=e;var a=20;this.addText(30,200,10,"\u62D6\u52A8\u5C4F\u5E55\u4EE5\u65CB\u8F6C\u6A21\u578B","red"),a=10,this.addText(a,20,this.pageHeight-a*4,"Cerberus by Andrew Maximov     http://artisaverb.info/PBT.html","#FFFF00")}addText(e,t,a,i,r){var n=new mw;n.color=r,n.fontSize=e,n.x=t,n.y=a,n.text=i,this.owner.addChild(n)}};o([Mm(Laya.Camera)],Qa.prototype,"camera",2),o([Mm(Laya.Scene3D)],Qa.prototype,"scene",2),Qa=o([uw("npMOJXdMSvOqhloPNhaPpw")],Qa);var fl=class extends cw{constructor(){super();this._mouseDown=!1;this._rotate=new wm;this._autoRotateSpeed=new wm(0,.25,0);Laya.stage.on(bm.MOUSE_DOWN,this,()=>{this._mouseDown=!0,this._lastMouseX=xl.mouseX}),Laya.stage.on(bm.MOUSE_UP,this,()=>{this._mouseDown=!1})}onUpdate(){if(this._mouseDown){var e=xl.mouseX-this._lastMouseX;this._rotate.y=e*.2,this.model.transform.rotate(this._rotate,!1,!1),this._lastMouseX=xl.mouseX}else this.model.transform.rotate(this._autoRotateSpeed,!1,!1)}};var Tm=Laya.Vector3,Dl=Laya.InputManager,yw=Laya.Script3D,Lw=Laya.Text,Em=Laya.Event,{regClass:gw,property:Rm}=Laya,Ja=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.getChildAt(1).getChildAt(0),t=e.addComponent(Cl);t.model=e;var a=20;this.addText(30,200,10,"\u62D6\u52A8\u5C4F\u5E55\u4EE5\u65CB\u8F6C\u6A21\u578B","red"),a=10,this.addText(a,20,this.pageHeight-a*4,"Battle Damaged Sci-fi Helmet by theblueturtle_    www.leonardocarrion.com","#FFFF00")}addText(e,t,a,i,r){var n=new Lw;n.color=r,n.fontSize=e,n.x=t,n.y=a,n.text=i,this.owner.addChild(n)}};o([Rm(Laya.Camera)],Ja.prototype,"camera",2),o([Rm(Laya.Scene3D)],Ja.prototype,"scene",2),Ja=o([gw("VqyaC7tgR-OurFk0J1rqVw")],Ja);var Cl=class extends yw{constructor(){super();this._mouseDown=!1;this._rotate=new Tm;this._autoRotateSpeed=new Tm(0,.25,0);Laya.stage.on(Em.MOUSE_DOWN,this,()=>{this._mouseDown=!0,this._lastMouseX=Dl.mouseX}),Laya.stage.on(Em.MOUSE_UP,this,()=>{this._mouseDown=!1})}onUpdate(){if(this._mouseDown){var e=Dl.mouseX-this._lastMouseX;this._rotate.y=e*.2,this.model.transform.rotate(this._rotate,!1,!1),this._lastMouseX=Dl.mouseX}else this.model.transform.rotate(this._autoRotateSpeed,!1,!1)}};var Am=Laya.Vector3,wl=Laya.InputManager,vw=Laya.Script3D,Sw=Laya.Text,Bm=Laya.Event,{regClass:xw,property:Vm}=Laya,ja=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.getChildByName("Gun"),t=e.addComponent(bl);t.model=e;var a=20;this.addText(30,200,10,"\u62D6\u52A8\u5C4F\u5E55\u4EE5\u65CB\u8F6C\u6A21\u578B","red")}addText(e,t,a,i,r){var n=new Sw;n.color=r,n.fontSize=e,n.x=t,n.y=a,n.text=i,this.owner.addChild(n)}};o([Vm(Laya.Camera)],ja.prototype,"camera",2),o([Vm(Laya.Scene3D)],ja.prototype,"scene",2),ja=o([xw("8kO0vQ_iQWynqTAcNhxClg")],ja);var bl=class extends vw{constructor(){super();this._mouseDown=!1;this._rotate=new Am;this._autoRotateSpeed=new Am(0,.25,0);Laya.stage.on(Bm.MOUSE_DOWN,this,()=>{this._mouseDown=!0,this._lastMouseX=wl.mouseX}),Laya.stage.on(Bm.MOUSE_UP,this,()=>{this._mouseDown=!1})}onUpdate(){if(this._mouseDown){var e=wl.mouseX-this._lastMouseX;this._rotate.y=e*.2,this.model.transform.rotate(this._rotate,!1,!1),this._lastMouseX=wl.mouseX}else this.model.transform.rotate(this._autoRotateSpeed,!1,!1)}};var{regClass:fw,property:_m}=Laya,qa=class extends h{constructor(){super()}onAwake(){super.base(this.camera);var e=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1,1,1),"MOs"));e.transform.rotate(new Laya.Vector3(0,45,0),!1,!1);var t=new Laya.BlinnPhongMaterial;e.meshRenderer.material=t,Laya.loader.load("resources/res/threeDimen/layabox.png").then(a=>{e.addComponent(sn),t.albedoTexture=a}),Laya.timer.once(4e3,this,this.onLoop,[e])}onLoop(e){console.log("\u79FB\u9664\u7EC4\u4EF6");var t=e.getComponent(sn);t.destroy()}};o([_m(Laya.Camera)],qa.prototype,"camera",2),o([_m(Laya.Scene3D)],qa.prototype,"scene",2),qa=o([fw("qfgvizrZTmGXKOyyozuFtA")],qa);var sn=class extends Laya.Script3D{constructor(){super();this._rotation=new Laya.Vector3(0,.5,0)}onAwake(){this.box=this.owner}onStart(){}onUpdate(){this.box.transform.rotate(this._rotation,!1,!1)}onDisable(){console.log("\u7EC4\u4EF6\u8BBE\u7F6E\u4E3A\u4E0D\u53EF\u7528")}};var Pm=`//\xA0\u539F\u6765\u7684\u5199\u6CD5\u4F1A\u88AB\u6211\u4EEC\u81EA\u5DF1\u7684\u89E3\u6790\u6D41\u7A0B\u5904\u7406\uFF0C\u800C\u6211\u4EEC\u7684\u89E3\u6790\u662F\u4E0D\u8BA4\u5185\u7F6E\u5B8F\u7684\uFF0C\u5BFC\u81F4\u88AB\u5220\u6389\uFF0C\u6240\u4EE5\u6539\u6210\xA0if\xA0defined\xA0\u4E86\r
#if defined(GL_FRAGMENT_PRECISION_HIGH)\r
	precision highp float;\r
	precision highp int;\r
#else\r
	precision mediump float;\r
	precision mediump int;\r
#endif\r
#define SHADER_NAME EDGE_FS\r
\r
#include "Color.glsl";\r
#include "Lighting.glsl";\r
#include "Camera.glsl";\r
#include "Scene.glsl";\r
#include "globalIllumination.glsl";\r
\r
varying vec2 v_Texcoord;\r
uniform sampler2D u_texture;\r
uniform vec3 u_marginalColor;\r
\r
varying vec3 v_Normal;\r
varying vec3 v_PositionWorld;\r
\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_texture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
\r
void main()\r
{\r
	gl_FragColor=sampleMainTex(u_texture, v_Texcoord);\r
	vec3 ambientCol = diffuseIrradiance(v_Normal);\r
	vec3 normal=normalize(v_Normal);\r
	vec3 toEyeDir = normalize(getViewDirection(v_PositionWorld));\r
	float Rim = 1.0 - max(0.0,dot(toEyeDir, normal));\r
	vec3 lightColor = ambientCol;\r
	vec3 Emissive = 2.0 * lightColor * u_marginalColor * pow(Rim,3.0);  \r
	\r
	gl_FragColor = sampleMainTex(u_texture, v_Texcoord) + vec4(Emissive,1.0);\r
	gl_FragColor = outputTransform(gl_FragColor);\r
}\r
\r
`;var km=`#if defined(GL_FRAGMENT_PRECISION_HIGH)//\xA0\u539F\u6765\u7684\u5199\u6CD5\u4F1A\u88AB\u6211\u4EEC\u81EA\u5DF1\u7684\u89E3\u6790\u6D41\u7A0B\u5904\u7406\uFF0C\u800C\u6211\u4EEC\u7684\u89E3\u6790\u662F\u4E0D\u8BA4\u5185\u7F6E\u5B8F\u7684\uFF0C\u5BFC\u81F4\u88AB\u5220\u6389\uFF0C\u6240\u4EE5\u6539\u6210\xA0if\xA0defined\xA0\u4E86\r
	precision highp float;\r
	precision highp int;\r
#else\r
	precision mediump float;\r
	precision mediump int;\r
#endif\r
\r
#define SHADER_NAME EDGE_VS\r
\r
// #include "Lighting.glsl";\r
#include "VertexCommon.glsl";\r
#include "Scene.glsl";\r
#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
varying vec2 v_Texcoord;\r
varying vec3 v_Normal;\r
varying vec3 v_PositionWorld;\r
\r
void main()\r
{\r
	Vertex vertex;\r
	getVertexParams(vertex);\r
	v_Texcoord = vertex.texCoord0;\r
	mat4 worldMat = getWorldMatrix();\r
	vec3 positionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
	v_PositionWorld = positionWS;\r
	v_Normal = normalize((worldMat * vec4(vertex.normalOS, 0.0))).xyz;\r
	gl_Position = getPositionCS(positionWS);\r
	gl_Position=remapPositionZ(gl_Position);\r
}`;var ww=Laya.DirectionLight,bw=Laya.Material,Mw=Laya.MeshSprite3D,Q=Laya.Vector3,Tw=Laya.PrimitiveMesh,Fm=Laya.Shader3D,{regClass:Ew,property:Im}=Laya,Za=class extends h{constructor(){super();this.rotation=new Q(0,.01,0)}onAwake(){super.base(this.camera),this.initShader();var e=[{url:"resources/res/threeDimen/skinModel/dude/dude.lh",type:Laya.Loader.HIERARCHY},{url:"resources/res/threeDimen/skinModel/dude/Assets/dude/head.png",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/skinModel/dude/Assets/dude/jacket.png",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/skinModel/dude/Assets/dude/pants.png",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/skinModel/dude/Assets/dude/upBodyC.png",type:Laya.Loader.TEXTURE2D},{url:"resources/res/threeDimen/texture/earth.png",type:Laya.Loader.TEXTURE2D}];Laya.loader.load(e).then(t=>{this.onComplete(t)})}onComplete(e){var t=this.scene,a=this.camera;a.transform.position=new Q(0,1,1),a.transform.rotate(new Q(-15,0,0),!0,!1);var i=new ww;t.addChild(i),i.color=new Laya.Color(1,1,1,1),t.ambientColor=new Laya.Color(1,0,0);let r=t.addChild(e[0].create());r.active=!1,Laya.timer.once(500,this,()=>{r.active=!0});var n=new kt;n.diffuseTexture=e[1],n.marginalColor=new Q(1,.7,0);var l=new kt;l.diffuseTexture=e[2],l.marginalColor=new Q(1,.7,0);var d=new kt;d.diffuseTexture=e[3],d.marginalColor=new Q(1,.7,0);var c=new kt;c.diffuseTexture=e[4],c.marginalColor=new Q(1,.7,0);var u=[];u[0]=n,u[1]=l,u[2]=d,u[3]=c,r.getChildAt(0).getChildAt(0).skinnedMeshRenderer.sharedMaterials=u,r.transform.position=new Q(0,.5,0),r.transform.setWorldLossyScale(new Q(.2,.2,.2)),r.transform.rotate(new Q(0,180,0),!1,!1);var m=t.addChild(new Mw(Tw.createSphere(.5,128,128))),L=new kt;L.diffuseTexture=e[5],m.meshRenderer.sharedMaterial=L,L.marginalColor=new Q(0,.3,1),Laya.timer.frameLoop(1,this,()=>{m.transform.rotate(this.rotation,!0)})}initShader(){var e=Laya.Shader3D.add("GlowingEdgeMaterial",!0,!0),t=new Laya.SubShader;e.addSubShader(t),t.addShaderPass(km,Pm)}};o([Im(Laya.Camera)],Za.prototype,"camera",2),o([Im(Laya.Scene3D)],Za.prototype,"scene",2),Za=o([Ew("6ILsZVUCStSsKZ1349Aitw")],Za);var kt=class p extends bw{constructor(){super();this.isInit=!1;this.isInit||(this.__init__(),this.isInit=!0),this.setShaderName("GlowingEdgeMaterial")}__init__(){p.DIFFUSETEXTURE=Fm.propertyNameToID("u_texture"),p.MARGINALCOLOR=Fm.propertyNameToID("u_marginalColor")}get diffuseTexture(){return this.getTextureByIndex(p.DIFFUSETEXTURE)}set diffuseTexture(e){this.setTextureByIndex(p.DIFFUSETEXTURE,e)}set marginalColor(e){this.setVector3ByIndex(p.MARGINALCOLOR,e)}};var Hm=`//\xA0\u539F\u6765\u7684\u5199\u6CD5\u4F1A\u88AB\u6211\u4EEC\u81EA\u5DF1\u7684\u89E3\u6790\u6D41\u7A0B\u5904\u7406\uFF0C\u800C\u6211\u4EEC\u7684\u89E3\u6790\u662F\u4E0D\u8BA4\u5185\u7F6E\u5B8F\u7684\uFF0C\u5BFC\u81F4\u88AB\u5220\u6389\uFF0C\u6240\u4EE5\u6539\u6210\xA0if\xA0defined\xA0\u4E86\r
#if defined(GL_FRAGMENT_PRECISION_HIGH)\r
    precision highp float; \r
#else \r
    precision mediump float; \r
#endif \r
\r
#include "Color.glsl";\r
\r
\r
void main() \r
{ \r
    vec3 finalColor = u_OutlineColor.rgb * u_OutlineLightness; \r
    gl_FragColor = vec4(finalColor,0.0); \r
    gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Om=`#include "Sprite3DVertex.glsl";\r
#include "VertexCommon.glsl";\r
#include "Camera.glsl";\r
void main()\r
{\r
    Vertex vertex;\r
    getVertexParams(vertex);\r
    vec4 position = vec4((vertex.positionOS) + (vertex.normalOS) * u_OutlineWidth, 1.0);\r
\r
    mat4 worldMat = getWorldMatrix();\r
    vec3 positionWS = (worldMat * vec4(position)).xyz;\r
    gl_Position = getPositionCS(positionWS);\r
    gl_Position = remapPositionZ(gl_Position);\r
}`;var Nm=`//\xA0\u539F\u6765\u7684\u5199\u6CD5\u4F1A\u88AB\u6211\u4EEC\u81EA\u5DF1\u7684\u89E3\u6790\u6D41\u7A0B\u5904\u7406\uFF0C\u800C\u6211\u4EEC\u7684\u89E3\u6790\u662F\u4E0D\u8BA4\u5185\u7F6E\u5B8F\u7684\uFF0C\u5BFC\u81F4\u88AB\u5220\u6389\uFF0C\u6240\u4EE5\u6539\u6210\xA0if\xA0defined\xA0\u4E86\r
#if defined(GL_FRAGMENT_PRECISION_HIGH)\r
precision highp float;\r
#else\r
precision mediump float;\r
#endif\r
#include "Color.glsl";\r
varying vec2 v_Texcoord0;\r
varying vec3 v_Normal;\r
vec4 sampleMainTex(sampler2D tex, vec2 uv)\r
{\r
    vec4 mainSampler = texture2D(tex, uv);\r
#ifdef Gamma_u_AlbedoTexture\r
    mainSampler = gammaToLinear(mainSampler);\r
#endif // Gamma_u_MainTex\r
    return mainSampler;\r
}\r
void main()\r
{\r
    vec4 albedoTextureColor = vec4(1.0);\r
    \r
    albedoTextureColor = sampleMainTex(u_AlbedoTexture, v_Texcoord0);\r
    gl_FragColor = albedoTextureColor;\r
    gl_FragColor = outputTransform(gl_FragColor);\r
}`;var Um=`#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
#include "VertexCommon.glsl";\r
\r
varying vec3 v_Normal; \r
varying vec2 v_Texcoord0; \r
\r
void main() \r
{ \r
\r
    Vertex vertex;\r
    getVertexParams(vertex);\r
    mat4 worldMat = getWorldMatrix();\r
    vec3 positionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
\r
    gl_Position = getPositionCS(positionWS);\r
\r
    v_Normal = normalize((worldMat * vec4(vertex.normalOS, 0.0)).xyz);\r
    v_Texcoord0 = vertex.texCoord0; \r
    gl_Position=remapPositionZ(gl_Position); \r
}`;var _w=Laya.MeshSprite3D,nn=Laya.Vector3,Pw=Laya.Material,li=Laya.Shader3D,kw=Laya.Color,hn=Laya.ShaderDataType,Wm=Laya.SubShader,Fw=Laya.RenderState,{regClass:Iw,property:Ml}=Laya,Ft=class extends h{constructor(){super();this.rotation=new nn(0,.01,0)}onAwake(){super.base(this.camera),ln.initShader();var e=this.scene,t=this.camera;t.transform.position=new nn(0,1,1.5),t.transform.rotate(new nn(-15,0,0),!0,!1),this.directionLight.getComponent(Laya.DirectionLightCom).color=new Laya.Color(1,1,1,1),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm").then(a=>{var i=e.addChild(new _w(a));i.transform.localScale=new nn(.3,.3,.3),i.transform.rotation=new Laya.Quaternion(.7071068,0,0,-.7071067);var r=new ln;i.meshRenderer.sharedMaterial=r,Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/diffuse.png",Laya.Loader.TEXTURE2D).then(n=>{r.albedoTexture=n}),Laya.timer.frameLoop(1,this,()=>{i.transform.rotate(this.rotation,!1)})})}};o([Ml(Laya.Camera)],Ft.prototype,"camera",2),o([Ml(Laya.Scene3D)],Ft.prototype,"scene",2),o([Ml(Laya.Sprite3D)],Ft.prototype,"directionLight",2),Ft=o([Iw("JgYvJCCFQoWlqxSTDpke5w")],Ft);var ln=class p extends Pw{static __init__(){p.ALBEDOTEXTURE=li.propertyNameToID("u_AlbedoTexture"),p.OUTLINECOLOR=li.propertyNameToID("u_OutlineColor"),p.OUTLINEWIDTH=li.propertyNameToID("u_OutlineWidth"),p.OUTLINELIGHTNESS=li.propertyNameToID("u_OutlineLightness")}get albedoTexture(){return this.getTextureByIndex(p.ALBEDOTEXTURE)}set albedoTexture(s){this.setTextureByIndex(p.ALBEDOTEXTURE,s)}get outlineColor(){return this.getColorByIndex(p.OUTLINECOLOR)}set outlineColor(s){this.setColorByIndex(p.OUTLINECOLOR,s)}get outlineWidth(){return this.getFloatByIndex(p.OUTLINEWIDTH)}set outlineWidth(s){s=Math.max(0,Math.min(.05,s)),this.setFloatByIndex(p.OUTLINEWIDTH,s)}get outlineLightness(){return this.getFloatByIndex(p.OUTLINELIGHTNESS)}set outlineLightness(s){s=Math.max(0,Math.min(1,s)),this.setFloatByIndex(p.OUTLINELIGHTNESS,s)}static initShader(){p.__init__();var s={u_OutlineLightness:hn.Float,u_OutlineColor:hn.Color,u_AlbedoTexture:hn.Texture2D,u_OutlineWidth:hn.Float},e=li.add("MultiplePassOutlineShader"),t=new Wm(Wm.DefaultAttributeMap,s);e.addSubShader(t);var a=t.addShaderPass(Om,Hm);a.statefirst=!0,a.renderState.cull=Fw.CULL_FRONT;var i=t.addShaderPass(Um,Nm)}constructor(){super(),this.setShaderName("MultiplePassOutlineShader"),this.setFloatByIndex(p.OUTLINEWIDTH,.01581197),this.setFloatByIndex(p.OUTLINELIGHTNESS,1),this.setColorByIndex(p.OUTLINECOLOR,new kw(1,1,1,0))}};var Hw=Laya.MeshSprite3D,Tl=Laya.Vector3,Ow=Laya.Quaternion,Nw=Laya.SubShader,Uw=Laya.MeshRenderer,Ww=Laya.Shader3D,Gw=Laya.Material,zw=Laya.MaterialRenderMode,{regClass:Xw,property:Gm}=Laya,$a=class extends h{constructor(){super();this.rotation=new Tl(0,.01,0)}onAwake(){super.base(this.camera),this.camera.transform.position=new Tl(0,.5,1.5),this.initShader(),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/Assets/LayaMonkey/LayaMonkey-LayaMonkey.lm").then(e=>{var t=this.scene.addChild(new Hw(e));t.transform.localScale=new Tl(.3,.3,.3),t.transform.rotation=new Ow(.7071068,0,0,-.7071067);var a=new El;t.getComponent(Uw).sharedMaterial=a,Laya.timer.frameLoop(1,this,()=>{t.transform.rotate(this.rotation,!1)})})}initShader(){var e=Ww.add("CustomShader"),t=new Nw;e.addSubShader(t);let a=`#include "Camera.glsl";\r
#include "Sprite3DVertex.glsl";\r
#include "VertexCommon.glsl";\r
varying vec3 v_Normal;\r
void main()\r
{\r
Vertex vertex;\r
getVertexParams(vertex);\r
mat4 worldMat = getWorldMatrix();\r
vec3 positionWS = (worldMat * vec4(vertex.positionOS, 1.0)).xyz;\r
gl_Position = getPositionCS(positionWS);\r
vec3 normalWS = normalize((worldMat * vec4(vertex.normalOS, 0.0)).xyz);\r
v_Normal = normalWS;\r
gl_Position=remapPositionZ(gl_Position);\r
}\r
`,i=`#if defined(GL_FRAGMENT_PRECISION_HIGH) \r
precision highp float;\r
#else\r
 precision mediump float;\r
#endif \r
#include "Color.glsl";\r
varying vec3 v_Normal;\r
void main()\r
{\r
gl_FragColor=vec4(v_Normal, 1.0);\r
gl_FragColor = outputTransform(gl_FragColor);\r
}\r
`;t.addShaderPass(a,i)}};o([Gm(Laya.Camera)],$a.prototype,"camera",2),o([Gm(Laya.Scene3D)],$a.prototype,"scene",2),$a=o([Xw("alR31ErETyW7NMhUVvvpYQ")],$a);var El=class extends Gw{constructor(){super(),this.setShaderName("CustomShader"),this.materialRenderMode=zw.RENDERMODE_OPAQUE}};var zm=Laya.Vector3,{regClass:Yw,property:Rl}=Laya,It=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new zm(0,.7,5),this.camera.transform.rotate(new zm(10,0,0),!0,!1);var e=this.directionLight.transform.worldMatrix;e.setForward(new Laya.Vector3(-1,-1,-1)),this.directionLight.transform.worldMatrix=e,this.rotation=new Laya.Vector3(-.01,0,0);var t=this.scene.skyRenderer;t.mesh=Laya.SkyDome.instance,t.material=new Laya.SkyProceduralMaterial,Laya.timer.frameLoop(1,this,this.onFrameLoop)}onFrameLoop(){this.directionLight.transform.rotate(this.rotation)}};o([Rl(Laya.Camera)],It.prototype,"camera",2),o([Rl(Laya.Scene3D)],It.prototype,"scene",2),o([Rl(Laya.Sprite3D)],It.prototype,"directionLight",2),It=o([Yw("xKG8-9oXRtan-nCzch0TsA")],It);var Xm=Laya.Vector3,Kw=Laya.CameraClearFlags,{regClass:Qw,property:Ym}=Laya,er=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Xm(0,.7,5),this.camera.transform.rotate(new Xm(10,0,0),!0,!1),this.camera.clearFlag=Kw.Sky,super.addBottomButton(["\u7ACB\u65B9\u4F53\u5929\u7A7A\u76D2","\u7A0B\u5E8F\u5316\u5929\u7A7A\u76D2"],this,[this.changeSkybox,this.changeSkyProcedural])}changeSkyProcedural(){Laya.loader.load("resources/res/threeDimen/skyBox/SkyProcedural/Skybox.lmat").then(e=>{var t=this.camera.skyRenderer;t.material=e})}changeSkybox(){Laya.loader.load("resources/res/threeDimen/skyBox/DawnDusk/Skybox.lmat").then(e=>{var t=this.camera.skyRenderer;t.material=e})}onDestroy(){}};o([Ym(Laya.Camera)],er.prototype,"camera",2),o([Ym(Laya.Scene3D)],er.prototype,"scene",2),er=o([Qw("LQ3yhA3cSV-ubr1iByatng")],er);var Km=Laya.Sprite3D,Al=Laya.MeshSprite3D,J=Laya.Vector3,Jm=Laya.PrimitiveMesh,Jw=Laya.Color,jw=Laya.PixelLineSprite3D,{regClass:qw,property:Qm}=Laya,tr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new J(0,1.2,3.5),this.camera.transform.rotate(new J(-15,0,0),!0,!1),this.sprite3D=this.scene.addChild(new Km),this.lineSprite3D=this.scene.addChild(new Km);var e=this.sprite3D.addChild(new Al(Jm.createSphere(.25,20,20)));e.transform.position=new J(0,.75,2);var t=this.lineSprite3D.addChild(new jw(3500));Bl.linearModel(e,t,Jw.GREEN),this.sprite3D.active=!1,this.lineSprite3D.active=!0}};o([Qm(Laya.Camera)],tr.prototype,"camera",2),o([Qm(Laya.Scene3D)],tr.prototype,"scene",2),tr=o([qw("zA9od7fzTgC0p6aBdl_KWQ")],tr);var w=class w{static linearModel(s,e,t){if(s instanceof Al){var a=s,i=a.meshFilter.sharedMesh,r=[];i.getPositions(r);for(var n=i.getSubMesh(0).getIndices(),l=0;l<n.length;l+=3){var d=r[n[l]],c=r[n[l+1]],u=r[n[l+2]];J.transformCoordinate(d,a.transform.worldMatrix,this.transVertex0),J.transformCoordinate(c,a.transform.worldMatrix,this.transVertex1),J.transformCoordinate(u,a.transform.worldMatrix,this.transVertex2),e.addLine(this.transVertex0,this.transVertex1,t,t),e.addLine(this.transVertex1,this.transVertex2,t,t),e.addLine(this.transVertex2,this.transVertex0,t,t)}}for(var l=0,m=s.numChildren;l<m;l++)w.linearModel(s.getChildAt(l),e,t)}static DrawBoundingBox(s,e,t){s.meshRenderer.bounds.getCorners(w.corners);var a=new J(0,0,90);w.DrawTwelveLines(w.corners[0],w.corners[1],a,e),a.setValue(0,0,0),w.DrawTwelveLines(w.corners[1],w.corners[2],a,e),a.setValue(0,0,90),w.DrawTwelveLines(w.corners[2],w.corners[3],a,e),a.setValue(0,0,0),w.DrawTwelveLines(w.corners[3],w.corners[0],a,e),a.setValue(0,0,90),w.DrawTwelveLines(w.corners[4],w.corners[5],a,e),a.setValue(0,0,0),w.DrawTwelveLines(w.corners[5],w.corners[6],a,e),a.setValue(0,0,90),w.DrawTwelveLines(w.corners[6],w.corners[7],a,e),a.setValue(0,0,0),w.DrawTwelveLines(w.corners[7],w.corners[4],a,e),a.setValue(90,0,0),w.DrawTwelveLines(w.corners[0],w.corners[4],a,e),a.setValue(90,0,0),w.DrawTwelveLines(w.corners[1],w.corners[5],a,e),a.setValue(90,0,0),w.DrawTwelveLines(w.corners[2],w.corners[6],a,e),a.setValue(90,0,0),w.DrawTwelveLines(w.corners[3],w.corners[7],a,e)}static DrawTwelveLines(s,e,t,a){var i=J.distance(s,e),r=a.addChild(new Al(Jm.createCylinder(.004,i,3)));r.transform.rotate(t,!0,!1);var n=r.transform.position,l=s.x+e.x,d=s.y+e.y,c=s.z+e.z;n.setValue(l/2,d/2,c/2),r.transform.position=n}constructor(){}};w.transVertex0=new J,w.transVertex1=new J,w.transVertex2=new J,w.corners=[];var Bl=w;var Vl=Laya.Vector3,{regClass:Zw,property:jm}=Laya,ar=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Vl(0,2,3),this.camera.transform.rotate(new Vl(-30,0,0),!0,!1);var e=this.scene.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(1,1,1)));e.transform.rotate(new Laya.Vector3(0,45,0),!1,!1);var t=new Laya.BlinnPhongMaterial;Laya.Texture2D.load("resources/res/threeDimen/layabox.png",Laya.Handler.create(null,function(a){t.albedoTexture=a})),e.meshRenderer.material=t,this.loadUI()}loadUI(){Laya.loader.load(["resources/image/img_btn_bg.png"],Laya.Handler.create(this,()=>{var e=new Laya.Button("resources/image/img_btn_bg.png","\u622A\u56FE");this.owner.addChild(e),e.size(100,30),e.labelBold=!0,e.labelSize=15,e.sizeGrid="4,4,4,4",e.pos(this.pageWidth/2-e.width/2,this.pageHeight-100),e.on(Laya.Event.CLICK,this,this.onAddClick)}))}onAddClick(){var e=this.scene.addChild(new Laya.Camera(0,.1,100));e.transform.position=new Vl(0,2,3),e.transform.rotate(new Laya.Vector3(-30,0,0),!0,!1),e.renderingOrder=-1;var t=new Laya.RenderTexture(512,512,Laya.RenderTargetFormat.R8G8B8A8,Laya.RenderTargetFormat.DEPTHSTENCIL_24_8,!1,4);Laya.Camera.drawRenderTextureByScene(e,this.scene,t);var a=new Laya.Texture(e.renderTarget,Laya.Texture.DEF_UV),a=new Laya.Texture(Laya.Texture2D.blackTexture);console.log(a.width,a.height);var i=new Laya.Sprite;this.owner.addChild(i),i.graphics.drawTexture(a);var r=i.drawToCanvas(720,1280,0,0),n=r.toBase64("image/png",1);console.log(n);var l=new window.Image;l.src=n,document.body.appendChild(l)}};o([jm(Laya.Camera)],ar.prototype,"camera",2),o([jm(Laya.Scene3D)],ar.prototype,"scene",2),ar=o([Zw("LZKeo6rTTaSvs2zMc71B-A")],ar);var pn=Laya.Vector3,{regClass:$w,property:qm}=Laya,rr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new pn(0,1.6,2),this.camera.transform.rotate(new pn(-15,0,0),!0,!1),Laya.loader.load("resources/res/threeDimen/skinModel/dude/dude.lh").then(e=>{var t=this.scene.addChild(e.create()),a=new pn(.5,.5,.5);t.transform.localScale=a,t.transform.rotate(new pn(0,3.14,0))})}};o([qm(Laya.Camera)],rr.prototype,"camera",2),o([qm(Laya.Scene3D)],rr.prototype,"scene",2),rr=o([$w("Jpahdmb5SqyB9906bZsIAw")],rr);var Zm=Laya.Vector3,{regClass:eb,property:$m}=Laya,ir=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Zm(0,.5,1),this.camera.transform.rotate(new Zm(-15,0,0),!0,!1),Laya.loader.load("resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh").then(e=>{var t=this.scene.addChild(e.create());Laya.Sprite3D.instantiate(t,this.scene,!1,new Laya.Vector3(.6,0,0)),this.scene.addChild(Laya.Sprite3D.instantiate(t,null,!1,new Laya.Vector3(-.6,0,0)))})}};o([$m(Laya.Camera)],ir.prototype,"camera",2),o([$m(Laya.Scene3D)],ir.prototype,"scene",2),ir=o([eb("ZJLGgE2DSteOIlWPdQKjeA")],ir);var pe=Laya.Vector3,tb=Laya.Handler,or=Laya.Button,sr=Laya.Event,{regClass:ab,property:eu}=Laya,nr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new pe(0,.75,1),this.camera.transform.rotate(new pe(-30,0,0),!0,!1);var e=["resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey2.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"];Laya.loader.load(e).then(t=>{this.layaMonkeyParent=this.scene.addChild(t[1].create()),this.layaMonkeySon=t[0].create(),this.layaMonkeySon.transform.localPosition=new pe(.2,0,0);var a=new pe(.5,.5,.5);this.layaMonkeySon.transform.localScale=a,this.layaMonkeyParent.addChild(this.layaMonkeySon),this.loadUI()})}loadUI(){Laya.loader.load(["resources/image/img_btn_bg.png"],tb.create(this,()=>{this.changeActionButton=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u79FB\u52A8\u7236\u7EA7\u7334\u5B50")),this.changeActionButton.size(120,30),this.changeActionButton.labelSize=10,this.changeActionButton.sizeGrid="21,83,22,76",this.changeActionButton.stateNum=1,this.changeActionButton.labelColors="#ffffff",this.changeActionButton.pos(this.pageWidth-170,120),this.changeActionButton.on(sr.CLICK,this,this.stypeFun0),this.changeActionButton1=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u653E\u5927\u7236\u7EA7\u7334\u5B50")),this.changeActionButton1.size(120,30),this.changeActionButton1.labelSize=10,this.changeActionButton1.sizeGrid="21,83,22,76",this.changeActionButton1.stateNum=1,this.changeActionButton1.labelColors="#ffffff",this.changeActionButton1.pos(this.pageWidth-170,160),this.changeActionButton1.on(sr.CLICK,this,this.stypeFun1),this.changeActionButton2=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u65CB\u8F6C\u7236\u7EA7\u7334\u5B50")),this.changeActionButton2.size(120,30),this.changeActionButton2.labelSize=10,this.changeActionButton2.sizeGrid="21,83,22,76",this.changeActionButton2.stateNum=1,this.changeActionButton2.labelColors="#ffffff",this.changeActionButton2.pos(this.pageWidth-170,200),this.changeActionButton2.on(sr.CLICK,this,this.stypeFun2),this.changeActionButton3=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u79FB\u52A8\u5B50\u7EA7\u7334\u5B50")),this.changeActionButton3.size(120,30),this.changeActionButton3.labelSize=10,this.changeActionButton3.sizeGrid="21,83,22,76",this.changeActionButton3.stateNum=1,this.changeActionButton3.labelColors="#ffffff",this.changeActionButton3.pos(this.pageWidth-170,250),this.changeActionButton3.on(sr.CLICK,this,this.stypeFun3),this.changeActionButton4=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u653E\u5927\u5B50\u7EA7\u7334\u5B50")),this.changeActionButton4.size(120,30),this.changeActionButton4.labelSize=10,this.changeActionButton4.sizeGrid="21,83,22,76",this.changeActionButton4.stateNum=1,this.changeActionButton4.labelColors="#ffffff",this.changeActionButton4.pos(this.pageWidth-170,290),this.changeActionButton4.on(sr.CLICK,this,this.stypeFun4),this.changeActionButton5=this.owner.addChild(new or("resources/image/img_btn_bg.png","\u65CB\u8F6C\u5B50\u7EA7\u7334\u5B50")),this.changeActionButton5.size(120,30),this.changeActionButton5.labelSize=10,this.changeActionButton5.sizeGrid="21,83,22,76",this.changeActionButton5.stateNum=1,this.changeActionButton5.labelColors="#ffffff",this.changeActionButton5.pos(this.pageWidth-170,330),this.changeActionButton5.on(sr.CLICK,this,this.stypeFun5)}))}stypeFun0(){this.layaMonkeyParent.transform.translate(new pe(-.1,0,0))}stypeFun1(){var e=new pe(1.2,1.2,1.2);this.layaMonkeyParent.transform.localScale=e}stypeFun2(){this.layaMonkeyParent.transform.rotate(new pe(-15,0,0),!0,!1)}stypeFun3(){this.layaMonkeySon.transform.translate(new pe(-.1,0,0))}stypeFun4(){var e=new pe(1,1,1);this.layaMonkeySon.transform.localScale=e}stypeFun5(){this.layaMonkeySon.transform.rotate(new pe(-15,0,0),!0,!1)}};o([eu(Laya.Camera)],nr.prototype,"camera",2),o([eu(Laya.Scene3D)],nr.prototype,"scene",2),nr=o([ab("ioTGP0tcSVGhA93Jcl37GA")],nr);var _l=Laya.Sprite3D,Ht=Laya.Vector3,{regClass:rb,property:tu}=Laya,hr=class extends h{constructor(){super();this._position=new Ht(0,0,0);this._position1=new Ht(0,0,0);this._rotate=new Ht(0,1,0);this._rotate1=new Ht(0,0,0);this._scale=new Ht;this.scaleDelta=0;this.scaleValue=0}onAwake(){super.base(this.camera),this.camera.transform.position=new Ht(0,1,1),this.camera.transform.rotate(new Ht(-30,0,0),!0,!1),Laya.loader.load(["resources/res/threeDimen/staticModel/grid/plane.lh","resources/res/threeDimen/skinModel/LayaMonkey/LayaMonkey.lh"]).then(e=>{this.onComplete(e)})}onComplete(e){this.scene.addChild(e[0].create());var t=e[1].create();this.layaMonkey_clone1=_l.instantiate(t,this.scene,!1,this._position1),this.layaMonkey_clone2=_l.instantiate(t,this.scene,!1,this._position1),this.layaMonkey_clone3=_l.instantiate(t,this.scene,!1,this._position1),this.clone1Transform=this.layaMonkey_clone1.transform,this.clone2Transform=this.layaMonkey_clone2.transform,this.clone3Transform=this.layaMonkey_clone3.transform,this._position1.setValue(0,0,0),this.clone1Transform.translate(this._position1),this._position1.setValue(-.5,0,0),this.clone2Transform.translate(this._position1),this._position1.setValue(.5,0,0),this.clone3Transform.translate(this._position1),this._rotate1.setValue(0,60,0),this.clone2Transform.rotate(this._rotate1,!1,!1),t.destroy(),Laya.timer.frameLoop(1,this,this.animate)}animate(){this.scaleValue=Math.sin(this.scaleDelta+=.1),this._position.y=Math.max(0,this.scaleValue/2),this.clone1Transform.position=this._position,this.clone2Transform.rotate(this._rotate,!1,!1),this._scale.x=this._scale.y=this._scale.z=Math.abs(this.scaleValue),this.clone3Transform.localScale=this._scale}};o([tu(Laya.Camera)],hr.prototype,"camera",2),o([tu(Laya.Scene3D)],hr.prototype,"scene",2),hr=o([rb("qqOpwxhoQiq9ly2Jr6yI4w")],hr);var Pl=Laya.Vector3,ib=Laya.CameraClearFlags,ob=Laya.Color,sb=Laya.TrailRenderer,{regClass:nb,property:au}=Laya,lr=class extends h{constructor(){super();this.index=0}onAwake(){super.base(this.camera),this.camera.transform.position=new Pl(0,4,5),this.camera.transform.rotate(new Pl(-45,0,0),!0,!1),this.camera.clearFlag=ib.SolidColor,this.directionLight=this.scene.getChildByName("Direction Light"),this.directionLight.color=new ob(1,1,1,1),this.directionLight.transform.rotate(new Pl(-Math.PI/3,0,0)),Laya.loader.load("resources/res/threeDimen/staticModel/grid/plane.lh").then(e=>{this.scene.addChild(e.create())}),Laya.loader.load("resources/res/threeDimen/trail/Cube.lh").then(e=>{this.trail=this.scene.addChild(e.create()),this.trailRenderer=this.trail.getChildAt(0).getChildAt(0).getComponent(sb)}),super.addBottomButton(["\u4FEE\u6539\u65F6\u95F4","\u4FEE\u6539\u65F6\u95F4"],this,[this.change,this.change])}change(){this.index++,this.index%2===1?this.trailRenderer.time=10:this.trailRenderer.time=1}};o([au(Laya.Camera)],lr.prototype,"camera",2),o([au(Laya.Scene3D)],lr.prototype,"scene",2),lr=o([nb("CvQw7Bm8R9uxJKAMJwWxUg")],lr);var hb=Laya.MeshSprite3D,kl=Laya.Vector3,lb=Laya.PrimitiveMesh,pb=Laya.MeshRenderer,db=Laya.UnlitMaterial,ru=Laya.Browser,{regClass:cb,property:iu}=Laya,pr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new kl(0,1.5,4),this.camera.transform.rotate(new kl(-15,0,0),!0,!1);let e=new hb(lb.createBox(.5,.5,.5));e.transform.position=new kl(0,1,2.5),e.transform.rotate(new Laya.Vector3(0,0,0),!1,!1),this.mat=new db,this.scene.addChild(e),e.getComponent(pb).sharedMaterial=this.mat,this.text=new Laya.Label,!ru.onAndroid&&!ru.onIOS?(this.text.text="PC\u4E0D\u652F\u6301ASTC\u7EB9\u7406\uFF0C\u8BF7\u4F7F\u7528\u5B89\u5353\u6216\u8005\u82F9\u679C\u8BBE\u5907",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text),console.log("PC\u4E0D\u652F\u6301ASTC\u7EB9\u7406")):Laya.loader.load("resources/res/threeDimen/texture/ASTC4x4Test.ktx").then(t=>{this.mat.albedoTexture=t})}};o([iu(Laya.Camera)],pr.prototype,"camera",2),o([iu(Laya.Scene3D)],pr.prototype,"scene",2),pr=o([cb("Zkc-JB0IQUS8EMv3shvplg")],pr);var mb=Laya.MeshSprite3D,Fl=Laya.Vector3,ub=Laya.PrimitiveMesh,yb=Laya.MeshRenderer,Lb=Laya.UnlitMaterial,gb=Laya.Browser,{regClass:vb,property:ou}=Laya,dr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Fl(0,1.5,4),this.camera.transform.rotate(new Fl(-15,0,0),!0,!1);let e=new mb(ub.createBox(.5,.5,.5));if(e.transform.position=new Fl(0,1,2.5),e.transform.rotate(new Laya.Vector3(0,0,0),!1,!1),this.mat=new Lb,this.scene.addChild(e),e.getComponent(yb).sharedMaterial=this.mat,this.text=new Laya.Label,gb.onAndroid)Laya.loader.load("resources/res/threeDimen/texture/ETC2Test.ktx").then(t=>{this.mat.albedoTexture=t});else{console.log("\u53EA\u6709\u5B89\u5353\u652F\u6301ETC"),this.text.text="PC\u4E0D\u652F\u6301ETC\u7EB9\u7406\uFF0C\u53EA\u6709\u5B89\u5353\u652F\u6301",this.text.color="#FFFFFF",this.text.font="Impact",this.text.fontSize=25,this.text.width=800,this.text.anchorX=.5,this.text.align="center",this.text.x=this.pageWidth/2,this.text.y=50,this.owner.addChild(this.text);return}}};o([ou(Laya.Camera)],dr.prototype,"camera",2),o([ou(Laya.Scene3D)],dr.prototype,"scene",2),dr=o([vb("tOSZbt3ESi-sMm38cGHYfQ")],dr);var Sb=Laya.Sprite3D,xb=Laya.MeshSprite3D,Il=Laya.Vector3,fb=Laya.BlinnPhongMaterial,Db=Laya.Texture2D,Cb=Laya.PrimitiveMesh,wb=Laya.FilterMode,dn=Laya.HalfFloatUtils,bb=Laya.TextureFormat,{regClass:Mb,property:su}=Laya,cr=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new Il(0,1.5,4),this.camera.transform.rotate(new Il(-15,0,0),!0,!1),this.sprite3D=this.scene.addChild(new Sb);var e=this.sprite3D.addChild(new xb(Cb.createBox(.5,.5,.5)));e.transform.position=new Il(0,1,2.5),e.transform.rotate(new Laya.Vector3(0,0,0),!1,!1);var t=new fb;t.albedoTexture=this.createHalfFloatTexture(),e.meshRenderer.sharedMaterial=t}createHalfFloatTexture(){for(var e=new Db(64,64,bb.R16G16B16A16,!0,!0),t=new Uint16Array(64*64*4),a,i=1/64,r=0,n=64;r<n;r++)for(var l=0,d=64;l<d;l++)a=(r+l*64)*4,t[a]=dn.roundToFloat16Bits(1),t[a+1]=dn.roundToFloat16Bits(r*i),t[a+2]=dn.roundToFloat16Bits(l*i),t[a+3]=dn.roundToFloat16Bits(1);return e.setPixelsData(t,!1,!1),e.filterMode=wb.Bilinear,e}};o([su(Laya.Camera)],cr.prototype,"camera",2),o([su(Laya.Scene3D)],cr.prototype,"scene",2),cr=o([Mb("kjUyFxE1QbmGZjVmq1JIHQ")],cr);var Tb=Laya.Sprite3D,nu=Laya.Vector3,{regClass:Eb,property:hu}=Laya,mr=class extends h{constructor(){super();this.index=0}onAwake(){super.base(this.camera),this.camera.transform.position=new nu(0,1.5,4),this.camera.transform.rotate(new nu(-15,0,0),!0,!1),this.sprite3D=this.scene.addChild(new Tb);var e=this.sprite3D.addChild(new Laya.MeshSprite3D(Laya.PrimitiveMesh.createBox(.5,.5,.5)));e.transform.position=new Laya.Vector3(0,1,2.5),e.transform.rotate(new Laya.Vector3(0,0,0),!1,!1);var t=new Laya.BlinnPhongMaterial;e.meshRenderer.material=t,Laya.Texture2D.load("resources/res/threeDimen/texture/layabox.png",Laya.Handler.create(null,a=>{this.texture=a,a.wrapModeU=Laya.WrapMode.Clamp,a.wrapModeV=Laya.WrapMode.Repeat,a.filterMode=Laya.FilterMode.Bilinear,a.anisoLevel=2,t.albedoTexture=a,t.tilingOffset=new Laya.Vector4(2,2,0,0)})),super.addBottomButton(["\u66F4\u6539WrapMode","\u66F4\u6539WrapMode","\u66F4\u6539WrapMode"],this,[this.setValue,this.setValue,this.setValue])}setValue(){this.index++,this.index%3===1?(this.texture.wrapModeU=Laya.WrapMode.Repeat,this.texture.wrapModeV=Laya.WrapMode.Clamp):this.index%3===2?(this.texture.wrapModeU=Laya.WrapMode.Repeat,this.texture.wrapModeV=Laya.WrapMode.Repeat):(this.texture.wrapModeU=Laya.WrapMode.Mirrored,this.texture.wrapModeV=Laya.WrapMode.Mirrored)}};o([hu(Laya.Camera)],mr.prototype,"camera",2),o([hu(Laya.Scene3D)],mr.prototype,"scene",2),mr=o([Eb("dz-xMzAcQteUlyyDf64NcA")],mr);var Rb=Laya.Scene3D,lu=Laya.Vector3,Ab=Laya.Handler,{regClass:Bb,property:pu}=Laya,ur=class extends h{constructor(){super()}onAwake(){super.base(this.camera),this.camera.transform.position=new lu(0,2,5),this.camera.transform.rotate(new lu(-15,0,0),!0,!1),Rb.load("resources/res/CompressTexture/scene.ls",Ab.create(this,e=>{this.scene.addChild(e)}))}};o([pu(Laya.Camera)],ur.prototype,"camera",2),o([pu(Laya.Scene3D)],ur.prototype,"scene",2),ur=o([Bb("n8-r7SaRTqeUpR8nG3l2yA")],ur);})();
//# sourceMappingURL=bundle.js.map
